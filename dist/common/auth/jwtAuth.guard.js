'use strict';function _0xddbb(){const _0x1fcc95=['33oOOVzZ','jwt','192HozHUX','jsonwebtoken','shift','4640360IGuJPv','verify','fingerprint','799304QjdwDJ','153704DQtlPo','slice','3hfMFqU','length','../../modules/globalConfig/globalConfig.service','toString','35xtNphF','authService','GlobalConfigService','4547716CMABRs','50121XPXnGe','redisCacheService','58EoskYI','decorate','318766ozzgic','split','Bearer','7557485zUaCFJ','checkTokenAuth','authorization','x-website-domain','RedisCacheService','AuthService','AuthGuard','design:paramtypes','switchToHttp','getRequest','canActivate','globalConfigService','getNineAiToken','UNAUTHORIZED','ModuleRef','err:\x20','JwtAuthGuard','moduleRef','21HeVzfg','__decorate','env','18OwBSvt','Injectable','830510yCtsRU','1090748noLnTj','headers','1128hAleeV','extractToken','push','381090hIelJx','get','2006808LolVqp','91536BzEWAm','UnauthorizedException'];_0xddbb=function(){return _0x1fcc95;};return _0xddbb();}const _0x1b66dd=_0x3a40;(function(_0x27d533,_0x19f190){const _0x36d527=_0x3a40,_0x334a87=_0x27d533();while(!![]){try{const _0x42665e=-parseInt(_0x36d527(0x131))/0x1+-parseInt(_0x36d527(0x13e))/0x2*(parseInt(_0x36d527(0x127))/0x3)+-parseInt(_0x36d527(0x132))/0x4*(-parseInt(_0x36d527(0x138))/0x5)+parseInt(_0x36d527(0x124))/0x6*(parseInt(_0x36d527(0x119))/0x7)+-parseInt(_0x36d527(0x121))/0x8*(-parseInt(_0x36d527(0x13c))/0x9)+parseInt(_0x36d527(0x12e))/0xa+-parseInt(_0x36d527(0x129))/0xb*(-parseInt(_0x36d527(0x126))/0xc);if(_0x42665e===_0x19f190)break;else _0x334a87['push'](_0x334a87['shift']());}catch(_0xfcb3b6){_0x334a87['push'](_0x334a87['shift']());}}}(_0xddbb,0x80806));function _0x3a40(_0x446783,_0xbf8b47){const _0xddbb16=_0xddbb();return _0x3a40=function(_0x3a402d,_0x38e19e){_0x3a402d=_0x3a402d-0x110;let _0x3500a1=_0xddbb16[_0x3a402d];return _0x3500a1;},_0x3a40(_0x446783,_0xbf8b47);}function _0x3120(){const _0x1e47e7=_0x3a40,_0xda19b3=[_0x1e47e7(0x118),_0x1e47e7(0x114),'validateToken',_0x1e47e7(0x130),_0x1e47e7(0x137),_0x1e47e7(0x13d),_0x1e47e7(0x141),'../../modules/auth/auth.service',_0x1e47e7(0x12b),'@nestjs/passport',_0x1e47e7(0x11a),'length',_0x1e47e7(0x13b),_0x1e47e7(0x13a),'@nestjs/core',_0x1e47e7(0x112),_0x1e47e7(0x111),_0x1e47e7(0x145),_0x1e47e7(0x11e),'__metadata',_0x1e47e7(0x133),_0x1e47e7(0x142),_0x1e47e7(0x144),_0x1e47e7(0x149),_0x1e47e7(0x139),'function',_0x1e47e7(0x14a),_0x1e47e7(0x12c),_0x1e47e7(0x147),_0x1e47e7(0x13f),_0x1e47e7(0x122),'handleRequest',_0x1e47e7(0x115),_0x1e47e7(0x128),_0x1e47e7(0x140),_0x1e47e7(0x134),'object','8676288JyBcyb','metadata',_0x1e47e7(0x117),'createTokenFromFingerprint',_0x1e47e7(0x12a),_0x1e47e7(0x113),_0x1e47e7(0x11c),'HttpStatus',_0x1e47e7(0x143),'defineProperty','HttpException',_0x1e47e7(0x146),_0x1e47e7(0x11b),'log',_0x1e47e7(0x12f),_0x1e47e7(0x14b),_0x1e47e7(0x120),_0x1e47e7(0x11f),_0x1e47e7(0x116),'11634900mBGsyV','getOwnPropertyDescriptor','../../modules/redisCache/redisCache.service',_0x1e47e7(0x125)];return _0x3120=function(){return _0xda19b3;},_0x3120();}function _0xbcd4(_0x6d7665,_0x550c34){const _0x4f5bc5=_0x3120();return _0xbcd4=function(_0x5914b4,_0x2f234d){_0x5914b4=_0x5914b4-0x16c;let _0xcbebe7=_0x4f5bc5[_0x5914b4];return _0xcbebe7;},_0xbcd4(_0x6d7665,_0x550c34);}const _0x4c19d1=_0xbcd4;(function(_0x374ab8,_0x1dd567){const _0x464fdf=_0x3a40,_0x4c4541=_0xbcd4,_0x57cdb5=_0x374ab8();while(!![]){try{const _0x507ea1=parseInt(_0x4c4541(0x17a))/0x1+-parseInt(_0x4c4541(0x192))/0x2*(-parseInt(_0x4c4541(0x1a3))/0x3)+-parseInt(_0x4c4541(0x18c))/0x4+-parseInt(_0x4c4541(0x171))/0x5+parseInt(_0x4c4541(0x188))/0x6*(-parseInt(_0x4c4541(0x1a2))/0x7)+parseInt(_0x4c4541(0x1a5))/0x8+-parseInt(_0x4c4541(0x16f))/0x9*(-parseInt(_0x4c4541(0x17c))/0xa);if(_0x507ea1===_0x1dd567)break;else _0x57cdb5['push'](_0x57cdb5[_0x464fdf(0x12d)]());}catch(_0x514baa){_0x57cdb5[_0x464fdf(0x123)](_0x57cdb5[_0x464fdf(0x12d)]());}}}(_0x3120,0xc6365));var __decorate=this&&this[_0x4c19d1(0x18a)]||function(_0x121ee8,_0x5056f5,_0x8fc131,_0x54bc74){const _0x31688c=_0x3a40,_0x3aab4a=_0x4c19d1;var _0x4b9ab1=arguments[_0x31688c(0x135)],_0x2c3a72=_0x4b9ab1<0x3?_0x5056f5:_0x54bc74===null?_0x54bc74=Object[_0x3aab4a(0x17d)](_0x5056f5,_0x8fc131):_0x54bc74,_0x46be5c;if(typeof Reflect===_0x3aab4a(0x1a4)&&typeof Reflect[_0x3aab4a(0x19d)]===_0x3aab4a(0x199))_0x2c3a72=Reflect[_0x3aab4a(0x19d)](_0x121ee8,_0x5056f5,_0x8fc131,_0x54bc74);else{for(var _0x56ff69=_0x121ee8[_0x3aab4a(0x18b)]-0x1;_0x56ff69>=0x0;_0x56ff69--)if(_0x46be5c=_0x121ee8[_0x56ff69])_0x2c3a72=(_0x4b9ab1<0x3?_0x46be5c(_0x2c3a72):_0x4b9ab1>0x3?_0x46be5c(_0x5056f5,_0x8fc131,_0x2c3a72):_0x46be5c(_0x5056f5,_0x8fc131))||_0x2c3a72;}return _0x4b9ab1>0x3&&_0x2c3a72&&Object[_0x3aab4a(0x172)](_0x5056f5,_0x8fc131,_0x2c3a72),_0x2c3a72;},__metadata=this&&this[_0x4c19d1(0x193)]||function(_0x2e12aa,_0x1dceea){const _0x4c5fa6=_0x4c19d1;if(typeof Reflect===_0x4c5fa6(0x1a4)&&typeof Reflect[_0x4c5fa6(0x1a6)]===_0x4c5fa6(0x199))return Reflect[_0x4c5fa6(0x1a6)](_0x2e12aa,_0x1dceea);};Object[_0x4c19d1(0x172)](exports,'__esModule',{'value':!![]}),exports[_0x4c19d1(0x1a7)]=void 0x0;const redisCache_service_1=require(_0x4c19d1(0x17e)),common_1=require('@nestjs/common'),passport_1=require(_0x4c19d1(0x189)),jwt=require(_0x4c19d1(0x19b)),core_1=require(_0x4c19d1(0x18e)),globalConfig_service_1=require(_0x1b66dd(0x136)),auth_service_1=require(_0x4c19d1(0x187));let JwtAuthGuard=class JwtAuthGuard extends(0x0,passport_1[_0x4c19d1(0x197)])(_0x4c19d1(0x16d)){constructor(_0x3c7da9,_0x50a62a,_0xe4644a,_0x298e69){const _0x34e9b0=_0x1b66dd,_0x411913=_0x4c19d1;super(),this[_0x411913(0x185)]=_0x3c7da9,this[_0x34e9b0(0x118)]=_0x50a62a,this[_0x411913(0x18f)]=_0xe4644a,this[_0x411913(0x198)]=_0x298e69;}async[_0x4c19d1(0x190)](_0x2ba736){const _0x1ebed5=_0x1b66dd,_0xfcf537=_0x4c19d1;!this[_0xfcf537(0x185)]&&(this[_0xfcf537(0x185)]=this[_0xfcf537(0x180)][_0xfcf537(0x17f)](redisCache_service_1[_0xfcf537(0x19c)],{'strict':![]}));const _0x21ec38=_0x2ba736[_0xfcf537(0x178)]()[_0x1ebed5(0x110)](),_0x598739=_0x21ec38[_0xfcf537(0x179)][_0xfcf537(0x174)],_0x31ed98=this[_0xfcf537(0x19e)](_0x21ec38);_0x21ec38['user']=this[_0xfcf537(0x182)](_0x31ed98);const _0x223a24=this[_0xfcf537(0x18f)][_0xfcf537(0x16e)]();return await this[_0xfcf537(0x185)][_0xfcf537(0x196)](_0x31ed98,_0x21ec38),!![];}[_0x1b66dd(0x122)](_0x4e53d4){const _0x41ac68=_0x1b66dd,_0x44b2b4=_0x4c19d1;if(!_0x4e53d4[_0x44b2b4(0x179)][_0x41ac68(0x145)]){if(_0x4e53d4[_0x44b2b4(0x179)][_0x44b2b4(0x183)]){let _0x147d22=_0x4e53d4[_0x44b2b4(0x179)][_0x44b2b4(0x183)];_0x147d22>0x7fffffff&&(_0x147d22=_0x147d22[_0x44b2b4(0x184)]()[_0x44b2b4(0x194)](-0x9),_0x147d22=Number(String(Number(_0x147d22))));const _0x1a476e=this[_0x44b2b4(0x198)][_0x44b2b4(0x16c)](_0x147d22);return _0x1a476e;}return null;}const _0x3f00fb=_0x4e53d4[_0x44b2b4(0x179)][_0x44b2b4(0x191)][_0x44b2b4(0x186)]('\x20');if(_0x3f00fb[_0x41ac68(0x135)]!==0x2||_0x3f00fb[0x0]!==_0x44b2b4(0x195))return null;return _0x3f00fb[0x1];}[_0x4c19d1(0x182)](_0xd27f94){const _0x4ad58d=_0x4c19d1;try{return jwt[_0x4ad58d(0x177)](_0xd27f94,process[_0x4ad58d(0x175)]['JWT_SECRET']);}catch(_0x49b120){throw new common_1[(_0x4ad58d(0x173))]('亲爱的用户,请登录后继续操作,我们正在等您的到来！',common_1[_0x4ad58d(0x170)][_0x4ad58d(0x181)]);}}[_0x4c19d1(0x19f)](_0x49a278,_0x6c7777,_0x5d40c3){const _0x554139=_0x4c19d1;if(_0x49a278||!_0x6c7777){console[_0x554139(0x176)](_0x554139(0x17b),_0x49a278);throw _0x49a278||new common_1[(_0x554139(0x1a1))]();}return _0x6c7777;}};JwtAuthGuard=__decorate([(0x0,common_1[_0x1b66dd(0x11d)])(),__metadata(_0x4c19d1(0x19a),[redisCache_service_1[_0x1b66dd(0x147)],core_1[_0x4c19d1(0x1a0)],globalConfig_service_1[_0x4c19d1(0x18d)],auth_service_1[_0x1b66dd(0x148)]])],JwtAuthGuard),exports['JwtAuthGuard']=JwtAuthGuard;