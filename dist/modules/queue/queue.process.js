'use strict';function _0x16a3(_0x4870af,_0x17d550){var _0x5a54ea=_0x5a54();return _0x16a3=function(_0x16a3da,_0x39cbc1){_0x16a3da=_0x16a3da-0x1cc;var _0x5af9a7=_0x5a54ea[_0x16a3da];return _0x5af9a7;},_0x16a3(_0x4870af,_0x17d550);}var _0x5b2ef4=_0x16a3;(function(_0x2ce458,_0x113189){var _0x7cb4e7=_0x16a3,_0x4e882a=_0x2ce458();while(!![]){try{var _0x37fc76=parseInt(_0x7cb4e7(0x1f7))/0x1+-parseInt(_0x7cb4e7(0x1f9))/0x2*(-parseInt(_0x7cb4e7(0x1f2))/0x3)+-parseInt(_0x7cb4e7(0x1e0))/0x4+parseInt(_0x7cb4e7(0x1d5))/0x5*(-parseInt(_0x7cb4e7(0x1e1))/0x6)+parseInt(_0x7cb4e7(0x1e5))/0x7*(parseInt(_0x7cb4e7(0x1d7))/0x8)+parseInt(_0x7cb4e7(0x1da))/0x9*(-parseInt(_0x7cb4e7(0x1fe))/0xa)+parseInt(_0x7cb4e7(0x1de))/0xb*(parseInt(_0x7cb4e7(0x1fb))/0xc);if(_0x37fc76===_0x113189)break;else _0x4e882a['push'](_0x4e882a['shift']());}catch(_0x3ed55b){_0x4e882a['push'](_0x4e882a['shift']());}}}(_0x5a54,0xc38fa));var _0xed340f=_0x5cf8;(function(_0x536ae6,_0x5222cd){var _0x40568a=_0x16a3,_0x10411f=_0x5cf8,_0x31629c=_0x536ae6();while(!![]){try{var _0x421321=parseInt(_0x10411f(0xd6))/0x1+parseInt(_0x10411f(0xc6))/0x2*(parseInt(_0x10411f(0xe3))/0x3)+parseInt(_0x10411f(0xcc))/0x4+-parseInt(_0x10411f(0xee))/0x5+-parseInt(_0x10411f(0xef))/0x6+parseInt(_0x10411f(0xc2))/0x7*(-parseInt(_0x10411f(0xd2))/0x8)+parseInt(_0x10411f(0xc9))/0x9;if(_0x421321===_0x5222cd)break;else _0x31629c['push'](_0x31629c[_0x40568a(0x1ce)]());}catch(_0x257f24){_0x31629c[_0x40568a(0x210)](_0x31629c['shift']());}}}(_0x5cff,0x3c5b2));var __decorate=this&&this[_0x5b2ef4(0x1df)]||function(_0x537fdb,_0x67fb74,_0x84ff7f,_0x206e94){var _0x4c5bb0=_0x5b2ef4,_0x1e54a0=_0x5cf8,_0x29e9d7=arguments[_0x1e54a0(0xbb)],_0x334d38=_0x29e9d7<0x3?_0x67fb74:_0x206e94===null?_0x206e94=Object[_0x1e54a0(0xda)](_0x67fb74,_0x84ff7f):_0x206e94,_0x57aaac;if(typeof Reflect==='object'&&typeof Reflect[_0x4c5bb0(0x1e7)]===_0x1e54a0(0xc7))_0x334d38=Reflect[_0x1e54a0(0xe4)](_0x537fdb,_0x67fb74,_0x84ff7f,_0x206e94);else{for(var _0x5ac793=_0x537fdb[_0x1e54a0(0xbb)]-0x1;_0x5ac793>=0x0;_0x5ac793--)if(_0x57aaac=_0x537fdb[_0x5ac793])_0x334d38=(_0x29e9d7<0x3?_0x57aaac(_0x334d38):_0x29e9d7>0x3?_0x57aaac(_0x67fb74,_0x84ff7f,_0x334d38):_0x57aaac(_0x67fb74,_0x84ff7f))||_0x334d38;}return _0x29e9d7>0x3&&_0x334d38&&Object[_0x1e54a0(0xd0)](_0x67fb74,_0x84ff7f,_0x334d38),_0x334d38;},__metadata=this&&this[_0xed340f(0xc1)]||function(_0x73777d,_0x4f7f7e){var _0x4f70f6=_0x5b2ef4,_0x28d02d=_0xed340f;if(typeof Reflect===_0x28d02d(0xce)&&typeof Reflect[_0x28d02d(0xe6)]===_0x4f70f6(0x1f3))return Reflect[_0x28d02d(0xe6)](_0x73777d,_0x4f7f7e);},QueueProcessor_1;function _0x5cf8(_0x9c0b65,_0x1004f1){var _0x3ec2bd=_0x5cff();return _0x5cf8=function(_0x2cf1f0,_0x3466cb){_0x2cf1f0=_0x2cf1f0-0xba;var _0x454a17=_0x3ec2bd[_0x2cf1f0];return _0x454a17;},_0x5cf8(_0x9c0b65,_0x1004f1);}function _0x5cff(){var _0xcb9ae3=_0x5b2ef4,_0x101fcc=[_0xcb9ae3(0x214),_0xcb9ae3(0x1d6),_0xcb9ae3(0x205),_0xcb9ae3(0x1e8),_0xcb9ae3(0x1ef),_0xcb9ae3(0x20f),_0xcb9ae3(0x1f4),'midjourneyService',_0xcb9ae3(0x1ed),_0xcb9ae3(0x1e7),'handleJob',_0xcb9ae3(0x1ff),_0xcb9ae3(0x213),_0xcb9ae3(0x1e9),_0xcb9ae3(0x201),'onQueueFailed',_0xcb9ae3(0x204),_0xcb9ae3(0x20b),'env',_0xcb9ae3(0x209),_0xcb9ae3(0x1f8),_0xcb9ae3(0x1ee),'onQueueActive',_0xcb9ae3(0x1eb),'QueueProcessor',_0xcb9ae3(0x200),'OnQueueResumed','Process',_0xcb9ae3(0x1f6),_0xcb9ae3(0x20a),'../midjourney/midjourney.service',_0xcb9ae3(0x1fd),'prototype','Queue\x20failed:\x20',_0xcb9ae3(0x1e6),_0xcb9ae3(0x1e3),_0xcb9ae3(0x1d4),_0xcb9ae3(0x20c),_0xcb9ae3(0x1f1),_0xcb9ae3(0x1fa),_0xcb9ae3(0x1f3),'logger',_0xcb9ae3(0x1d2),_0xcb9ae3(0x1dd),_0xcb9ae3(0x206),_0xcb9ae3(0x1d8),'OnQueueDrained','object','design:returntype','defineProperty',_0xcb9ae3(0x1ea),_0xcb9ae3(0x208),_0xcb9ae3(0x211),_0xcb9ae3(0x212),_0xcb9ae3(0x1cc),_0xcb9ae3(0x1ec),_0xcb9ae3(0x207),_0xcb9ae3(0x1db),'@nestjs/bull','getOwnPropertyDescriptor'];return _0x5cff=function(){return _0x101fcc;},_0x5cff();}Object[_0x5b2ef4(0x1e4)](exports,_0xed340f(0xe0),{'value':!![]}),exports['QueueProcessor']=void 0x0;const bull_1=require(_0xed340f(0xd9)),common_1=require(_0xed340f(0xd4)),midjourney_service_1=require(_0xed340f(0xbd));function _0x5a54(){var _0x20f2b2=['926940DxNhWD','82JjlTCP','36evyfYk','OnQueuePaused','OnQueueActive','4860aMfcaq','metadata','\x20were\x20cleaned.','队列恢复的时候调用','OnQueueCompleted','QueueProcessor','name','onQueueCleaned','MidjourneyService','onQueueError','153944JJySCe','1468170MshgiJ','log','data','队列暂停的时候调用','midjourneyService','队列发生错误','__esModule','push','error','@nestjs/common','onQueueCompleted','Logger','onQueueProgress','prototype','shift','onQueueFailed','drawFailed','design:returntype','5973075lysuda','OnQueueProgress','Processor','235DcnmSB','CONCURRENCY','8FsMHYD','246740nwXewr','mjDraw','17694kwoSbr','design:type','OnQueueError','draw','2392148MyhCBr','__decorate','3325020lwMvac','93690mtIXLZ','OnQueueCleaned','154aUIQaQ','defineProperty','5781881FASgkp','__metadata','decorate','Queue\x20cleaned:\x20','OnQueueFailed','onQueueDrained',':\x20绘画失败\x20','269365Kvmmns','10842sKlucp','onQueuePaused','design:paramtypes','\x20jobs\x20of\x20type\x20','队列任务的一个回调用于通知当前进度','9HUkYDc','function','onQueueResumed','handleJob','length','452857eVLtHi','1072206zmhFtH'];_0x5a54=function(){return _0x20f2b2;};return _0x5a54();}let QueueProcessor=QueueProcessor_1=class QueueProcessor{constructor(_0x3de822){var _0x55b9cb=_0xed340f;this[_0x55b9cb(0xe2)]=_0x3de822,this[_0x55b9cb(0xc8)]=new common_1[(_0x55b9cb(0xdb))](QueueProcessor_1[_0x55b9cb(0xeb)]);}async[_0xed340f(0xe5)](_0x278507){var _0x346226=_0xed340f;const _0x1a9c59=await this[_0x346226(0xe2)][_0x346226(0xca)](_0x278507[_0x346226(0xec)],_0x278507['id']);return _0x1a9c59;}[_0xed340f(0xf1)](_0x1b74a3){}[_0xed340f(0xd7)](_0x56e42b){var _0x3146d2=_0x5b2ef4;console[_0x3146d2(0x20a)](_0x3146d2(0x20e),_0x56e42b);}[_0xed340f(0xd5)](_0x4da6ac,_0x6fedd8){var _0x20e12e=_0xed340f;console[_0x20e12e(0xbc)](_0x20e12e(0xc5),_0x4da6ac['id'],_0x6fedd8);}[_0x5b2ef4(0x213)](_0x18ca9a,_0x19c591){}[_0xed340f(0xea)](_0x48d49c,_0x5564fc){var _0x3f6bdc=_0x5b2ef4,_0x55b3d0=_0xed340f;common_1[_0x3f6bdc(0x214)][_0x55b3d0(0xd3)](_0x55b3d0(0xc0)+_0x5564fc['message']+_0x55b3d0(0xf2)+_0x48d49c['id'],_0x55b3d0(0xf3)),this[_0x3f6bdc(0x20d)][_0x3f6bdc(0x1d0)](_0x48d49c[_0x55b3d0(0xec)]);}[_0xed340f(0xf0)](){var _0x3dee13=_0xed340f;console[_0x3dee13(0xbc)](_0x3dee13(0xc4));}[_0xed340f(0xe1)](){var _0x10f31a=_0xed340f;console[_0x10f31a(0xbc)](_0x10f31a(0xe9));}[_0xed340f(0xdd)](_0x4b0952,_0xb72fba){var _0x2dad6b=_0x5b2ef4,_0x1d6fa2=_0xed340f;common_1[_0x1d6fa2(0xdb)][_0x1d6fa2(0xbc)](_0x1d6fa2(0xde)+_0x4b0952[_0x1d6fa2(0xbb)]+_0x2dad6b(0x1f0)+_0xb72fba+_0x1d6fa2(0xf4),_0x2dad6b(0x203));}[_0xed340f(0xd1)](){}};__decorate([(0x0,bull_1[_0xed340f(0xba)])({'name':_0x5b2ef4(0x1d9),'concurrency':process[_0xed340f(0xed)][_0xed340f(0xdc)]?+process[_0xed340f(0xed)][_0xed340f(0xdc)]:0x3}),__metadata(_0x5b2ef4(0x1db),Function),__metadata(_0x5b2ef4(0x1ef),[Object]),__metadata(_0xed340f(0xcf),Promise)],QueueProcessor[_0xed340f(0xbf)],_0x5b2ef4(0x1f5),null),__decorate([(0x0,bull_1[_0xed340f(0xbe)])(),__metadata(_0xed340f(0xd8),Function),__metadata(_0xed340f(0xdf),[Object]),__metadata(_0xed340f(0xcf),void 0x0)],QueueProcessor[_0xed340f(0xbf)],_0xed340f(0xf1),null),__decorate([(0x0,bull_1[_0x5b2ef4(0x1dc)])(),__metadata(_0xed340f(0xd8),Function),__metadata(_0x5b2ef4(0x1ef),[Error]),__metadata(_0xed340f(0xcf),void 0x0)],QueueProcessor[_0xed340f(0xbf)],_0xed340f(0xd7),null),__decorate([(0x0,bull_1[_0x5b2ef4(0x1d3)])(),__metadata(_0xed340f(0xd8),Function),__metadata(_0xed340f(0xdf),[Object,Number]),__metadata(_0xed340f(0xcf),void 0x0)],QueueProcessor[_0xed340f(0xbf)],_0x5b2ef4(0x1cc),null),__decorate([(0x0,bull_1[_0x5b2ef4(0x202)])(),__metadata(_0xed340f(0xd8),Function),__metadata(_0x5b2ef4(0x1ef),[Object,Object]),__metadata(_0x5b2ef4(0x1d1),void 0x0)],QueueProcessor[_0xed340f(0xbf)],_0xed340f(0xe7),null),__decorate([(0x0,bull_1[_0xed340f(0xe8)])(),__metadata(_0xed340f(0xd8),Function),__metadata(_0x5b2ef4(0x1ef),[Object,Error]),__metadata(_0xed340f(0xcf),void 0x0)],QueueProcessor[_0xed340f(0xbf)],_0x5b2ef4(0x1cf),null),__decorate([(0x0,bull_1[_0x5b2ef4(0x1fc)])(),__metadata(_0xed340f(0xd8),Function),__metadata(_0xed340f(0xdf),[]),__metadata(_0xed340f(0xcf),void 0x0)],QueueProcessor[_0x5b2ef4(0x1cd)],_0xed340f(0xf0),null),__decorate([(0x0,bull_1[_0xed340f(0xf5)])(),__metadata(_0x5b2ef4(0x1db),Function),__metadata(_0x5b2ef4(0x1ef),[]),__metadata(_0xed340f(0xcf),void 0x0)],QueueProcessor[_0xed340f(0xbf)],_0xed340f(0xe1),null),__decorate([(0x0,bull_1[_0x5b2ef4(0x1e2)])(),__metadata(_0xed340f(0xd8),Function),__metadata('design:paramtypes',[Array,String]),__metadata('design:returntype',void 0x0)],QueueProcessor[_0xed340f(0xbf)],_0x5b2ef4(0x205),null),__decorate([(0x0,bull_1[_0xed340f(0xcd)])(),__metadata(_0xed340f(0xd8),Function),__metadata(_0xed340f(0xdf),[]),__metadata(_0xed340f(0xcf),void 0x0)],QueueProcessor[_0xed340f(0xbf)],_0xed340f(0xd1),null),QueueProcessor=QueueProcessor_1=__decorate([(0x0,bull_1[_0xed340f(0xc3)])('MJDRAW'),__metadata(_0xed340f(0xdf),[midjourney_service_1[_0xed340f(0xcb)]])],QueueProcessor),exports[_0x5b2ef4(0x203)]=QueueProcessor;