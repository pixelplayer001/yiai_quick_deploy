'use strict';function _0x199e(_0x1949fa,_0x4b0204){const _0x54d328=_0x54d3();return _0x199e=function(_0x199ef4,_0x3ebd5a){_0x199ef4=_0x199ef4-0xf5;let _0x4bccbb=_0x54d328[_0x199ef4];return _0x4bccbb;},_0x199e(_0x1949fa,_0x4b0204);}const _0x16c15e=_0x199e;(function(_0x303d4e,_0x10c135){const _0x564676=_0x199e,_0x258f8c=_0x303d4e();while(!![]){try{const _0x2b98af=-parseInt(_0x564676(0x10d))/0x1*(parseInt(_0x564676(0x197))/0x2)+-parseInt(_0x564676(0x146))/0x3+parseInt(_0x564676(0x150))/0x4+-parseInt(_0x564676(0x172))/0x5+-parseInt(_0x564676(0x185))/0x6+-parseInt(_0x564676(0x155))/0x7+parseInt(_0x564676(0x193))/0x8;if(_0x2b98af===_0x10c135)break;else _0x258f8c['push'](_0x258f8c['shift']());}catch(_0x54ef20){_0x258f8c['push'](_0x258f8c['shift']());}}}(_0x54d3,0x69a10));function _0x54d3(){const _0xedf96b=['UserStatusErrMsg','register','16038408exDZJA','DESC','updateUserStatus','assign','46tqbxkj','修改用户信息失败！','shift','../../common/constants/balance.constant','HttpException',']成功!','save','用户名或者邮箱已被注册！','PENDING','$2y$','digest','sign','startsWith','queryUserBalanceByIds','addBalanceToNewUser','123456','UserStatusEnum','修改密码失败、请重新试试吧。','userId','GlobalConfigService','3191432eBNhue','phone','12OfxwlM','../userBalance/userBalance.service','未激活用户不可手动变更状态！','当前账户不存在！','createUserAndVerifycation','__param','error:\x20','InjectRepository','超级管理员不可被操作！','密码重置为[','@nestjs/typeorm','generateRandomString','960226yYaQuu','openId','avatar','updateInfo','./user.entity','../../common/constants/user.constant','851dNDBrR','configKey','VerificationService','status','user','saveRecordRechargeLog','@default.com','您的账户已被永久加入黑名单、如有疑问、请联系管理员！','lastLoginIp','当前绑定用户不存在！','userEntity','已生成过邀请码、请勿重复生成','LOCKED','isVerifyEmail','mailerService','MailerService','../chatgpt/whiteList.entity','globalConfigService','queryUserBalance','修改用户信息成功！','../verification/verification.service','Not','queryOne','ConfigEntity','split','getUserOpenId','function','的账号激活','defineProperty','maskIpAddress','createVerification','当前用户信息失效、请重新登录！','log','compareSync','connection','19856EdQGXt','queryUserInfoById','registerVerifyEmailFrom','reduce','forEach','WhiteListEntity','userRecharge','username','registerVerifyEmailTitle','registerIp','getUserFromOpenId','client','__decorate','修改用户状态成功！','registerBaseUrl','createUserFromOpenId','email','hex','length','findOne','----,','role','1813032pLbvOe','VerificationEnum','@nestjs-modules/mailer','find','用户不存在！','getUserStatus','恭喜您绑定成功、后续可直接扫码登录了！','configVal','checkUserStatus','当前密码错误！','1412872DRoYNC','push','affected','userDefautlAvatar','BLACKLISTED','4028934mxeFaE','balanceInfo','UNAUTHORIZED','139320xPWDFq','获取邀请记录失败！','UserBalanceService','8FlaWYO','您的账户已被封禁、如有疑问、请联系管理员！','230804zcrzHn','$2b$','316191JTNDdv','无效的邀请码！','重置密码失败！','md5','没有变更，无需更改！','super','ADMIN_GIFT','update','bcryptjs','verificationService','inviteLink','genInviteCode','createHash','getConfigs','password','createUser','createRandomUid','inviteCode','map','1150020deJuXK','registerVerifyEmailDesc','configEntity','queryOneUserInfo','resetUserPass','crypto','getOwnPropertyDescriptor','../../common/utils','HttpStatus','updateUserPassword','cloneDeep','verifyUserPassword','sendMail','BAD_REQUEST','metadata','userBalanceService','../../common/constants/verification.constant','Connection','registerVerifyExpir','2975280jgqJCY','findAndCount','@nestjs/common','用户名已存在、请更换用户名！','getClientIp','queryAll','UserEntity','createdAt','2663586PQPCtS','../globalConfig/config.entity','maskEmail','object'];_0x54d3=function(){return _0xedf96b;};return _0x54d3();}const _0x3fcc6f=_0x2bea;(function(_0x48074a,_0x4a4b5f){const _0x2a59f0=_0x199e,_0x235149=_0x2bea,_0x55ccc4=_0x48074a();while(!![]){try{const _0x2311af=parseInt(_0x235149(0xcd))/0x1+-parseInt(_0x235149(0xb2))/0x2*(-parseInt(_0x235149(0xcc))/0x3)+-parseInt(_0x235149(0x127))/0x4+parseInt(_0x235149(0x75))/0x5*(-parseInt(_0x235149(0x11d))/0x6)+-parseInt(_0x235149(0xd4))/0x7+-parseInt(_0x235149(0xe0))/0x8+-parseInt(_0x235149(0xa6))/0x9;if(_0x2311af===_0x4a4b5f)break;else _0x55ccc4['push'](_0x55ccc4[_0x2a59f0(0x199)]());}catch(_0x46e6d7){_0x55ccc4[_0x2a59f0(0x151)](_0x55ccc4[_0x2a59f0(0x199)]());}}}(_0x38cf,0x90d73));var __decorate=this&&this[_0x3fcc6f(0x7f)]||function(_0x31d7ba,_0x5a35d3,_0x4eff95,_0x4353fd){const _0xc930fb=_0x199e,_0x407f80=_0x3fcc6f;var _0x4aaac7=arguments[_0x407f80(0xc2)],_0x37c635=_0x4aaac7<0x3?_0x5a35d3:_0x4353fd===null?_0x4353fd=Object[_0xc930fb(0x178)](_0x5a35d3,_0x4eff95):_0x4353fd,_0xfd52a9;if(typeof Reflect===_0x407f80(0xf7)&&typeof Reflect[_0x407f80(0xa2)]===_0x407f80(0xf5))_0x37c635=Reflect[_0x407f80(0xa2)](_0x31d7ba,_0x5a35d3,_0x4eff95,_0x4353fd);else{for(var _0x3b2a90=_0x31d7ba[_0x407f80(0xc2)]-0x1;_0x3b2a90>=0x0;_0x3b2a90--)if(_0xfd52a9=_0x31d7ba[_0x3b2a90])_0x37c635=(_0x4aaac7<0x3?_0xfd52a9(_0x37c635):_0x4aaac7>0x3?_0xfd52a9(_0x5a35d3,_0x4eff95,_0x37c635):_0xfd52a9(_0x5a35d3,_0x4eff95))||_0x37c635;}return _0x4aaac7>0x3&&_0x37c635&&Object[_0xc930fb(0x129)](_0x5a35d3,_0x4eff95,_0x37c635),_0x37c635;},__metadata=this&&this[_0x3fcc6f(0x111)]||function(_0x56fe53,_0x4f9ad1){const _0x56d3ca=_0x3fcc6f;if(typeof Reflect===_0x56d3ca(0xf7)&&typeof Reflect[_0x56d3ca(0xbf)]===_0x56d3ca(0xf5))return Reflect[_0x56d3ca(0xbf)](_0x56fe53,_0x4f9ad1);},__param=this&&this[_0x16c15e(0x100)]||function(_0x1856ec,_0x1ecb98){return function(_0x182b1c,_0x23a04f){_0x1ecb98(_0x182b1c,_0x23a04f,_0x1856ec);};};Object[_0x3fcc6f(0xd2)](exports,_0x3fcc6f(0xed),{'value':!![]}),exports[_0x3fcc6f(0xad)]=void 0x0;function _0x2bea(_0x594aae,_0x5a2bb4){const _0x2641bf=_0x38cf();return _0x2bea=function(_0x5dbe97,_0x4318d8){_0x5dbe97=_0x5dbe97-0x74;let _0x1a583b=_0x2641bf[_0x5dbe97];return _0x1a583b;},_0x2bea(_0x594aae,_0x5a2bb4);}const globalConfig_service_1=require(_0x3fcc6f(0x9a)),user_constant_1=require(_0x3fcc6f(0x74)),mailer_1=require(_0x3fcc6f(0x92)),verification_service_1=require(_0x3fcc6f(0xc1)),common_1=require(_0x3fcc6f(0x121)),typeorm_1=require(_0x16c15e(0x105)),typeorm_2=require(_0x3fcc6f(0xc6)),user_entity_1=require(_0x3fcc6f(0xfb)),bcrypt=require(_0x3fcc6f(0x76)),crypto=require(_0x3fcc6f(0x7a)),_=require(_0x3fcc6f(0xa0)),verification_constant_1=require(_0x3fcc6f(0x8f)),userBalance_service_1=require(_0x16c15e(0xfc)),utils_1=require(_0x3fcc6f(0x7b)),balance_constant_1=require(_0x16c15e(0x19a)),config_entity_1=require(_0x3fcc6f(0xb8)),whiteList_entity_1=require(_0x3fcc6f(0x100));function _0x38cf(){const _0x3ce700=_0x16c15e,_0xdee607=[_0x3ce700(0x13e),_0x3ce700(0x16b),_0x3ce700(0x191),_0x3ce700(0x19c),_0x3ce700(0x140),_0x3ce700(0x163),_0x3ce700(0x184),_0x3ce700(0x195),_0x3ce700(0x182),'globalConfigService',_0x3ce700(0x164),_0x3ce700(0x148),_0x3ce700(0x18f),_0x3ce700(0x14a),'getInviteRecord',_0x3ce700(0x124),_0x3ce700(0x16f),'$2a$',_0x3ce700(0x16c),'../globalConfig/globalConfig.service',_0x3ce700(0x11b),_0x3ce700(0x160),_0x3ce700(0x139),'ACTIVE',_0x3ce700(0x175),'lodash',_0x3ce700(0x141),'decorate',_0x3ce700(0x165),'consecutiveDays','UserStatusEnum',_0x3ce700(0x18d),'forEach','addBalanceToUser',_0x3ce700(0x128),'getOpenIdByUserId','updateStatus',_0x3ce700(0x176),'UserService',_0x3ce700(0x14b),_0x3ce700(0x113),_0x3ce700(0x118),'当前账户不存在！',_0x3ce700(0x15b),'hashSync',_0x3ce700(0x194),'md5',_0x3ce700(0x1a4),'email\x20response\x20\x20->\x20:\x20',_0x3ce700(0x18e),_0x3ce700(0x14f),'getSuper',_0x3ce700(0xff),_0x3ce700(0x152),_0x3ce700(0x112),'configMap:\x20',_0x3ce700(0x180),'绑定微信失败、请联系管理员！',_0x3ce700(0x121),_0x3ce700(0x142),'verifyUserCredentials','visitor',_0x3ce700(0x18b),'typeorm',_0x3ce700(0x14d),_0x3ce700(0x173),_0x3ce700(0x17a),'修改用户状态失败！',_0x3ce700(0x181),_0x3ce700(0x15f),_0x3ce700(0x107),_0x3ce700(0x186),_0x3ce700(0x168),_0x3ce700(0x10f),_0x3ce700(0x19d),'defineProperty',_0x3ce700(0x183),_0x3ce700(0x15d),_0x3ce700(0x159),_0x3ce700(0x11f),'Registration',_0x3ce700(0x157),_0x3ce700(0x156),_0x3ce700(0x169),_0x3ce700(0x196),_0x3ce700(0x1a3),_0x3ce700(0x189),_0x3ce700(0x19e),_0x3ce700(0x1a2),_0x3ce700(0xf9),_0x3ce700(0x13a),_0x3ce700(0x104),'username',_0x3ce700(0x154),'whiteListEntity',_0x3ce700(0x19f),_0x3ce700(0x101),_0x3ce700(0x138),_0x3ce700(0x106),_0x3ce700(0x126),_0x3ce700(0x149),_0x3ce700(0x17b),'__esModule',_0x3ce700(0x110),'avatar',_0x3ce700(0x147),_0x3ce700(0x102),_0x3ce700(0x16e),_0x3ce700(0x171),'Repository',_0x3ce700(0x127),_0x3ce700(0x174),_0x3ce700(0x190),_0x3ce700(0x125),_0x3ce700(0x192),'findOne',_0x3ce700(0x10b),'生成邀请码失败，请重新试一次吧！','HttpException',_0x3ce700(0x116),_0x3ce700(0x103),_0x3ce700(0x11d),'design:paramtypes','当前手机号已注册、请勿重复注册！','formatCreateOrUpdateDate',_0x3ce700(0x13d),_0x3ce700(0x170),'当前用户不存在！',_0x3ce700(0xf7),_0x3ce700(0x114),_0x3ce700(0x11c),_0x3ce700(0xfa),'该微信已绑定其他账号！',_0x3ce700(0x117),_0x3ce700(0xf8),'openId',_0x3ce700(0x13b),'password','__metadata',_0x3ce700(0x166),_0x3ce700(0x12b),_0x3ce700(0x1a5),_0x3ce700(0x12f),_0x3ce700(0x17d),_0x3ce700(0x115),'getUserById',_0x3ce700(0x145),_0x3ce700(0x10e),'maskIpAddress','BAD_REQUEST',_0x3ce700(0xfb),'Injectable',_0x3ce700(0x111),_0x3ce700(0x153),_0x3ce700(0x187),_0x3ce700(0x11a),_0x3ce700(0x136),_0x3ce700(0x18c),_0x3ce700(0x15e),_0x3ce700(0x123),_0x3ce700(0x130),_0x3ce700(0x18a),_0x3ce700(0x12e),_0x3ce700(0x12d),_0x3ce700(0x10c),_0x3ce700(0x158),_0x3ce700(0x167),_0x3ce700(0x13f),'$2y$','Like',_0x3ce700(0x177),_0x3ce700(0x179),_0x3ce700(0x120),'digest',_0x3ce700(0x15c),_0x3ce700(0x13c),_0x3ce700(0x131),_0x3ce700(0x144),_0x3ce700(0x12c),'qureyUserInfoByInviteCode',_0x3ce700(0xfd),'isBindWx','用户名已存在！'];return _0x38cf=function(){return _0xdee607;},_0x38cf();}let UserService=class UserService{constructor(_0x274d57,_0x2bec85,_0x56ad17,_0xf94442,_0x5586d4,_0x507b7f,_0x1971b1,_0x56487d){const _0x2b6117=_0x3fcc6f;this[_0x2b6117(0x10c)]=_0x274d57,this[_0x2b6117(0xe5)]=_0x2bec85,this[_0x2b6117(0x115)]=_0x56ad17,this[_0x2b6117(0xcf)]=_0xf94442,this[_0x2b6117(0x9b)]=_0x5586d4,this[_0x2b6117(0xcb)]=_0x507b7f,this[_0x2b6117(0x90)]=_0x1971b1,this[_0x2b6117(0xf6)]=_0x56487d;}async[_0x3fcc6f(0xbb)](_0x15e630,_0x3d6042){const _0x24e265=_0x16c15e,_0x16a6a6=_0x3fcc6f,{username:_0x5a37ed,email:_0x1bf90f,password:_0x541fae,invitedBy:_0x4b732d,client:client=0x0}=_0x15e630;if(_0x4b732d){const _0x42770d=await this[_0x24e265(0x117)][_0x16a6a6(0xfa)]({'where':{'inviteCode':_0x4b732d}});if(!_0x42770d)throw new common_1[(_0x16a6a6(0xfd))](_0x16a6a6(0x9c),common_1[_0x16a6a6(0xc9)][_0x16a6a6(0x11c)]);}const _0xf897f2=[{'username':_0x5a37ed},{'email':_0x1bf90f}],_0xcebc8d=await this[_0x16a6a6(0x10c)][_0x16a6a6(0xfa)]({'where':_0xf897f2});if(_0xcebc8d&&_0xcebc8d[_0x16a6a6(0xee)]!==user_constant_1[_0x16a6a6(0xa5)][_0x16a6a6(0xe6)])throw new common_1[(_0x24e265(0x19b))](_0x16a6a6(0xde),common_1[_0x16a6a6(0xc9)][_0x16a6a6(0x11c)]);try{const _0x3fac5c=_[_0x24e265(0x17c)](_0x15e630),_0x5d8a06=bcrypt[_0x16a6a6(0xb3)](_0x541fae,0xa),_0x5cb2e5=(0x0,utils_1[_0x16a6a6(0xdd)])(_0x3d6042);_0x3fac5c[_0x16a6a6(0x110)]=_0x5d8a06,_0x3fac5c[_0x16a6a6(0x9d)]=_0x5cb2e5,_0x3fac5c[_0x16a6a6(0x10f)]=client;let _0x4fc16c;if(!_0xcebc8d){const _0x5966b8=await this[_0x24e265(0x11e)][_0x16a6a6(0x99)]([_0x16a6a6(0x120)]);_0x3fac5c[_0x24e265(0x109)]=_0x5966b8,_0x4fc16c=await this['userEntity'][_0x16a6a6(0xd1)](_0x3fac5c);}else _0x4fc16c=_0xcebc8d;const _0xb531ef=await this[_0x24e265(0x174)][_0x16a6a6(0xeb)]({'where':{'configKey':(0x0,typeorm_2['In'])([_0x24e265(0x11a),_0x16a6a6(0x87),_0x16a6a6(0xe8),_0x16a6a6(0xc8),_0x24e265(0x132),_0x16a6a6(0x8d)])}}),_0x18988b=_0xb531ef[_0x24e265(0x133)]((_0x558b5a,_0x1e6f20)=>{const _0x4343a5=_0x16a6a6;return _0x558b5a[_0x1e6f20[_0x4343a5(0x11a)]]=_0x1e6f20[_0x4343a5(0xc7)],_0x558b5a;},{}),_0x11f4cc=_0x18988b[_0x24e265(0x11a)]?Number(_0x18988b[_0x16a6a6(0x122)]):0x1;if(_0x11f4cc){const _0x139890=_0x18988b[_0x16a6a6(0x8d)]?Number(_0x18988b[_0x16a6a6(0x8d)]):0x1e*0x3c,_0x4e12cf=await this[_0x16a6a6(0xcf)][_0x16a6a6(0x113)](_0x4fc16c,verification_constant_1[_0x16a6a6(0xf0)][_0x16a6a6(0xd7)],_0x139890),{code:_0x236976,email:_0xd6b50,id:_0x112c27}=_0x4e12cf,{registerVerifyEmailFrom:_0x408207}=_0x18988b;console[_0x16a6a6(0x12a)](_0x16a6a6(0xbe),_0x18988b);const _0x52a0b4=await this['mailerService'][_0x24e265(0x17e)]({'to':_0xd6b50,'subject':'来自'+_0x408207+_0x16a6a6(0xa9),'template':_0x16a6a6(0xf9),'context':Object[_0x16a6a6(0xdb)]({'baseUrl':_0x18988b[_0x16a6a6(0x87)],'code':_0x236976,'id':_0x112c27},_0x18988b)});console[_0x16a6a6(0x12a)](_0x16a6a6(0xb7),_0x52a0b4);}else{const {username:_0x37ef63,email:_0x55d196,id:_0x25eac7,invitedBy:_0x2302cb}=_0x4fc16c;await this[_0x16a6a6(0x8e)](_0x25eac7,user_constant_1[_0x24e265(0xf5)][_0x16a6a6(0x9e)]);let _0xc56b50;_0x2302cb&&(_0xc56b50=await this['qureyUserInfoByInviteCode'](_0x2302cb)),await this[_0x16a6a6(0xcb)][_0x16a6a6(0x114)](_0x25eac7,_0xc56b50===null||_0xc56b50===void 0x0?void 0x0:_0xc56b50['id']);}return _0x4fc16c;}catch(_0x146025){console[_0x16a6a6(0x12a)]('error:\x20',_0x146025);throw _0x146025;}}async[_0x3fcc6f(0xba)](){const _0x59c9d4=_0x16c15e,_0x1e8096=_0x3fcc6f,_0x430761=await this[_0x1e8096(0x10c)][_0x1e8096(0xfa)]({'where':{'role':_0x59c9d4(0x164)}});return _0x430761;}async[_0x3fcc6f(0xc3)](_0x58703d){const _0x2c2b74=_0x16c15e,_0x1cddaf=_0x3fcc6f,{username:_0x36497a,password:_0x2f917b,uid:uid=0x0,phone:_0x210703}=_0x58703d;let _0x22fe49=null;if(uid>0x0){_0x22fe49=await this[_0x2c2b74(0x117)][_0x1cddaf(0xfa)]({'where':{'id':uid}});if(!_0x22fe49)throw new common_1[(_0x2c2b74(0x19b))](_0x1cddaf(0xb1),common_1[_0x1cddaf(0xc9)][_0x1cddaf(0x11c)]);if(_0x22fe49[_0x1cddaf(0x110)][_0x1cddaf(0xdc)](_0x1cddaf(0x98))||_0x22fe49[_0x1cddaf(0x110)][_0x1cddaf(0xdc)](_0x1cddaf(0x125))||_0x22fe49[_0x1cddaf(0x110)][_0x1cddaf(0xdc)](_0x1cddaf(0x78))){if(!bcrypt[_0x2c2b74(0x12e)](_0x2f917b,_0x22fe49[_0x1cddaf(0x110)]))throw new common_1[(_0x1cddaf(0xfd))](_0x1cddaf(0xb9),common_1[_0x1cddaf(0xc9)][_0x1cddaf(0x11c)]);}else{console[_0x1cddaf(0x12a)](_0x1cddaf(0x81));const _0x396fb4=crypto[_0x1cddaf(0x88)](_0x1cddaf(0xb5))[_0x1cddaf(0x112)](_0x2f917b)[_0x1cddaf(0x7d)]('hex');console[_0x1cddaf(0x12a)](_0x1cddaf(0x81),_0x396fb4);if(_0x396fb4!==_0x22fe49[_0x1cddaf(0x110)])throw new common_1[(_0x1cddaf(0xfd))](_0x1cddaf(0xb9),common_1[_0x1cddaf(0xc9)][_0x1cddaf(0x11c)]);}}if(_0x36497a&&_0x2f917b){const _0x289a06=[{'username':_0x36497a},{'email':_0x36497a}];_0x22fe49=await this['userEntity'][_0x1cddaf(0xfa)]({'where':_0x289a06});if(!_0x22fe49)throw new common_1[(_0x1cddaf(0xfd))](_0x1cddaf(0xb1),common_1[_0x1cddaf(0xc9)][_0x2c2b74(0x17f)]);if(_0x22fe49[_0x1cddaf(0x110)][_0x2c2b74(0x1a3)](_0x1cddaf(0x98))||_0x22fe49[_0x2c2b74(0x16d)][_0x1cddaf(0xdc)](_0x1cddaf(0x125))||_0x22fe49[_0x2c2b74(0x16d)][_0x1cddaf(0xdc)](_0x2c2b74(0x1a0))){if(!bcrypt[_0x1cddaf(0x129)](_0x2f917b,_0x22fe49[_0x1cddaf(0x110)]))throw new common_1['HttpException'](_0x1cddaf(0xb9),common_1[_0x2c2b74(0x17a)][_0x1cddaf(0x11c)]);}else{console[_0x1cddaf(0x12a)](_0x1cddaf(0x81));const _0x95fa61=crypto[_0x2c2b74(0x16b)](_0x1cddaf(0xb5))[_0x2c2b74(0x166)](_0x2f917b)[_0x1cddaf(0x7d)](_0x1cddaf(0xa1));console[_0x2c2b74(0x12d)](_0x1cddaf(0x81),_0x95fa61);if(_0x95fa61!==_0x22fe49[_0x2c2b74(0x16d)])throw new common_1[(_0x2c2b74(0x19b))](_0x1cddaf(0xb9),common_1[_0x1cddaf(0xc9)][_0x2c2b74(0x17f)]);}}if(_0x210703&&_0x2f917b){const _0x5c7e83=[{'phone':_0x210703}];_0x22fe49=await this['userEntity'][_0x1cddaf(0xfa)]({'where':_0x5c7e83});if(!_0x22fe49)throw new common_1[(_0x1cddaf(0xfd))](_0x2c2b74(0xfe),common_1[_0x1cddaf(0xc9)][_0x1cddaf(0x11c)]);if(_0x22fe49[_0x1cddaf(0x110)][_0x1cddaf(0xdc)](_0x1cddaf(0x98))||_0x22fe49[_0x1cddaf(0x110)][_0x2c2b74(0x1a3)](_0x1cddaf(0x125))||_0x22fe49[_0x1cddaf(0x110)][_0x1cddaf(0xdc)](_0x1cddaf(0x78))){if(!bcrypt[_0x2c2b74(0x12e)](_0x2f917b,_0x22fe49[_0x1cddaf(0x110)]))throw new common_1[(_0x2c2b74(0x19b))](_0x1cddaf(0xb9),common_1[_0x1cddaf(0xc9)][_0x2c2b74(0x17f)]);}else{console['log'](_0x2c2b74(0x144));const _0xecf6a4=crypto[_0x2c2b74(0x16b)](_0x2c2b74(0x162))[_0x1cddaf(0x112)](_0x2f917b)[_0x2c2b74(0x1a1)]('hex');console[_0x1cddaf(0x12a)](_0x1cddaf(0x81),_0xecf6a4);if(_0xecf6a4!==_0x22fe49[_0x1cddaf(0x110)])throw new common_1[(_0x2c2b74(0x19b))](_0x1cddaf(0xb9),common_1[_0x1cddaf(0xc9)][_0x1cddaf(0x11c)]);}}if(!_0x22fe49)throw new common_1[(_0x1cddaf(0xfd))](_0x1cddaf(0xb1),common_1[_0x1cddaf(0xc9)][_0x1cddaf(0x11c)]);if(_0x22fe49[_0x1cddaf(0xee)]!==user_constant_1[_0x1cddaf(0xa5)][_0x1cddaf(0x9e)])throw new common_1[(_0x1cddaf(0xfd))](user_constant_1[_0x1cddaf(0x89)][_0x22fe49[_0x1cddaf(0xee)]],common_1[_0x2c2b74(0x17a)][_0x1cddaf(0x11c)]);return _0x22fe49;}async[_0x3fcc6f(0x116)](_0x2afcde,_0x223ad2){const _0x3ee4d9=_0x16c15e,_0x5e1ca4=_0x3fcc6f,_0x351c1f=await this[_0x5e1ca4(0x10c)][_0x3ee4d9(0x143)]({'where':{'id':_0x2afcde}});if(_0x351c1f[_0x5e1ca4(0x110)][_0x5e1ca4(0xdc)]('$2a$')||_0x351c1f[_0x5e1ca4(0x110)][_0x5e1ca4(0xdc)](_0x5e1ca4(0x125))||_0x351c1f[_0x5e1ca4(0x110)][_0x5e1ca4(0xdc)](_0x5e1ca4(0x78)))return bcrypt[_0x5e1ca4(0x129)](_0x223ad2,_0x351c1f['password']);else{const _0x5c910b=crypto[_0x5e1ca4(0x88)](_0x5e1ca4(0xb5))[_0x3ee4d9(0x166)](_0x223ad2)['digest'](_0x5e1ca4(0xa1));return console[_0x5e1ca4(0x12a)](_0x5e1ca4(0x81),_0x5c910b),_0x5c910b===_0x351c1f[_0x3ee4d9(0x16d)];}}async[_0x16c15e(0x195)](_0x17bcc0,_0x436b82){const _0x392c3d=_0x16c15e,_0x3e4a39=_0x3fcc6f,_0x4149ad=await this[_0x392c3d(0x117)][_0x3e4a39(0x112)]({'id':_0x17bcc0},{'status':_0x436b82});return _0x4149ad[_0x3e4a39(0xbc)]>0x0;}async[_0x3fcc6f(0xae)](_0x45c0c5){const _0xe20f2f=_0x16c15e,_0x1b708b=_0x3fcc6f,_0x1c305c=await this[_0x1b708b(0x10c)][_0x1b708b(0xfa)]({'where':{'id':_0x45c0c5}});return _0x1c305c[_0xe20f2f(0x110)];}async[_0x3fcc6f(0x80)](_0xfa3e2b){const _0x287553=_0x3fcc6f;return await this[_0x287553(0x10c)][_0x287553(0xfa)]({'where':{'id':_0xfa3e2b}});}async[_0x3fcc6f(0x9f)](_0x4f70a6){const _0x4e31cf=_0x3fcc6f;return await this[_0x4e31cf(0x10c)][_0x4e31cf(0xfa)]({'where':{'id':_0x4f70a6}});}async[_0x16c15e(0x14e)](_0x156ffb){const _0x18bc5c=_0x16c15e,_0x1e09d=_0x3fcc6f,{id:_0x4af8e1,role:_0x539468}=_0x156ffb;if(_0x539468===_0x1e09d(0xc4))return!![];const _0x3f2580=await this[_0x18bc5c(0x117)][_0x1e09d(0xfa)]({'where':{'id':_0x4af8e1}});if(!_0x3f2580)throw new common_1[(_0x1e09d(0xfd))](_0x18bc5c(0x12c),common_1[_0x1e09d(0xc9)][_0x1e09d(0xd8)]);if(_0x3f2580[_0x1e09d(0xee)]===user_constant_1[_0x1e09d(0xa5)][_0x1e09d(0xe4)])throw new common_1[(_0x1e09d(0xfd))](_0x1e09d(0x108),common_1[_0x1e09d(0xc9)][_0x1e09d(0x11c)]);if(_0x3f2580[_0x18bc5c(0x110)]===user_constant_1[_0x1e09d(0xa5)][_0x18bc5c(0x119)])throw new common_1[(_0x1e09d(0xfd))](_0x1e09d(0x7e),common_1[_0x1e09d(0xc9)][_0x1e09d(0x11c)]);}async['getUserInfo'](_0x57f7d6){const _0x3ef34d=_0x16c15e,_0x116a7b=_0x3fcc6f,_0x20cf67=await this[_0x116a7b(0x10c)][_0x116a7b(0xfa)]({'where':{'id':_0x57f7d6},'select':[_0x116a7b(0xe3),_0x116a7b(0xef),_0x116a7b(0x119),_0x116a7b(0x8b),_0x116a7b(0xdf),_0x116a7b(0x105),_0x116a7b(0x10e),_0x116a7b(0xa4)]});if(!_0x20cf67)throw new common_1[(_0x116a7b(0xfd))](_0x116a7b(0x82),common_1[_0x116a7b(0xc9)][_0x116a7b(0xd8)]);_0x20cf67[_0x116a7b(0x85)]=!!(_0x20cf67===null||_0x20cf67===void 0x0?void 0x0:_0x20cf67[_0x116a7b(0x10e)]),delete _0x20cf67['openId'];const _0x2338c8=await this[_0x116a7b(0xcb)][_0x116a7b(0xd6)](_0x57f7d6);return{'userInfo':_0x20cf67,'userBalance':Object[_0x3ef34d(0x196)]({},_0x2338c8)};}async[_0x3fcc6f(0x118)](_0x54fce6){const _0x175c68=_0x3fcc6f;return await this[_0x175c68(0x10c)][_0x175c68(0xfa)]({'where':{'id':_0x54fce6}});}async[_0x3fcc6f(0xea)](_0x4b5e30){const _0x1d662b=_0x3fcc6f;return await this[_0x1d662b(0x10c)][_0x1d662b(0xfa)]({'where':{'openId':_0x4b5e30}});}async[_0x16c15e(0x10a)](_0x67396,_0x4b4902){const _0x7e16f8=_0x16c15e,_0x472891=_0x3fcc6f,{id:_0x5896bd}=_0x4b4902[_0x472891(0x11f)],_0x24d4b7=await this[_0x472891(0x10c)][_0x472891(0xfa)]({'where':{'id':_0x5896bd}});if(!_0x24d4b7)throw new common_1[(_0x472891(0xfd))](_0x472891(0x106),common_1[_0x472891(0xc9)][_0x7e16f8(0x17f)]);if(_0x67396[_0x472891(0xe3)]&&_0x24d4b7[_0x472891(0xe3)]===_0x67396['username'])throw new common_1[(_0x472891(0xfd))](_0x472891(0x8c),common_1[_0x472891(0xc9)][_0x7e16f8(0x17f)]);if(_0x67396[_0x472891(0xe3)]){const _0x774b64=await this['userEntity'][_0x472891(0xfa)]({'where':{'username':_0x67396[_0x7e16f8(0x137)],'id':(0x0,typeorm_2[_0x7e16f8(0x122)])(_0x5896bd)}});if(_0x774b64)throw new common_1[(_0x472891(0xfd))](_0x472891(0x86),common_1[_0x472891(0xc9)][_0x472891(0x11c)]);}const _0x46fca2=await this[_0x472891(0x10c)][_0x7e16f8(0x166)]({'id':_0x5896bd},_0x67396);if(_0x46fca2[_0x472891(0xbc)]<=0x0)throw new common_1[(_0x472891(0xfd))](_0x7e16f8(0x198),common_1['HttpStatus'][_0x7e16f8(0x17f)]);return _0x472891(0x7c);}async[_0x3fcc6f(0xec)](_0x5821f7,_0x21a6d0){const _0x50e7f7=_0x16c15e,_0x1d5b4a=_0x3fcc6f,_0x48ba14=bcrypt[_0x1d5b4a(0xb3)](_0x21a6d0,0xa),_0x1218f1=await this[_0x1d5b4a(0x10c)][_0x1d5b4a(0x112)]({'id':_0x5821f7},{'password':_0x48ba14});if(_0x1218f1[_0x1d5b4a(0xbc)]<=0x0)throw new common_1[(_0x1d5b4a(0xfd))](_0x50e7f7(0xf6),common_1[_0x1d5b4a(0xc9)]['BAD_REQUEST']);}async[_0x16c15e(0x16a)](_0x4838b8){const _0x29587e=_0x16c15e,_0x200e02=_0x3fcc6f,{id:_0x59e764}=_0x4838b8[_0x200e02(0x11f)],_0x232b42=await this[_0x200e02(0x10c)][_0x200e02(0xfa)]({'where':{'id':_0x59e764}});if(!_0x232b42||_0x232b42[_0x200e02(0x105)])throw new common_1[(_0x200e02(0xfd))](_0x200e02(0xb0),common_1['HttpStatus']['BAD_REQUEST']);const _0x5868af=(0x0,utils_1[_0x200e02(0xe9)])(),_0x2675af=await this[_0x200e02(0x10c)][_0x29587e(0x143)]({'where':{'inviteCode':_0x5868af}});if(_0x2675af)throw new common_1[(_0x200e02(0xfd))](_0x200e02(0xfc),common_1[_0x200e02(0xc9)][_0x29587e(0x17f)]);const _0x1678a5=await this[_0x200e02(0x10c)][_0x200e02(0x112)]({'id':_0x59e764},{'inviteCode':_0x5868af});if(_0x1678a5[_0x200e02(0xbc)]<=0x0)throw new common_1[(_0x29587e(0x19b))](_0x200e02(0xfc),common_1[_0x29587e(0x17a)][_0x200e02(0x11c)]);return _0x5868af;}async[_0x3fcc6f(0x95)](_0xf7d4cf,_0x7050e3){const _0x4acf4a=_0x16c15e,_0x27f86a=_0x3fcc6f;try{const {id:_0x2ea2f4}=_0xf7d4cf[_0x27f86a(0x11f)],{page:page=0x1,size:size=0xa}=_0x7050e3,_0x129446=await this[_0x27f86a(0x10c)][_0x27f86a(0xfa)]({'where':{'id':_0x2ea2f4}}),{inviteCode:_0x50ef90}=_0x129446;if(!_0x50ef90)return[];const [_0x5a37c7,_0x4baca4]=await this[_0x27f86a(0x10c)][_0x27f86a(0xce)]({'where':{'inviteCode':_0x50ef90},'order':{'id':_0x27f86a(0xb4)},'select':[_0x27f86a(0xe3),_0x27f86a(0x8b),_0x27f86a(0x124),_0x4acf4a(0x110),_0x4acf4a(0x109)],'take':size,'skip':(page-0x1)*size});return(0x0,utils_1[_0x27f86a(0x103)])(_0x5a37c7)[_0x4acf4a(0x171)](_0x56853d=>{const _0x44c939=_0x27f86a;return _0x56853d[_0x44c939(0x8b)]=(0x0,utils_1[_0x44c939(0x93)])(_0x56853d[_0x44c939(0x8b)]),_0x56853d;}),{'rows':_0x5a37c7,'count':_0x4baca4};}catch(_0x55f430){console[_0x27f86a(0x12a)](_0x27f86a(0xe7),_0x55f430);throw new common_1[(_0x27f86a(0xfd))](_0x27f86a(0xd5),common_1[_0x27f86a(0xc9)][_0x27f86a(0x11c)]);}}async[_0x3fcc6f(0xda)](_0x1db41e){const _0x39afb2=_0x16c15e,_0x4f006=_0x3fcc6f,_0x994c0b=await this[_0x4f006(0x10c)][_0x39afb2(0x143)]({'where':{'inviteCode':_0x1db41e}});if(!_0x994c0b)return 0x1;const {inviteLinkCount:inviteLinkCount=0x0}=_0x994c0b,_0x1cfcef=await this[_0x4f006(0x10c)][_0x4f006(0x112)]({'inviteCode':_0x1db41e},{'inviteLinkCount':inviteLinkCount+0x1});return _0x1cfcef[_0x39afb2(0x152)]?0x1:0x0;}async[_0x3fcc6f(0x83)](_0x21d06b){const _0xd53bb=_0x3fcc6f;return await this[_0xd53bb(0x10c)][_0xd53bb(0xfa)]({'where':{'inviteCode':_0x21d06b}});}async[_0x3fcc6f(0x123)](_0x5b4a52){const _0x5d542f=_0x3fcc6f,{userId:_0x37fef9,model3Count:model3Count=0x0,model4Count:model4Count=0x0,drawMjCount:drawMjCount=0x0}=_0x5b4a52;await this[_0x5d542f(0xcb)][_0x5d542f(0xa8)](_0x37fef9,{'model3Count':model3Count,'model4Count':model4Count,'drawMjCount':drawMjCount});const _0x107a6d=await this[_0x5d542f(0xcb)][_0x5d542f(0xbd)]({'userId':_0x37fef9,'rechargeType':balance_constant_1['RechargeType'][_0x5d542f(0xa3)],'model3Count':model3Count,'model4Count':model4Count,'drawMjCount':drawMjCount,'extent':''});return _0x107a6d;}async[_0x3fcc6f(0x128)](_0x5320b6,_0x4c9cd9){const _0x5b897c=_0x16c15e,_0x2d5979=_0x3fcc6f,{page:page=0x1,size:size=0xa,username:_0x21cd39,email:_0x3bb411,status:_0x2ee58b,keyword:_0x2fa2ea,phone:_0x3e058b}=_0x5320b6;let _0x359461={};_0x21cd39&&Object[_0x5b897c(0x196)](_0x359461,{'username':(0x0,typeorm_2[_0x2d5979(0x79)])('%'+_0x21cd39+'%')}),_0x3bb411&&Object[_0x2d5979(0xdb)](_0x359461,{'email':(0x0,typeorm_2[_0x2d5979(0x79)])('%'+_0x3bb411+'%')}),_0x3e058b&&Object[_0x5b897c(0x196)](_0x359461,{'phone':(0x0,typeorm_2[_0x2d5979(0x79)])('%'+_0x3e058b+'%')}),_0x2ee58b&&Object[_0x2d5979(0xdb)](_0x359461,{'status':_0x2ee58b}),_0x2fa2ea&&(_0x359461=[{'username':(0x0,typeorm_2[_0x2d5979(0x79)])('%'+_0x2fa2ea+'%')},{'email':(0x0,typeorm_2['Like'])('%'+_0x2fa2ea+'%')},{'phone':(0x0,typeorm_2[_0x2d5979(0x79)])('%'+_0x2fa2ea+'%')}]);const [_0xa7de39,_0x4a0216]=await this[_0x2d5979(0x10c)][_0x2d5979(0xce)]({'skip':(page-0x1)*size,'where':_0x359461,'take':size,'order':{'createdAt':_0x2d5979(0xb4)},'cache':!![],'select':[_0x2d5979(0xe3),_0x2d5979(0xef),_0x5b897c(0x170),_0x2d5979(0x119),_0x2d5979(0xdf),_0x2d5979(0xee),'id',_0x2d5979(0x8b),_0x2d5979(0x124),_0x2d5979(0x117),_0x2d5979(0x10a)]}),_0x5bbdf3=_0xa7de39[_0x2d5979(0xf3)](_0x2c1793=>_0x2c1793['id']),_0x1de3ca=await this[_0x2d5979(0xcb)][_0x2d5979(0xb6)](_0x5bbdf3);return _0xa7de39[_0x2d5979(0xa7)](_0x4402e=>_0x4402e[_0x2d5979(0xd9)]=_0x1de3ca[_0x2d5979(0xeb)](_0x9d878f=>_0x9d878f[_0x2d5979(0x107)]===_0x4402e['id'])),_0x4c9cd9[_0x2d5979(0x11f)][_0x2d5979(0x119)]!==_0x2d5979(0x91)&&_0xa7de39[_0x5b897c(0x134)](_0x3fe5fa=>_0x3fe5fa[_0x2d5979(0x8b)]=(0x0,utils_1[_0x2d5979(0x93)])(_0x3fe5fa[_0x2d5979(0x8b)])),_0x4c9cd9['user'][_0x2d5979(0x119)]!==_0x2d5979(0x91)&&_0xa7de39[_0x5b897c(0x134)](_0x514061=>_0x514061[_0x5b897c(0x115)]=(0x0,utils_1[_0x2d5979(0x11b)])(_0x514061['lastLoginIp'])),_0x4c9cd9[_0x5b897c(0x111)][_0x2d5979(0x119)]!==_0x5b897c(0x164)&&_0xa7de39[_0x5b897c(0x134)](_0x461e7a=>_0x461e7a[_0x2d5979(0x10a)]=(0x0,utils_1[_0x5b897c(0x12a)])(_0x461e7a[_0x2d5979(0x10a)])),{'rows':_0xa7de39,'count':_0x4a0216};}async[_0x3fcc6f(0x126)]({id:_0x2e53cd}){const _0x597c00=_0x16c15e,_0x3e5aab=_0x3fcc6f;return await this[_0x3e5aab(0x10c)][_0x3e5aab(0xfa)]({'where':{'id':_0x2e53cd},'select':[_0x3e5aab(0xe3),_0x597c00(0x109),_0x3e5aab(0x105),_0x597c00(0x145),_0x3e5aab(0xdf),_0x3e5aab(0xee)]});}async[_0x3fcc6f(0xab)](_0x2ba78f){const _0x546276=_0x16c15e,_0x41b75f=_0x3fcc6f,{id:_0x49dd7f,status:_0x350c7f}=_0x2ba78f,_0x5512eb=await this[_0x41b75f(0x10c)][_0x546276(0x143)]({'where':{'id':_0x49dd7f}});if(!_0x5512eb)throw new common_1[(_0x546276(0x19b))](_0x41b75f(0x94),common_1[_0x41b75f(0xc9)]['BAD_REQUEST']);if(_0x5512eb[_0x41b75f(0x119)]===_0x41b75f(0x91))throw new common_1[(_0x41b75f(0xfd))](_0x546276(0x103),common_1[_0x41b75f(0xc9)][_0x41b75f(0x11c)]);if(_0x5512eb['status']===user_constant_1[_0x546276(0xf5)][_0x41b75f(0xe6)])throw new common_1[(_0x41b75f(0xfd))](_0x41b75f(0x84),common_1[_0x41b75f(0xc9)][_0x41b75f(0x11c)]);if(_0x5512eb[_0x546276(0x145)]===_0x546276(0x164))throw new common_1[(_0x41b75f(0xfd))](_0x41b75f(0xff),common_1[_0x41b75f(0xc9)][_0x41b75f(0x11c)]);if(_0x350c7f===user_constant_1[_0x41b75f(0xa5)][_0x41b75f(0xe6)])throw new common_1[(_0x546276(0x19b))]('不可将用户置为未激活状态！',common_1[_0x41b75f(0xc9)][_0x41b75f(0x11c)]);const _0x40d7df=await this[_0x41b75f(0x10c)][_0x41b75f(0x112)]({'id':_0x49dd7f},{'status':_0x350c7f});if(_0x40d7df[_0x41b75f(0xbc)]<=0x0)throw new common_1[(_0x41b75f(0xfd))](_0x41b75f(0xca),common_1[_0x41b75f(0xc9)][_0x41b75f(0x11c)]);return _0x41b75f(0x104);}async[_0x3fcc6f(0xac)](_0x19b20a){const _0x49b09c=_0x16c15e,_0xc3c2bd=_0x3fcc6f,{id:_0x81f319}=_0x19b20a,_0x33cf40=await this[_0xc3c2bd(0x10c)][_0x49b09c(0x143)]({'where':{'id':_0x81f319}});if(!_0x33cf40)throw new common_1[(_0xc3c2bd(0xfd))](_0xc3c2bd(0x94),common_1[_0x49b09c(0x17a)][_0xc3c2bd(0x11c)]);const _0x3a9f8b=_0x49b09c(0x1a6),_0x58f162=bcrypt[_0xc3c2bd(0xb3)](_0x3a9f8b,0xa),_0x1c9868=await this[_0xc3c2bd(0x10c)][_0xc3c2bd(0x112)]({'id':_0x81f319},{'password':_0x58f162});if(_0x1c9868[_0xc3c2bd(0xbc)]<=0x0)throw new common_1[(_0xc3c2bd(0xfd))](_0x49b09c(0x161),common_1[_0xc3c2bd(0xc9)][_0xc3c2bd(0x11c)]);return _0xc3c2bd(0xe2)+_0x3a9f8b+_0xc3c2bd(0x8a);}async['savaLoginIp'](_0x4c9579,_0x1fdc90){const _0x528d73=_0x16c15e,_0x1472e7=_0x3fcc6f;return await this[_0x1472e7(0x10c)][_0x528d73(0x166)]({'id':_0x4c9579},{'lastLoginIp':_0x1fdc90});}async[_0x3fcc6f(0xe1)](_0x42f717,_0x419462){const _0x13e39b=_0x16c15e,_0xb448fb=_0x3fcc6f,_0x7c7b87=await this[_0xb448fb(0x10c)][_0xb448fb(0xfa)]({'where':{'openId':_0x42f717}});if(!_0x7c7b87){const _0x2b14b4=_0x419462?_0x419462[_0xb448fb(0xf8)](':')[0x1]:'',_0x4bb450=await this[_0xb448fb(0x83)](_0x2b14b4),_0x2f9274=await this[_0x13e39b(0x13f)](_0x42f717,_0x2b14b4);return await this[_0xb448fb(0xcb)]['addBalanceToNewUser'](_0x2f9274['id'],_0x2b14b4?_0x4bb450===null||_0x4bb450===void 0x0?void 0x0:_0x4bb450['id']:null),_0x2f9274;}return _0x7c7b87;}async[_0x3fcc6f(0x77)](_0x186f8d,_0xbeeb3){const _0x16f61b=_0x3fcc6f,_0x33546e=await this[_0x16f61b(0x90)][_0x16f61b(0x99)]([_0x16f61b(0x120)]),_0x5ad30b={'avatar':_0x33546e,'username':'用户'+(0x0,utils_1[_0x16f61b(0x97)])(),'status':user_constant_1[_0x16f61b(0xa5)][_0x16f61b(0x9e)],'sex':0x0,'email':(0x0,utils_1[_0x16f61b(0x97)])()+_0x16f61b(0xaf),'invitedBy':_0xbeeb3,'openId':_0x186f8d},_0x13a30c=await this[_0x16f61b(0x10c)][_0x16f61b(0xd1)](_0x5ad30b);return _0x13a30c;}async['bindWx'](_0x44dffc,_0x209051){const _0x37b20b=_0x16c15e,_0x23e7cb=_0x3fcc6f;try{const _0x53ff09=await this[_0x23e7cb(0x10c)][_0x23e7cb(0xfa)]({'where':{'id':_0x209051}});if(!_0x53ff09)return{'status':![],'msg':_0x23e7cb(0xfe)};const _0x24a98d=await this[_0x23e7cb(0x10c)][_0x23e7cb(0xfa)]({'where':{'openId':_0x44dffc}});if(_0x24a98d)return{'status':![],'msg':_0x23e7cb(0x10b)};const _0x4e246d=await this[_0x23e7cb(0x10c)][_0x23e7cb(0x112)]({'id':_0x209051},{'openId':_0x44dffc});if(_0x4e246d[_0x23e7cb(0xbc)]<=0x0)return{'status':![],'msg':_0x23e7cb(0xc0)};return{'status':!![],'msg':_0x37b20b(0x14c)};}catch(_0xc493cf){return{'status':![],'msg':_0x23e7cb(0xc0)};}}async[_0x3fcc6f(0xaa)](_0x3378ee){const _0x5b797d=_0x16c15e,_0x284eda=_0x3fcc6f,_0x268665=await this[_0x284eda(0x10c)][_0x284eda(0xfa)]({'where':{'id':_0x3378ee}});return _0x268665===null||_0x268665===void 0x0?void 0x0:_0x268665[_0x5b797d(0x108)];}async['verifyUserRegisterByPhone'](_0x46cb3f){const _0x8d5a1a=_0x16c15e,_0x4c71fc=_0x3fcc6f,{username:_0x2d1358,password:_0x1f01a7,phone:_0x4b6c7f,phoneCode:_0x50d787}=_0x46cb3f,_0x52e5e7=await this[_0x4c71fc(0x10c)][_0x4c71fc(0xfa)]({'where':[{'username':_0x2d1358},{'phone':_0x4b6c7f}]});if(_0x52e5e7&&_0x52e5e7[_0x4c71fc(0xe3)]===_0x2d1358)throw new common_1[(_0x8d5a1a(0x19b))](_0x8d5a1a(0x188),common_1[_0x4c71fc(0xc9)][_0x4c71fc(0x11c)]);if(_0x52e5e7&&_0x52e5e7[_0x4c71fc(0x10a)]===_0x4b6c7f)throw new common_1[(_0x4c71fc(0xfd))](_0x4c71fc(0x102),common_1[_0x8d5a1a(0x17a)][_0x8d5a1a(0x17f)]);}async[_0x3fcc6f(0xf2)](_0x31ad3a){const _0x234a86=_0x3fcc6f;return await this[_0x234a86(0x10c)][_0x234a86(0xd1)](_0x31ad3a);}};UserService=__decorate([(0x0,common_1[_0x3fcc6f(0x11e)])(),__param(0x0,(0x0,typeorm_1[_0x3fcc6f(0xf1)])(user_entity_1[_0x3fcc6f(0xc5)])),__param(0x1,(0x0,typeorm_1[_0x3fcc6f(0xf1)])(whiteList_entity_1[_0x16c15e(0x135)])),__param(0x7,(0x0,typeorm_1[_0x3fcc6f(0xf1)])(config_entity_1[_0x3fcc6f(0x96)])),__metadata(_0x3fcc6f(0x101),[typeorm_2[_0x3fcc6f(0xf4)],typeorm_2['Repository'],typeorm_2[_0x3fcc6f(0xd3)],verification_service_1[_0x3fcc6f(0xd0)],mailer_1[_0x3fcc6f(0x109)],userBalance_service_1[_0x16c15e(0x15a)],globalConfig_service_1[_0x3fcc6f(0x10d)],typeorm_2[_0x3fcc6f(0xf4)]])],UserService),exports[_0x3fcc6f(0xad)]=UserService;