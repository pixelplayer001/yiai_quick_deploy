'use strict';const _0x4e2e7c=_0x2e57;(function(_0x1bcb67,_0x5e976e){const _0x47fe25=_0x2e57,_0x389fad=_0x1bcb67();while(!![]){try{const _0x29ef14=-parseInt(_0x47fe25(0x17b))/0x1+-parseInt(_0x47fe25(0x12b))/0x2+parseInt(_0x47fe25(0x16a))/0x3+-parseInt(_0x47fe25(0x197))/0x4+-parseInt(_0x47fe25(0x151))/0x5*(parseInt(_0x47fe25(0x182))/0x6)+parseInt(_0x47fe25(0x15a))/0x7+parseInt(_0x47fe25(0x165))/0x8;if(_0x29ef14===_0x5e976e)break;else _0x389fad['push'](_0x389fad['shift']());}catch(_0x2865fd){_0x389fad['push'](_0x389fad['shift']());}}}(_0x40af,0x9b323));const _0x5515ba=_0x2f46;(function(_0x1c20e1,_0x56b901){const _0x2078c0=_0x2e57,_0x405349=_0x2f46,_0x58a994=_0x1c20e1();while(!![]){try{const _0x235370=-parseInt(_0x405349(0x1fe))/0x1+-parseInt(_0x405349(0x241))/0x2+-parseInt(_0x405349(0x253))/0x3*(-parseInt(_0x405349(0x24e))/0x4)+parseInt(_0x405349(0x207))/0x5*(-parseInt(_0x405349(0x21d))/0x6)+-parseInt(_0x405349(0x250))/0x7+parseInt(_0x405349(0x224))/0x8+parseInt(_0x405349(0x239))/0x9;if(_0x235370===_0x56b901)break;else _0x58a994[_0x2078c0(0x128)](_0x58a994['shift']());}catch(_0x584901){_0x58a994[_0x2078c0(0x128)](_0x58a994[_0x2078c0(0x183)]());}}}(_0x15c5,0xcb68d));var __decorate=this&&this[_0x4e2e7c(0x192)]||function(_0xa14fcf,_0x585132,_0x5cfd3c,_0x39d6f0){const _0x4d8cb2=_0x2f46;var _0x33b7f3=arguments[_0x4d8cb2(0x20f)],_0x55d16f=_0x33b7f3<0x3?_0x585132:_0x39d6f0===null?_0x39d6f0=Object[_0x4d8cb2(0x1f9)](_0x585132,_0x5cfd3c):_0x39d6f0,_0x5dece2;if(typeof Reflect===_0x4d8cb2(0x23e)&&typeof Reflect[_0x4d8cb2(0x21e)]===_0x4d8cb2(0x231))_0x55d16f=Reflect[_0x4d8cb2(0x21e)](_0xa14fcf,_0x585132,_0x5cfd3c,_0x39d6f0);else{for(var _0x4f8ab8=_0xa14fcf[_0x4d8cb2(0x20f)]-0x1;_0x4f8ab8>=0x0;_0x4f8ab8--)if(_0x5dece2=_0xa14fcf[_0x4f8ab8])_0x55d16f=(_0x33b7f3<0x3?_0x5dece2(_0x55d16f):_0x33b7f3>0x3?_0x5dece2(_0x585132,_0x5cfd3c,_0x55d16f):_0x5dece2(_0x585132,_0x5cfd3c))||_0x55d16f;}return _0x33b7f3>0x3&&_0x55d16f&&Object[_0x4d8cb2(0x21a)](_0x585132,_0x5cfd3c,_0x55d16f),_0x55d16f;},__metadata=this&&this[_0x5515ba(0x249)]||function(_0x27896d,_0x387670){const _0x118623=_0x4e2e7c,_0x224157=_0x5515ba;if(typeof Reflect===_0x224157(0x23e)&&typeof Reflect[_0x224157(0x233)]===_0x118623(0x17e))return Reflect[_0x224157(0x233)](_0x27896d,_0x387670);};function _0x2f46(_0x30327a,_0xb0c07){const _0x5f160c=_0x15c5();return _0x2f46=function(_0x4bbfbb,_0x14cc6c){_0x4bbfbb=_0x4bbfbb-0x1ec;let _0x4ae335=_0x5f160c[_0x4bbfbb];return _0x4ae335;},_0x2f46(_0x30327a,_0xb0c07);}Object[_0x5515ba(0x21a)](exports,_0x5515ba(0x222),{'value':!![]}),exports[_0x4e2e7c(0x160)]=void 0x0;const chatgpt_service_1=require(_0x5515ba(0x20c)),globalConfig_service_1=require(_0x5515ba(0x221)),auth_service_1=require(_0x5515ba(0x202)),user_service_1=require(_0x4e2e7c(0x18a)),autoreply_service_1=require(_0x4e2e7c(0x171)),common_1=require(_0x5515ba(0x243)),crypto=require(_0x5515ba(0x22b)),axios_1=require(_0x5515ba(0x219)),utils_1=require(_0x5515ba(0x235));function _0x15c5(){const _0x499280=_0x4e2e7c,_0x4523b3=[_0x499280(0x14e),_0x499280(0x188),_0x499280(0x15f),_0x499280(0x164),_0x499280(0x194),'userService',_0x499280(0x175),'aotoPlay','authService',_0x499280(0x170),_0x499280(0x161),_0x499280(0x176),_0x499280(0x162),_0x499280(0x12a),_0x499280(0x156),_0x499280(0x134),_0x499280(0x18d),_0x499280(0x166),_0x499280(0x167),_0x499280(0x148),_0x499280(0x142),_0x499280(0x14b),'6459SQMqgf',_0x499280(0x12d),'getQRCodeTicket',_0x499280(0x13f),_0x499280(0x163),_0x499280(0x185),_0x499280(0x193),'&timestamp=',_0x499280(0x18b),_0x499280(0x16f),_0x499280(0x152),_0x499280(0x153),_0x499280(0x15d),_0x499280(0x178),_0x499280(0x195),_0x499280(0x131),_0x499280(0x184),'getOwnPropertyDescriptor',_0x499280(0x140),_0x499280(0x14f),'sha1','post',_0x499280(0x179),_0x499280(0x173),_0x499280(0x144),_0x499280(0x199),'../auth/auth.service',_0x499280(0x138),'globalConfigService','verify',_0x499280(0x129),_0x499280(0x146),_0x499280(0x130),'split',_0x499280(0x191),_0x499280(0x127),_0x499280(0x180),_0x499280(0x150),_0x499280(0x13e),'length',_0x499280(0x187),_0x499280(0x137),_0x499280(0x168),_0x499280(0x154),'OfficialService',_0x499280(0x139),_0x499280(0x135),_0x499280(0x14a),_0x499280(0x181),_0x499280(0x13b),_0x499280(0x189),_0x499280(0x141),_0x499280(0x17c),_0x499280(0x15b),_0x499280(0x16e),_0x499280(0x16c),_0x499280(0x145),_0x499280(0x143),_0x499280(0x155),_0x499280(0x149),_0x499280(0x17d),_0x499280(0x196),_0x499280(0x15c),_0x499280(0x132),_0x499280(0x12f),'chatgptService',_0x499280(0x18f),'crypto',_0x499280(0x14c),_0x499280(0x190),_0x499280(0x19b),_0x499280(0x12e),_0x499280(0x18c),_0x499280(0x17e),_0x499280(0x159),_0x499280(0x158),'AuthService',_0x499280(0x157),_0x499280(0x19a),_0x499280(0x147),_0x499280(0x172),_0x499280(0x13c),_0x499280(0x13d),'sort',_0x499280(0x198)];return _0x15c5=function(){return _0x4523b3;},_0x15c5();}let OfficialService=class OfficialService{constructor(_0x8dc582,_0x35f3fe,_0x60a3ad,_0x611352,_0x388dc4){const _0x43c476=_0x4e2e7c,_0x513e41=_0x5515ba;this[_0x43c476(0x170)]=_0x8dc582,this[_0x513e41(0x242)]=_0x35f3fe,this[_0x513e41(0x245)]=_0x60a3ad,this[_0x43c476(0x17f)]=_0x611352,this[_0x513e41(0x229)]=_0x388dc4,this[_0x43c476(0x18b)]={},this[_0x43c476(0x13f)]={};}async[_0x5515ba(0x24f)](){const _0x45406b=_0x5515ba;await this[_0x45406b(0x204)][_0x45406b(0x240)](!![]);}async[_0x5515ba(0x24b)](_0x5e2249){const _0x436867=_0x5515ba,{invitedBy:_0x3e4f24}=_0x5e2249;let _0x4632e2=(0x0,utils_1[_0x436867(0x1f7)])(0x20);return _0x3e4f24&&(_0x4632e2+=':'+_0x3e4f24),this[_0x436867(0x1f0)][_0x4632e2]=!![],_0x4632e2;}async[_0x5515ba(0x21c)](_0x5132d4){const _0x345763=_0x4e2e7c,_0xaa4f51=_0x5515ba,{id:_0x2b7bbc}=_0x5132d4[_0x345763(0x15e)],_0x10469a=(0x0,utils_1[_0xaa4f51(0x1f7)])(0x20)+'/'+_0x2b7bbc;return this[_0xaa4f51(0x1f0)][_0x10469a]=!![],_0x10469a;}async[_0x5515ba(0x255)](_0x40a4f7){const _0x42b983=_0x5515ba;return this[_0x42b983(0x24a)](_0x40a4f7);}async[_0x5515ba(0x21f)](_0x52d7c2){const _0x1d755f=_0x4e2e7c,_0x2c708e=_0x5515ba,_0x326ab1=await this[_0x2c708e(0x204)][_0x2c708e(0x1f3)]([_0x1d755f(0x18c)]),_0x559fed=_0x2c708e(0x22c)+_0x326ab1+_0x1d755f(0x177)+encodeURIComponent(_0x52d7c2)+'&response_type=code&scope=snsapi_base&state=weChatLogin#wechat_redirect';return console[_0x2c708e(0x1ed)](_0x2c708e(0x213),_0x559fed),_0x559fed;}async[_0x5515ba(0x1f8)](_0x195727){const _0x2d02ad=_0x4e2e7c,_0x50d30b=_0x5515ba,_0x2248c1=(0x0,utils_1[_0x50d30b(0x1f7)])(0x20),_0x32fb96=(Date[_0x50d30b(0x20a)]()/0x3e8)[_0x50d30b(0x21b)](0x0),_0x323d75=await this[_0x2d02ad(0x17f)][_0x2d02ad(0x153)]([_0x50d30b(0x228)]);console[_0x50d30b(0x1ed)](_0x50d30b(0x232),_0x323d75);const _0x55965a=await this[_0x50d30b(0x204)][_0x2d02ad(0x153)]([_0x2d02ad(0x18c)]);console[_0x50d30b(0x1ed)](_0x50d30b(0x22f),_0x55965a);const _0x34569d=_0x50d30b(0x1fa)+_0x323d75+_0x50d30b(0x22a)+_0x2248c1+_0x50d30b(0x1ef)+_0x32fb96+_0x50d30b(0x225)+_0x195727;console[_0x50d30b(0x1ed)](_0x2d02ad(0x13a),_0x34569d);const _0x44db43=this[_0x50d30b(0x1fc)](_0x34569d);return{'appId':_0x55965a,'nonceStr':_0x2248c1,'timestamp':_0x32fb96,'signature':_0x44db43};}async[_0x5515ba(0x24a)](_0x2b04fa){const _0x120981=_0x5515ba,_0x3f2395=await this[_0x120981(0x204)][_0x120981(0x1f3)]([_0x120981(0x208)]),_0xbf1822={'action_name':_0x120981(0x1f2),'action_info':{'scene':{'scene_str':_0x2b04fa}}},_0x30a20d=await axios_1[_0x120981(0x1fb)][_0x120981(0x1fd)](_0x120981(0x1f5)+_0x3f2395,_0xbf1822),{data:{errmsg:_0x26f972,ticket:_0x2f5786}}=_0x30a20d;if(_0x26f972)throw new common_1[(_0x120981(0x20b))](_0x26f972,common_1[_0x120981(0x247)][_0x120981(0x1f6)]);return _0x2f5786;}async[_0x5515ba(0x237)](_0x14b2ac,_0x140eef){const _0x3fffe8=_0x4e2e7c,_0x180ac3=_0x5515ba,_0x495a67=await this[_0x180ac3(0x204)][_0x180ac3(0x1f3)]([_0x180ac3(0x230)]),_0x4b6d0d=await this[_0x180ac3(0x204)][_0x180ac3(0x1f3)]([_0x180ac3(0x23a)]),_0x43e32f=await axios_1[_0x180ac3(0x1fb)][_0x180ac3(0x20e)](_0x3fffe8(0x16b)+_0x495a67+_0x180ac3(0x22e)+_0x4b6d0d+_0x180ac3(0x215)+_0x140eef+_0x180ac3(0x254)),{data:{errmsg:_0x3bdd51,openid:_0x33a9a2}}=_0x43e32f;if(_0x3bdd51)throw new common_1[(_0x180ac3(0x20b))](_0x3bdd51,common_1[_0x180ac3(0x247)][_0x3fffe8(0x195)]);let _0x2c33b5;return _0x2c33b5=await this[_0x180ac3(0x242)][_0x180ac3(0x203)](_0x33a9a2),!_0x2c33b5&&(_0x2c33b5=await this[_0x180ac3(0x242)][_0x180ac3(0x212)](_0x33a9a2)),this[_0x180ac3(0x245)][_0x180ac3(0x23f)](_0x2c33b5,_0x14b2ac);}async[_0x5515ba(0x227)](_0x45597d,_0x33ab78){const _0x2d4bf1=_0x4e2e7c,_0x361930=_0x5515ba;if(!this[_0x361930(0x1f0)][_0x33ab78])throw new common_1[(_0x361930(0x20b))](_0x2d4bf1(0x181),common_1[_0x361930(0x247)][_0x361930(0x1f6)]);const _0x1669d9=await this[_0x361930(0x242)][_0x361930(0x212)](_0x45597d,_0x33ab78);this[_0x361930(0x256)][_0x33ab78]=_0x1669d9['id'];}async[_0x5515ba(0x252)](_0x4aea91,_0x6b2ab4){const _0x5ef51e=_0x4e2e7c,_0x2bbc13=_0x5515ba;if(!this[_0x2bbc13(0x1f0)][_0x6b2ab4])return;const _0x4e7cba=this[_0x5ef51e(0x13f)][_0x6b2ab4];if(!_0x4e7cba)return'';const _0x5c545d=await this[_0x2bbc13(0x242)][_0x5ef51e(0x169)](_0x4e7cba);return delete this[_0x2bbc13(0x256)][_0x6b2ab4],this[_0x5ef51e(0x16d)][_0x2bbc13(0x23f)](_0x5c545d,_0x4aea91);}async[_0x5515ba(0x1ee)](_0x1aef29,_0x224eba){const _0x4df3a4=_0x4e2e7c,_0x3b59ce=_0x5515ba;if(!this[_0x4df3a4(0x18b)][_0x224eba])throw new common_1[(_0x3b59ce(0x20b))](_0x3b59ce(0x218),common_1[_0x3b59ce(0x247)][_0x3b59ce(0x1f6)]);const _0x3b8e00=_0x224eba[_0x3b59ce(0x209)]('/')[0x1],_0x50bd42=await this[_0x3b59ce(0x242)][_0x3b59ce(0x226)](_0x1aef29,_0x3b8e00);this[_0x3b59ce(0x256)][_0x224eba]=_0x50bd42;}async[_0x4e2e7c(0x133)](_0x3ae06b,_0x577086){const _0x4cfe06=_0x4e2e7c,_0xc1ff1c=_0x5515ba;if(!this['sceneStrMap'][_0x577086])throw new common_1[(_0x4cfe06(0x127))](_0x4cfe06(0x181),common_1[_0xc1ff1c(0x247)][_0xc1ff1c(0x1f6)]);const {id:_0x5411c7}=_0x3ae06b[_0x4cfe06(0x15e)],_0x55ac2e=this[_0xc1ff1c(0x256)][_0x577086];if(!_0x55ac2e)return'';return delete this[_0x4cfe06(0x13f)][_0x577086],_0x55ac2e;}async[_0x5515ba(0x205)](_0x1ecc84,_0x19aa57,_0x5de170){const _0x1daf5b=_0x4e2e7c,_0x4bf401=_0x5515ba,_0x53a77e=await this[_0x4bf401(0x204)]['getConfigs']([_0x4bf401(0x23d)])||_0x1daf5b(0x136);return await this[_0x4bf401(0x1fc)]([_0x53a77e,_0x19aa57,_0x5de170][_0x4bf401(0x23b)]()[_0x4bf401(0x216)](''))==_0x1ecc84;}[_0x5515ba(0x1fc)](_0x556237){const _0x18260e=_0x4e2e7c,_0x3523e1=_0x5515ba;return crypto[_0x3523e1(0x223)](_0x3523e1(0x1fc))[_0x18260e(0x186)](_0x556237)[_0x3523e1(0x236)](_0x18260e(0x174));}async[_0x5515ba(0x20d)](_0x3e095f,_0x20d471){const _0x1459d8=_0x4e2e7c,_0x444a4a=await this[_0x1459d8(0x17f)][_0x1459d8(0x153)]([_0x20d471]);return this[_0x1459d8(0x129)](_0x3e095f,_0x444a4a);}async[_0x5515ba(0x206)](_0x37454c,_0x3d0767){const _0x3bbf9c=_0x4e2e7c,_0x43fde5=_0x5515ba;return _0x43fde5(0x211)+_0x37454c[_0x3bbf9c(0x14d)][0x0]+_0x43fde5(0x22d)+_0x37454c[_0x43fde5(0x220)][0x0]+_0x43fde5(0x201)+new Date()[_0x43fde5(0x1f1)]()+_0x43fde5(0x24d)+_0x3d0767+_0x43fde5(0x23c);}async[_0x5515ba(0x244)](_0x7f2669){const _0x5275cc=_0x4e2e7c,_0x432ba7=_0x5515ba,_0x444e1e=new Promise((_0x4c8a74,_0x29b01a)=>{setTimeout(()=>{const _0x2f9b89=_0x2e57;_0x29b01a(new Error(_0x2f9b89(0x18e)));},0x12c0);});let _0x10f15='';try{console[_0x432ba7(0x1ed)](_0x5275cc(0x12c),_0x7f2669);const _0x2e3d68=await Promise['race']([this[_0x432ba7(0x229)][_0x432ba7(0x248)](_0x7f2669),_0x444e1e]);_0x10f15=_0x2e3d68||await this[_0x432ba7(0x246)][_0x432ba7(0x200)](_0x7f2669);}catch(_0x53c5e1){console['log'](_0x5275cc(0x17a)),_0x10f15=await this[_0x432ba7(0x204)][_0x432ba7(0x1f3)]([_0x432ba7(0x1ff)])||_0x432ba7(0x217);}return _0x10f15;}};OfficialService=__decorate([(0x0,common_1[_0x5515ba(0x238)])(),__metadata(_0x5515ba(0x251),[autoreply_service_1[_0x5515ba(0x24c)],user_service_1[_0x5515ba(0x1f4)],auth_service_1[_0x5515ba(0x234)],globalConfig_service_1[_0x5515ba(0x1ec)],chatgpt_service_1[_0x5515ba(0x210)]])],OfficialService),exports[_0x5515ba(0x214)]=OfficialService;function _0x2e57(_0x2a399b,_0x482381){const _0x40af3b=_0x40af();return _0x2e57=function(_0x2e57ae,_0x4bc292){_0x2e57ae=_0x2e57ae-0x127;let _0x43b3ac=_0x40af3b[_0x2e57ae];return _0x43b3ac;},_0x2e57(_0x2a399b,_0x482381);}function _0x40af(){const _0x59c631=['AutoreplyService','join','jiangly','\x0a\x20\x20\x20\x20<xml>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<ToUserName><![CDATA[','getUserOpenId','&code=','str:\x20','axios','40097637fiaKqW','wechatOfficialAppSecret','get','scanedSceneStrMap','jsapi_ticket=','toFixed','design:paramtypes','../globalConfig/globalConfig.service','checkAutoReply','tousername','25tKNbeT','loginByCode','7375382uiMZsQ','createHash','由于公众号的回复限制、过长的问题我们可能无法回复、您可以前往我们的官方站点享受更加完善的服务、如果您有更多问题、欢迎像我提问！','loginBySceneStr','https://open.weixin.qq.com/connect/oauth2/authorize?appid=','fromusername','wechatOfficialToken','default','genXmlMsgByConfig','372635ptfyFs','QR_STR_SCENE','getConfigs','回跳跳转地址:\x20','__esModule','getQRSceneStr','../../common/utils','metadata','jsapiTicket:\x20','6186250NiklnC','1704264RayIeu','bindWx','UserService','user','loginByOpenId','OfficialService','HttpStatus','__metadata','GlobalConfigService','getWechatAccessToken','1220936WcrDYf','268knMfTI','onModuleInit','getUserFromOpenId','getUserById','2729916iIkMUQ','https://api.weixin.qq.com/sns/oauth2/access_token?appid=','getRedirectUrl','authService','decorate','getTime','autoreplyService','../autoreply/autoreply.service','Injectable','officialAutoReplyText','hex','@nestjs/common','chatSyncFree','&redirect_uri=','https://api.weixin.qq.com/cgi-bin/qrcode/create?access_token=','1317039jtgPln','来自公众号的回复问题\x20=======>\x20超时导致问题无法回答完整','665099lTIEFv','getQRSceneStrByBind','2320344ylitkG','function','globalConfigService','../chatgpt/chatgpt.service','非法参数','30cUqTXc','shift','getJsapiTicket','log','update','ChatgptService','object','defineProperty','../user/user.service','sceneStrMap','wechatOfficialAppId','</CreateTime>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<MsgType><![CDATA[text]]></MsgType>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<Content><![CDATA[','请求超时','&noncestr=',']]></ToUserName>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<FromUserName><![CDATA[','now','__decorate','scanBindWx','531074rlCjNd','BAD_REQUEST','&url=','995000vWctIl',']]></Content>\x0a\x20\x20\x20\x20</xml>',']]></FromUserName>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<CreateTime>','digest','&secret=','HttpException','push','genXmlMsg','fetchQRCodeTicket','48344BpSZJn','来自公众号的询问问题\x20=======>\x20','&grant_type=authorization_code','appId:\x20','wechatJsapiTicket','wechatAccessToken','createRandomNonceStr','scan','bindWxBySceneStr'];_0x40af=function(){return _0x59c631;};return _0x40af();}