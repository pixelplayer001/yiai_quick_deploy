'use strict';const _0x559588=_0x4360;(function(_0x130a1a,_0x433686){const _0x4e190c=_0x4360,_0x4071ec=_0x130a1a();while(!![]){try{const _0x916b3=parseInt(_0x4e190c(0x231))/0x1*(parseInt(_0x4e190c(0x255))/0x2)+parseInt(_0x4e190c(0x238))/0x3*(parseInt(_0x4e190c(0x20c))/0x4)+parseInt(_0x4e190c(0x1da))/0x5+-parseInt(_0x4e190c(0x1c9))/0x6*(-parseInt(_0x4e190c(0x1d6))/0x7)+parseInt(_0x4e190c(0x222))/0x8*(-parseInt(_0x4e190c(0x1a3))/0x9)+-parseInt(_0x4e190c(0x25b))/0xa*(-parseInt(_0x4e190c(0x258))/0xb)+parseInt(_0x4e190c(0x208))/0xc*(-parseInt(_0x4e190c(0x19d))/0xd);if(_0x916b3===_0x433686)break;else _0x4071ec['push'](_0x4071ec['shift']());}catch(_0x19f1f4){_0x4071ec['push'](_0x4071ec['shift']());}}}(_0x1bcc,0xbe846));function _0xd338(){const _0x3a47f7=_0x4360,_0x4bced4=[_0x3a47f7(0x1dc),'qqNumber',_0x3a47f7(0x242),_0x3a47f7(0x21f),_0x3a47f7(0x1d7),_0x3a47f7(0x246),_0x3a47f7(0x1db),_0x3a47f7(0x1a7),_0x3a47f7(0x20f),_0x3a47f7(0x1d5),_0x3a47f7(0x1b1),_0x3a47f7(0x1ea),'noticeInfo',_0x3a47f7(0x1e3),_0x3a47f7(0x1a8),'queryGptKeys','firstRregisterSendModel4Count',_0x3a47f7(0x24f),_0x3a47f7(0x1b5),_0x3a47f7(0x256),_0x3a47f7(0x1f4),_0x3a47f7(0x252),_0x3a47f7(0x260),'getWechatAccessToken',_0x3a47f7(0x1c8),_0x3a47f7(0x210),'metadata',_0x3a47f7(0x19e),_0x3a47f7(0x243),_0x3a47f7(0x1f2),_0x3a47f7(0x220),_0x3a47f7(0x1d4),_0x3a47f7(0x240),_0x3a47f7(0x1f7),_0x3a47f7(0x204),'firstRegisterSendRank',_0x3a47f7(0x1fc),_0x3a47f7(0x237),'nineaiBuiltInSensitiveApiBase',_0x3a47f7(0x249),'invitedGuestSendModel4Count','configVal','package.json',_0x3a47f7(0x1f0),'initGetAllConfig',_0x3a47f7(0x1e5),'vxNumber',_0x3a47f7(0x1c6),'aliPhoneAccessKeyId',_0x3a47f7(0x1f9),_0x3a47f7(0x1b6),_0x3a47f7(0x1fb),_0x3a47f7(0x254),_0x3a47f7(0x253),'modelsService','tencent',_0x3a47f7(0x1bb),_0x3a47f7(0x262),'__metadata','wechatRegisterStatus',_0x3a47f7(0x1f6),'appMenuHeaderTips',_0x3a47f7(0x23b),_0x3a47f7(0x228),'nineaiBuiltInSensitiveAuthKey',_0x3a47f7(0x259),_0x3a47f7(0x229),_0x3a47f7(0x1b9),'payWeChatPrivateKey','@nestjs/typeorm',_0x3a47f7(0x1e6),_0x3a47f7(0x244),_0x3a47f7(0x217),_0x3a47f7(0x21e),_0x3a47f7(0x23d),_0x3a47f7(0x1a5),_0x3a47f7(0x203),_0x3a47f7(0x226),_0x3a47f7(0x1aa),_0x3a47f7(0x202),'response',_0x3a47f7(0x245),_0x3a47f7(0x22b),'baidu',_0x3a47f7(0x1ad),_0x3a47f7(0x1ee),_0x3a47f7(0x24e),_0x3a47f7(0x25f),_0x3a47f7(0x1ab),_0x3a47f7(0x21c),'payEpayApiPayUrl',_0x3a47f7(0x224),'length',_0x3a47f7(0x230),_0x3a47f7(0x25d),_0x3a47f7(0x22d),'clientFavoIconPath',_0x3a47f7(0x1af),_0x3a47f7(0x221),_0x3a47f7(0x1eb),_0x3a47f7(0x1f8),_0x3a47f7(0x22f),_0x3a47f7(0x1d9),'gpt',_0x3a47f7(0x1c7),'chatLogEntity',_0x3a47f7(0x1cf),_0x3a47f7(0x248),_0x3a47f7(0x1f1),'queryFrontConfig',_0x3a47f7(0x1cb),'aliPhoneSignName',_0x3a47f7(0x1c0),_0x3a47f7(0x22a),'8148dmixZk',_0x3a47f7(0x1b7),_0x3a47f7(0x23e),_0x3a47f7(0x1ff),_0x3a47f7(0x20e),_0x3a47f7(0x1bc),_0x3a47f7(0x1d3),'get',_0x3a47f7(0x1f5),_0x3a47f7(0x25a),'clientLogoPath',_0x3a47f7(0x1ed),_0x3a47f7(0x1b3),_0x3a47f7(0x1f3),_0x3a47f7(0x1e9),'salesAllowDrawMoney',_0x3a47f7(0x213),_0x3a47f7(0x232),_0x3a47f7(0x1a0),_0x3a47f7(0x239),_0x3a47f7(0x1e0),_0x3a47f7(0x25e),'252Bwewql',_0x3a47f7(0x212),_0x3a47f7(0x1cd),_0x3a47f7(0x22e),_0x3a47f7(0x1b8),_0x3a47f7(0x23a),'data',_0x3a47f7(0x1e8),_0x3a47f7(0x216),_0x3a47f7(0x257),_0x3a47f7(0x207),_0x3a47f7(0x23f),'invitedGuestSendModel3Count',_0x3a47f7(0x1e1),'&grant_type=client_credentials',_0x3a47f7(0x1b2),_0x3a47f7(0x1a1),'access_token',_0x3a47f7(0x1a9),'getNineAiToken',_0x3a47f7(0x214),_0x3a47f7(0x261),'请按要求填写正确的授权信息',_0x3a47f7(0x1d2),_0x3a47f7(0x1bd),_0x3a47f7(0x22c),_0x3a47f7(0x1be),_0x3a47f7(0x1ef),_0x3a47f7(0x1d0),_0x3a47f7(0x1e7),'设置完成！',_0x3a47f7(0x223),_0x3a47f7(0x24c),_0x3a47f7(0x20a),'payMpayStatus','firstRregisterSendDrawMjCount',_0x3a47f7(0x1a4),_0x3a47f7(0x236),_0x3a47f7(0x25c),_0x3a47f7(0x1ba),'signInStatus','缺失ip信息',_0x3a47f7(0x1d1),_0x3a47f7(0x1fa),_0x3a47f7(0x1d8),'filter',_0x3a47f7(0x1a2),_0x3a47f7(0x234),_0x3a47f7(0x21a),'NINEAI',_0x3a47f7(0x1de),_0x3a47f7(0x1ae),_0x3a47f7(0x1c4),_0x3a47f7(0x215),_0x3a47f7(0x24b),_0x3a47f7(0x1c1),_0x3a47f7(0x24a),_0x3a47f7(0x1cc),_0x3a47f7(0x19f),_0x3a47f7(0x247),_0x3a47f7(0x20d),_0x3a47f7(0x233),_0x3a47f7(0x1df),_0x3a47f7(0x20b),_0x3a47f7(0x241)];return _0xd338=function(){return _0x4bced4;},_0xd338();}const _0x132cc9=_0x2132;(function(_0x2b68b3,_0x9868d){const _0x5cfb78=_0x4360,_0x3f22cb=_0x2132,_0x519e18=_0x2b68b3();while(!![]){try{const _0x5eeba9=parseInt(_0x3f22cb(0x177))/0x1+parseInt(_0x3f22cb(0x1d8))/0x2+parseInt(_0x3f22cb(0x203))/0x3*(parseInt(_0x3f22cb(0x20a))/0x4)+parseInt(_0x3f22cb(0x1a0))/0x5+parseInt(_0x3f22cb(0x198))/0x6*(parseInt(_0x3f22cb(0x1ae))/0x7)+-parseInt(_0x3f22cb(0x167))/0x8+parseInt(_0x3f22cb(0x17a))/0x9*(-parseInt(_0x3f22cb(0x1cf))/0xa);if(_0x5eeba9===_0x9868d)break;else _0x519e18[_0x5cfb78(0x1ca)](_0x519e18[_0x5cfb78(0x1a6)]());}catch(_0x2fef52){_0x519e18[_0x5cfb78(0x1ca)](_0x519e18[_0x5cfb78(0x1a6)]());}}}(_0xd338,0x1ae48));var __decorate=this&&this[_0x132cc9(0x184)]||function(_0x55ce7d,_0x170521,_0x1da14e,_0x16c0c1){const _0x3b0573=_0x4360,_0x19a0da=_0x132cc9;var _0x33584c=arguments[_0x19a0da(0x182)],_0x30d3f7=_0x33584c<0x3?_0x170521:_0x16c0c1===null?_0x16c0c1=Object[_0x19a0da(0x1c5)](_0x170521,_0x1da14e):_0x16c0c1,_0x4bf86d;if(typeof Reflect===_0x19a0da(0x1c9)&&typeof Reflect[_0x19a0da(0x189)]===_0x19a0da(0x211))_0x30d3f7=Reflect[_0x19a0da(0x189)](_0x55ce7d,_0x170521,_0x1da14e,_0x16c0c1);else{for(var _0x5c1b0d=_0x55ce7d['length']-0x1;_0x5c1b0d>=0x0;_0x5c1b0d--)if(_0x4bf86d=_0x55ce7d[_0x5c1b0d])_0x30d3f7=(_0x33584c<0x3?_0x4bf86d(_0x30d3f7):_0x33584c>0x3?_0x4bf86d(_0x170521,_0x1da14e,_0x30d3f7):_0x4bf86d(_0x170521,_0x1da14e))||_0x30d3f7;}return _0x33584c>0x3&&_0x30d3f7&&Object[_0x3b0573(0x207)](_0x170521,_0x1da14e,_0x30d3f7),_0x30d3f7;},__metadata=this&&this[_0x132cc9(0x229)]||function(_0x206f36,_0x39319e){const _0xd6b90d=_0x4360,_0xcf6a96=_0x132cc9;if(typeof Reflect==='object'&&typeof Reflect[_0xcf6a96(0x209)]===_0xcf6a96(0x211))return Reflect[_0xd6b90d(0x1dd)](_0x206f36,_0x39319e);},__param=this&&this[_0x132cc9(0x1a9)]||function(_0x435db8,_0x303cd3){return function(_0x5bf41f,_0x34a54b){_0x303cd3(_0x5bf41f,_0x34a54b,_0x435db8);};};Object[_0x132cc9(0x1b8)](exports,_0x132cc9(0x1a8),{'value':!![]}),exports[_0x132cc9(0x1e0)]=void 0x0;function _0x2132(_0x48c9e2,_0x37b558){const _0x1b5961=_0xd338();return _0x2132=function(_0x599d94,_0x32a0e1){_0x599d94=_0x599d94-0x165;let _0x7d9d7d=_0x1b5961[_0x599d94];return _0x7d9d7d;},_0x2132(_0x48c9e2,_0x37b558);}function _0x1bcc(){const _0x1c8599=['payWeChatPublicKey','&client_secret=','1178512IoqUVh','baiduTextSecretKey','&secret=','getDiffArray','ISDEV','length','debug','https://api.jiangly.com/api/permission/auth','ali','siteRobotName','phoneRegisterStatus','phoneLoginStatus','setConfig','find','@nestjs/common','231503FaxhMl','__param','hupi','isShowAppCatIcon','invitedGuestSendDrawMjCount','fetchJsapiTicket','\x20current\x20use\x20version\x20in\x20------>:\x20','935835mDWNDT','error_description','getSignatureGiftConfig','map','获取微信access_token失败、错误信息：','filingNumber','salesBaseRatio','mjHideNotBlock','robotAvatar','getSensitiveConfig','chatGptKey','wechatAccessToken','inviteGiveSendModel4Count','166745JfgIoq','update','fetchBaseAccessToken','请配置正确的秘钥、当前秘钥检测不通过！','感谢您使用NineAi、祝您使用愉快~','Logger','queryConfig','signInModel4Count','configs','wechatOfficialAppId','clientHomePath','隐私内容、非超级管理员无权查看','操作完成！','payWechatStatus','mpay','epay','8ZWhnrB','isVerifyEmail','application/json','5236LZMYnN','587216uQeJea','请填写您的授权码','14350FsaUCG','hideString','__decorate','companyName','every','ModelsService','chatGptKey:','mjHideWorkIn','findOne','91thSnBj','292rYVjrA','env','payMpayChannel','wechat','aliPhoneAccessKeySecret','9zvqMeZ','wechatSilentLoginStatus','copyrightUrl','shift','queryPayType','configKey','globalConfigs','reduce','TRUE','openaiBaseUrl','531LEdHDa','configEntity','noticeTitle','firstRegisterSendStatus','user','../models/models.service','Status','getCopyright','isUseWxLogin','default','nineaiBuiltInSensitiveStatus','isAutoOpenNotice','&type=jsapi','delete','payHupiStatus','ConfigEntity','payEpayStatus','百度敏感词配置检测失败，您的参数可能配置的不正确!','wechat\x20refresh\x20access_token\x20\x20==>\x20','手机验证码功能暂未开放!','copyrightTitle','signInStatus','onModuleInit','emailRegisterStatus','utf-8','error:\x20','readFileSync','siteName','9246sPUBfD','push','./config.entity','queryNotice','baiduTextApiKey','registerSendModel3Count','save','../../common/utils','347416KoORoq','getOwnPropertyDescriptor','getPhoneVerifyConfig','OfficialService','HttpStatus','2471ysbuqm','buyCramiAddress','mjProxyImgUrl','includes','165755lOHAgC','error','log','metadata','GlobalConfigService','wechatJsapiTicket','createOrUpdate','getNamespace','getWechatAccessToken','cos','https://api.weixin.qq.com/cgi-bin/ticket/getticket?access_token=','wechatOfficialAppSecret','HttpException','还未配置微信的appId和secret、配置后才可进行微信扫码登录！！！','nineai','getAuthInfo','signInModel3Count','decorate','registerBaseUrl','assign','../chatLog/chatLog.entity','object','payEpayChannel','inviteGiveSendDrawMjCount','baiduCode','getConfigs','4041TVSRmp','58840HqtzPg','baiduTextStatus','domain','design:paramtypes','axios','Like','initBaiduSensitive','ticket','ChatLogEntity','mjProxy','registerSendStatus','baiduTextAccessToken','MjdrawCount','签到功能暂未开放!','支付功能暂未开放!','function','appMenuHeaderBgUrl','version','defineProperty','4831284ehfDAG','inviteSendStatus','53540JDKgfS','https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&appid=','20jHuhDY','salesSeniorRatio','queryAllConfig','signInMjDrawToken','BAD_REQUEST','Repository','Injectable','__esModule','InjectRepository','parse','百度敏感词初始化失败，如果需要敏感检测、请前往后台系统配置!','mindDefaultData','设置配置信息错误！','aliPhoneTemplateCode','super','configVal','forEach','post','setGptKeys','nineAiToken'];_0x1bcc=function(){return _0x1c8599;};return _0x1bcc();}const models_service_1=require(_0x132cc9(0x1bd)),chatLog_entity_1=require(_0x132cc9(0x17b)),common_1=require(_0x132cc9(0x183)),config_entity_1=require(_0x132cc9(0x194)),typeorm_1=require(_0x132cc9(0x16b)),typeorm_2=require('typeorm'),utils_1=require(_0x132cc9(0x1ca)),axios_1=require(_0x132cc9(0x220)),fs=require('fs'),packageJsonContent=fs[_0x132cc9(0x18e)](_0x132cc9(0x219),_0x559588(0x1c5)),packageJson=JSON[_0x132cc9(0x1e3)](packageJsonContent),version=packageJson[_0x559588(0x206)];console[_0x559588(0x1dc)](_0x132cc9(0x214),version);let GlobalConfigService=class GlobalConfigService{constructor(_0x35590d,_0x3489e7,_0x51d9fb){const _0x119e69=_0x559588,_0x1729b4=_0x132cc9;this[_0x1729b4(0x1e1)]=_0x35590d,this[_0x1729b4(0x18f)]=_0x3489e7,this[_0x1729b4(0x225)]=_0x51d9fb,this[_0x1729b4(0x1c0)]={},this[_0x119e69(0x21f)]=!![];}async[_0x559588(0x1c3)](){await this['initGetAllConfig']();}async[_0x132cc9(0x1a5)](_0x468e9e){const _0x417498=_0x559588,_0x5863a5=_0x132cc9;if(_0x468e9e[_0x5863a5(0x182)]===0x0)return;if(_0x468e9e['includes'](_0x5863a5(0x20b))&&_0x468e9e['length']===0x1)return this[_0x5863a5(0x20b)];if(_0x468e9e[_0x5863a5(0x18c)](_0x5863a5(0x1ec))&&_0x468e9e[_0x417498(0x227)]===0x1)return this[_0x417498(0x1df)];if(_0x468e9e[_0x5863a5(0x182)]===0x1)return this[_0x417498(0x1a9)][_0x468e9e[0x0]];else{const _0x37ef2b={};return _0x468e9e[_0x5863a5(0x17f)](_0x2838a4=>_0x37ef2b[_0x2838a4]=this[_0x5863a5(0x1c0)][_0x2838a4]),_0x37ef2b;}}async[_0x132cc9(0x21b)](){const _0x265585=_0x559588,_0x51bb55=_0x132cc9,_0x4e579e=await this[_0x265585(0x1ae)][_0x51bb55(0x18b)]();this[_0x51bb55(0x1c0)]=_0x4e579e[_0x51bb55(0x174)]((_0x2273f3,_0x4ecb81)=>{const _0x3f7fa6=_0x51bb55;return _0x2273f3[_0x4ecb81[_0x3f7fa6(0x1fd)]]=_0x4ecb81[_0x3f7fa6(0x218)],_0x2273f3;},{}),this[_0x265585(0x1fb)]();}async[_0x132cc9(0x222)](_0xf04fe5=!![]){const _0x6a27ac=_0x559588,_0x447393=_0x132cc9,{baiduTextApiKey:_0x465366,baiduTextSecretKey:_0x462242}=await this[_0x447393(0x1a5)]([_0x447393(0x1b0),'baiduTextSecretKey']);if(!_0x465366||!_0x462242){common_1[_0x447393(0x1e6)][_0x447393(0x1f5)](_0x447393(0x1b6),_0x447393(0x1e0));return;}const _0xb58247={'Content-Type':_0x6a27ac(0x257),'Accept':_0x447393(0x1b7)},_0x21a1a6='https://aip.baidubce.com/oauth/2.0/token?client_id='+_0x465366+_0x447393(0x188)+_0x462242+_0x447393(0x1bc);try{const _0x1cad5d=await axios_1[_0x447393(0x221)][_0x6a27ac(0x21d)](_0x21a1a6,{'headers':_0xb58247});this[_0x447393(0x1c0)][_0x6a27ac(0x200)]=_0x1cad5d['data'][_0x447393(0x1bf)];}catch(_0x439487){if(_0xf04fe5)common_1[_0x447393(0x1e6)][_0x447393(0x1f5)](_0x447393(0x1c8),_0x447393(0x1e0));else throw new common_1[(_0x447393(0x16c))](_0x439487[_0x447393(0x176)][_0x447393(0x1b4)][_0x447393(0x1ab)],common_1[_0x447393(0x1f8)][_0x447393(0x208)]);}}async[_0x559588(0x1e2)](_0x22fd87=![]){const _0x36e054=_0x559588,_0x419989=_0x132cc9,{wechatOfficialAppId:_0x47b051,wechatOfficialAppSecret:_0xd3a1e1}=await this[_0x419989(0x1a5)]([_0x419989(0x17c),_0x419989(0x21c)]);if(!_0x47b051||!_0xd3a1e1)return common_1[_0x419989(0x1e6)][_0x419989(0x1f5)](_0x419989(0x1cb),_0x36e054(0x1d4));this[_0x419989(0x20b)]=await this[_0x36e054(0x247)](_0x47b051,_0xd3a1e1,_0x22fd87),this[_0x419989(0x1ec)]=await this[_0x419989(0x1d3)](this[_0x36e054(0x243)]),common_1[_0x419989(0x1e6)][_0x419989(0x1ef)](_0x36e054(0x1bf)+this[_0x419989(0x20b)],_0x419989(0x20e));}async[_0x132cc9(0x1e9)](_0x2aa594,_0x283d27,_0x5066b8=![]){const _0x416a61=_0x559588,_0xae6dd=_0x132cc9;if(process[_0xae6dd(0x1e8)][_0x416a61(0x226)]===_0xae6dd(0x17e)){this[_0x416a61(0x243)]='';return;}const {data:{errmsg:_0x583015,access_token:_0x1e8028}}=await axios_1[_0xae6dd(0x221)]['get'](_0xae6dd(0x1ed)+_0x2aa594+_0xae6dd(0x181)+_0x283d27);if(_0x583015){if(_0x5066b8)common_1[_0x416a61(0x24a)][_0xae6dd(0x1f5)](_0x416a61(0x23c)+_0x583015,_0xae6dd(0x20e));else throw new common_1[(_0xae6dd(0x16c))](_0xae6dd(0x191),common_1['HttpStatus'][_0xae6dd(0x208)]);return'';}return _0x1e8028;}async[_0x132cc9(0x1d3)](_0xa2a418){const _0x1b07f4=_0x559588,_0x2a3d6d=_0x132cc9;var _0x5601b0;if(process[_0x2a3d6d(0x1e8)][_0x2a3d6d(0x173)]===_0x2a3d6d(0x17e)){this[_0x2a3d6d(0x1ec)]='';return;}const _0x16a995=await axios_1[_0x2a3d6d(0x221)][_0x2a3d6d(0x19f)](_0x1b07f4(0x1e4)+_0xa2a418+_0x2a3d6d(0x169));return(_0x5601b0=_0x16a995===null||_0x16a995===void 0x0?void 0x0:_0x16a995[_0x2a3d6d(0x1b4)])===null||_0x5601b0===void 0x0?void 0x0:_0x5601b0[_0x2a3d6d(0x213)];}async[_0x132cc9(0x19c)](_0x336dd9){const _0x4794a0=_0x132cc9,{role:_0x5c9de9}=_0x336dd9[_0x4794a0(0x1f9)];return this[_0x4794a0(0x1c0)];}async[_0x132cc9(0x193)](_0x48c75c,_0x4e786c){const _0x3c59cb=_0x559588,_0x95f733=_0x132cc9,_0x11d97d=[_0x95f733(0x21d),_0x95f733(0x19b),_0x3c59cb(0x1ce),'registerSendModel4Count','registerSendDrawMjCount',_0x3c59cb(0x1b0),_0x95f733(0x212),'firstRregisterSendModel3Count',_0x95f733(0x1ff),_0x95f733(0x1d1),_0x3c59cb(0x209),'inviteGiveSendModel3Count',_0x95f733(0x16d),_0x95f733(0x192),_0x95f733(0x1ba),_0x95f733(0x217),_0x3c59cb(0x235),_0x95f733(0x200),_0x95f733(0x1a2),_0x95f733(0x186),_0x95f733(0x201),_0x95f733(0x207),_0x95f733(0x20f),_0x95f733(0x178),_0x95f733(0x1f3),_0x95f733(0x16e),_0x95f733(0x20c),_0x95f733(0x21a),_0x95f733(0x1aa),_0x95f733(0x180),_0x95f733(0x1c6),_0x95f733(0x227),_0x95f733(0x204),_0x95f733(0x1d0),_0x95f733(0x1b2),_0x95f733(0x1dd),_0x95f733(0x19a),_0x95f733(0x1ea),_0x95f733(0x1a7),_0x95f733(0x1ad),_0x95f733(0x170),_0x95f733(0x1c7),_0x95f733(0x1e2),'emailLoginStatus',_0x95f733(0x185),_0x95f733(0x22a),_0x95f733(0x1d2),_0x3c59cb(0x1c2),_0x95f733(0x1fa),_0x95f733(0x1ce),_0x95f733(0x1f7),_0x95f733(0x22c),_0x3c59cb(0x205),'mjUseBaiduFy',_0x95f733(0x1b9),_0x95f733(0x228),_0x95f733(0x202)],_0xf87843=await this[_0x3c59cb(0x1ae)][_0x95f733(0x18b)]({'where':{'configKey':(0x0,typeorm_2['In'])(_0x11d97d)}}),{domain:_0x4afe73}=_0x48c75c,_0x5e41bf=this[_0x95f733(0x1c0)][_0x95f733(0x210)];_0x5e41bf!==_0x4afe73&&(this[_0x95f733(0x1ac)]({'configKey':_0x95f733(0x210),'configVal':_0x4afe73,'status':0x1}),await this[_0x95f733(0x21b)]());const _0x28876a=_0xf87843[_0x95f733(0x174)]((_0x392a9a,_0x2bac06)=>{const _0x1977a4=_0x3c59cb,_0x23e80b=_0x95f733;return _0x392a9a[_0x2bac06[_0x1977a4(0x1a8)]]=_0x2bac06[_0x23e80b(0x218)],_0x392a9a;},{}),{wechatOfficialAppId:_0x355a5c,wechatOfficialAppSecret:_0xcf0a80}=await this[_0x3c59cb(0x1f3)]([_0x95f733(0x17c),'wechatOfficialAppSecret']),_0x136892=!!(_0x355a5c&&_0xcf0a80);return Object[_0x95f733(0x1a3)](Object['assign']({},_0x28876a),{'isUseWxLogin':_0x136892});}async[_0x132cc9(0x1fe)](_0x47a2d8){const _0x4cf30a=_0x132cc9,{role:_0x2c31de}=_0x47a2d8[_0x4cf30a(0x1f9)],_0x3795ae=await this[_0x4cf30a(0x1e1)][_0x4cf30a(0x18b)]({'where':{'configKey':(0x0,typeorm_2[_0x4cf30a(0x1d9)])('%'+_0x4cf30a(0x1f1)+'%')}});if(_0x2c31de===_0x4cf30a(0x1de))return _0x3795ae;return _0x3795ae[_0x4cf30a(0x22d)](_0x4a7e14=>{const _0x44bf41=_0x4cf30a;return _0x4a7e14[_0x44bf41(0x218)]=(0x0,utils_1[_0x44bf41(0x1d4)])(_0x4a7e14[_0x44bf41(0x218)]),_0x4a7e14;});}async[_0x132cc9(0x16f)](_0x1aa93d){const _0x28c3da=_0x559588,_0x3b1787=_0x132cc9,_0x25e139=_0x1aa93d[_0x28c3da(0x24d)][_0x3b1787(0x1db)](_0x8f116c=>_0x8f116c[_0x3b1787(0x218)]),_0x13bec2=_0x25e139[_0x3b1787(0x22d)](_0x3e08d7=>_0x3e08d7[_0x3b1787(0x1fd)]);for(const [_0x4f95a5,_0x3bf862]of _0x25e139['entries']()){const {configKey:_0x3b76d3,configVal:_0x30c7e4,status:_0x2109a2}=_0x3bf862;await this['createOrUpdate']({'configKey':_0x3b1787(0x1c3)+(_0x4f95a5+0x1),'configVal':_0x30c7e4,'status':_0x2109a2});}const _0x18f860=await this[_0x3b1787(0x1e1)][_0x28c3da(0x22f)]({'where':{'configKey':(0x0,typeorm_2[_0x3b1787(0x1d9)])('%'+_0x3b1787(0x1f1)+'%')}}),_0x2b0388=_0x18f860[_0x3b1787(0x22d)](_0x3a78a1=>_0x3a78a1[_0x3b1787(0x1fd)]);if(_0x2b0388[_0x3b1787(0x182)]>_0x13bec2[_0x3b1787(0x182)]){const _0x56a1df=(0x0,utils_1[_0x28c3da(0x225)])(_0x2b0388[_0x3b1787(0x182)],_0x13bec2[_0x3b1787(0x182)],_0x3b1787(0x1c3));for(const _0x31d691 of _0x56a1df){await this[_0x28c3da(0x1ae)][_0x3b1787(0x1d5)]({'configKey':_0x31d691});}}return await this[_0x3b1787(0x21b)](),_0x28c3da(0x251);}async[_0x132cc9(0x1e4)](_0x58ae16,_0x8208e7){const _0x575faf=_0x559588,_0x2015d9=_0x132cc9,{role:_0x4d873d}=_0x8208e7[_0x575faf(0x1b1)],{keys:_0x260cce}=_0x58ae16,_0x574377=await this[_0x2015d9(0x1e1)][_0x2015d9(0x18b)]({'where':{'configKey':(0x0,typeorm_2['In'])(_0x260cce)}});return _0x4d873d!==_0x575faf(0x21a)&&_0x574377[_0x575faf(0x21c)](_0x496c8a=>{const _0x463c98=_0x575faf,_0x4b1dfc=_0x2015d9;if(_0x496c8a[_0x4b1dfc(0x1fd)][_0x4b1dfc(0x18c)]('mj')||_0x496c8a[_0x4b1dfc(0x1fd)][_0x463c98(0x1d9)]('Key')||_0x496c8a['configKey'][_0x4b1dfc(0x18c)](_0x4b1dfc(0x18d))||_0x496c8a[_0x4b1dfc(0x1fd)]['includes'](_0x4b1dfc(0x1fc))||_0x496c8a[_0x4b1dfc(0x1fd)][_0x4b1dfc(0x18c)](_0x4b1dfc(0x179))||_0x496c8a[_0x4b1dfc(0x1fd)][_0x4b1dfc(0x18c)](_0x4b1dfc(0x197))||_0x496c8a[_0x4b1dfc(0x1fd)][_0x4b1dfc(0x18c)](_0x4b1dfc(0x226))||_0x496c8a[_0x4b1dfc(0x1fd)][_0x4b1dfc(0x18c)]('pay')||_0x496c8a[_0x4b1dfc(0x1fd)][_0x4b1dfc(0x18c)](_0x4b1dfc(0x1be))||_0x496c8a[_0x4b1dfc(0x1fd)][_0x4b1dfc(0x18c)](_0x4b1dfc(0x1da))||_0x496c8a[_0x4b1dfc(0x1fd)]===_0x463c98(0x1ac)){const _0x48439d=[_0x4b1dfc(0x20d),_0x4b1dfc(0x16a)];if(_0x48439d[_0x463c98(0x1d9)](_0x496c8a[_0x463c98(0x1a8)]))return _0x496c8a[_0x463c98(0x21b)]=(0x0,utils_1[_0x4b1dfc(0x1d4)])(_0x496c8a[_0x463c98(0x21b)],_0x463c98(0x250));const _0x34135a=[_0x4b1dfc(0x1c6),_0x4b1dfc(0x227),_0x463c98(0x1fe)];!_0x34135a[_0x4b1dfc(0x18c)](_0x496c8a[_0x4b1dfc(0x1fd)])&&!_0x496c8a[_0x463c98(0x1a8)][_0x4b1dfc(0x18c)](_0x4b1dfc(0x1a4))&&(_0x496c8a[_0x4b1dfc(0x218)]=(0x0,utils_1['hideString'])(_0x496c8a[_0x463c98(0x21b)]));}}),_0x574377[_0x2015d9(0x174)]((_0x5d15ae,_0x4bff7c)=>{const _0x212c78=_0x2015d9;return _0x5d15ae[_0x4bff7c['configKey']]=_0x4bff7c[_0x212c78(0x218)],_0x5d15ae;},{});}[_0x132cc9(0x1c1)](){const _0x7987af=_0x559588,_0x4c6b46=_0x132cc9,_0x67a7b=this[_0x4c6b46(0x1c0)][_0x7987af(0x201)],_0x95d5f4=this[_0x4c6b46(0x1f2)];return!_0x95d5f4||Number(_0x67a7b)===0x1;}async[_0x132cc9(0x1b1)](_0x2f430c){const _0x4ee20d=_0x559588,_0x893b11=_0x132cc9;try{const {settings:_0x1562a2}=_0x2f430c;for(const _0x57915d of _0x1562a2){await this[_0x893b11(0x1ac)](_0x57915d);}await this[_0x893b11(0x21b)]();const _0x1be4e8=_0x1562a2[_0x893b11(0x22d)](_0x509da6=>_0x509da6[_0x893b11(0x1fd)]);return(_0x1be4e8[_0x893b11(0x18c)](_0x4ee20d(0x1cd))||_0x1be4e8[_0x4ee20d(0x1d9)](_0x893b11(0x1cd)))&&await this[_0x893b11(0x222)](![]),(_0x1be4e8[_0x893b11(0x18c)](_0x893b11(0x17c))||_0x1be4e8[_0x893b11(0x18c)](_0x893b11(0x21c)))&&await this[_0x893b11(0x206)](),_0x893b11(0x1cc);}catch(_0x21fe20){console[_0x893b11(0x1ef)](_0x893b11(0x21e),_0x21fe20);}}async[_0x132cc9(0x1ac)](_0x75ab56){const _0x3281ac=_0x559588,_0x265f55=_0x132cc9;try{const {configKey:_0x3774c,configVal:_0x5a70fb,status:status=0x1}=_0x75ab56,_0x55fad2=await this[_0x3281ac(0x1ae)][_0x3281ac(0x19c)]({'where':{'configKey':_0x3774c}});if(_0x55fad2){const _0x3c5935=await this[_0x265f55(0x1e1)][_0x265f55(0x1f4)]({'configKey':_0x3774c},{'configVal':_0x5a70fb,'status':status});}else{const _0xee875=await this[_0x265f55(0x1e1)][_0x265f55(0x190)]({'configKey':_0x3774c,'configVal':_0x5a70fb,'status':status});}}catch(_0x4977f6){console[_0x3281ac(0x1dc)](_0x265f55(0x21e),_0x4977f6);throw new common_1[(_0x3281ac(0x1e6))](_0x3281ac(0x218),common_1[_0x3281ac(0x1d5)][_0x265f55(0x208)]);}}async[_0x132cc9(0x1e7)](){const _0x45a23c=_0x132cc9;return await this[_0x45a23c(0x1a5)]([_0x45a23c(0x1fb),_0x45a23c(0x187)]);}async[_0x559588(0x1b4)](){const _0x2f9469=_0x132cc9;return await this[_0x2f9469(0x1a5)]([_0x2f9469(0x171),_0x2f9469(0x1e5)]);}async[_0x132cc9(0x1f6)](){const _0x27f90=_0x559588,_0x23c494=_0x132cc9,{payHupiStatus:payHupiStatus=0x0,payEpayStatus:payEpayStatus=0x0,payWechatStatus:payWechatStatus=0x0,payMpayStatus:payMpayStatus=0x0}=await this[_0x23c494(0x1a5)]([_0x23c494(0x227),_0x27f90(0x1bd),_0x23c494(0x1d0),_0x27f90(0x252)]);if([payHupiStatus,payEpayStatus,payWechatStatus,payMpayStatus][_0x23c494(0x17d)](_0xd480a1=>_0xd480a1===0x0))throw new common_1[(_0x27f90(0x1e6))](_0x23c494(0x172),common_1['HttpStatus'][_0x23c494(0x208)]);if(Number(payWechatStatus)===0x1)return'wechat';if(Number(payEpayStatus)===0x1)return _0x23c494(0x223);if(Number(payMpayStatus)===0x1)return _0x23c494(0x224);if(Number(payHupiStatus)===0x1)return _0x23c494(0x1eb);}async[_0x132cc9(0x1a6)](){const _0x44e42b=_0x559588,_0x9c98e=_0x132cc9,{siteName:_0x4650d7,qqNumber:_0x364af9,vxNumber:_0x2875b8,registerBaseUrl:_0x532b33,domain:_0x4cac59}=await this[_0x9c98e(0x1a5)]([_0x9c98e(0x207),_0x9c98e(0x1f0),_0x9c98e(0x21d),_0x44e42b(0x1ec),_0x9c98e(0x210)]);return{'siteName':_0x4650d7,'qqNumber':_0x364af9,'vxNumber':_0x2875b8,'registerBaseUrl':_0x532b33,'domain':_0x4cac59};}async[_0x132cc9(0x19e)](){const _0x40bafd=_0x559588,_0x385e1b=_0x132cc9,{phoneRegisterStatus:_0x5ce8f6,aliPhoneAccessKeyId:_0x1fb270,aliPhoneAccessKeySecret:_0xc00ad4,aliPhoneSignName:_0x50bdad,aliPhoneTemplateCode:_0x2cefde}=await this[_0x385e1b(0x1a5)]([_0x40bafd(0x22c),_0x385e1b(0x21f),_0x385e1b(0x1dc),_0x385e1b(0x195),_0x40bafd(0x219)]);if(Number(_0x5ce8f6)!==0x1)throw new common_1[(_0x40bafd(0x1e6))](_0x385e1b(0x196),common_1[_0x385e1b(0x1f8)][_0x40bafd(0x210)]);return{'accessKeyId':_0x1fb270,'accessKeySecret':_0xc00ad4,'SignName':_0x50bdad,'TemplateCode':_0x2cefde};}[_0x132cc9(0x1bb)](){const _0x4059e2=_0x559588,_0x2961e4=_0x132cc9;return process[_0x4059e2(0x19f)]['NAMESPACE']||_0x2961e4(0x1df);}async[_0x132cc9(0x1b3)](){const _0xf497c9=_0x559588,_0x4561cd=_0x132cc9,{signInStatus:signInStatus=0x0,signInModel3Count:signInModel3Count=0x0,signInModel4Count:signInModel4Count=0x0,signInMjDrawToken:signInMjDrawToken=0x0}=await this[_0x4561cd(0x1a5)]([_0x4561cd(0x1d6),_0x4561cd(0x1fa),_0x4561cd(0x1ce),_0x4561cd(0x1f7)]);if(Number(signInStatus)!==0x1)throw new common_1[(_0xf497c9(0x1e6))](_0x4561cd(0x175),common_1[_0x4561cd(0x1f8)][_0xf497c9(0x210)]);return{'model3Count':Number(signInModel3Count),'model4Count':Number(signInModel4Count),'drawMjCount':Number(signInMjDrawToken)};}async['auth'](){const _0x5a08b3=_0x559588,_0x308443=_0x132cc9,_0x2a1b85=_0x308443(0x168),_0x57024a=await fetch(_0x2a1b85,{}),_0x2cbe67=await _0x57024a['json'](),{success:success=!![],message:_0x48d9ce}=_0x2cbe67;common_1[_0x308443(0x1e6)][_0x308443(0x1f5)](_0x308443(0x1c4)),common_1[_0x308443(0x1e6)][_0x308443(0x1f5)](_0x308443(0x1a1)),common_1[_0x308443(0x1e6)][_0x308443(0x1f5)](_0x308443(0x1d7)),common_1[_0x308443(0x1e6)][_0x5a08b3(0x1db)](_0x308443(0x1d7)),common_1['Logger'][_0x308443(0x165)](_0x308443(0x216));}async[_0x132cc9(0x1ee)](){const _0x33719a=_0x559588,_0x3eec49=_0x132cc9,{baiduTextStatus:baiduTextStatus=0x0,baiduTextAccessToken:_0x39cdd0,nineaiBuiltInSensitiveStatus:nineaiBuiltInSensitiveStatus=0x0,nineaiBuiltInSensitiveApiBase:_0x2483bf,nineaiBuiltInSensitiveAuthKey:_0x361489}=await this[_0x3eec49(0x1a5)]([_0x3eec49(0x22b),_0x33719a(0x200),_0x3eec49(0x199),_0x3eec49(0x215),_0x3eec49(0x166)]);if(Number(baiduTextStatus)===0x1)return{'useType':_0x3eec49(0x179),'baiduTextAccessToken':_0x39cdd0};if(Number(nineaiBuiltInSensitiveStatus)===0x1)return{'useType':_0x3eec49(0x1b5),'nineaiBuiltInSensitiveApiBase':_0x2483bf,'nineaiBuiltInSensitiveAuthKey':_0x361489};return null;}};function _0x4360(_0xca272e,_0x1cd32d){const _0x1bcce0=_0x1bcc();return _0x4360=function(_0x4360ab,_0x159f6d){_0x4360ab=_0x4360ab-0x19c;let _0x1efb96=_0x1bcce0[_0x4360ab];return _0x1efb96;},_0x4360(_0xca272e,_0x1cd32d);}GlobalConfigService=__decorate([(0x0,common_1[_0x132cc9(0x1af)])(),__param(0x0,(0x0,typeorm_1[_0x132cc9(0x1c2)])(config_entity_1[_0x132cc9(0x19d)])),__param(0x1,(0x0,typeorm_1[_0x132cc9(0x1c2)])(chatLog_entity_1[_0x559588(0x1fd)])),__metadata(_0x132cc9(0x18a),[typeorm_2[_0x559588(0x211)],typeorm_2[_0x559588(0x211)],models_service_1[_0x132cc9(0x205)]])],GlobalConfigService),exports[_0x132cc9(0x1e0)]=GlobalConfigService;