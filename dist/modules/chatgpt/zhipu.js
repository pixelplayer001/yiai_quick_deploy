'use strict';(function(_0x63480d,_0x4ef096){const _0x79b7b0=_0xbc99,_0x4fa1de=_0x63480d();while(!![]){try{const _0x59251d=parseInt(_0x79b7b0(0xde))/0x1*(parseInt(_0x79b7b0(0xb5))/0x2)+parseInt(_0x79b7b0(0xb2))/0x3*(parseInt(_0x79b7b0(0xbc))/0x4)+parseInt(_0x79b7b0(0xd9))/0x5+parseInt(_0x79b7b0(0xd2))/0x6*(parseInt(_0x79b7b0(0xc3))/0x7)+parseInt(_0x79b7b0(0xb1))/0x8+parseInt(_0x79b7b0(0xd5))/0x9+-parseInt(_0x79b7b0(0xb0))/0xa;if(_0x59251d===_0x4ef096)break;else _0x4fa1de['push'](_0x4fa1de['shift']());}catch(_0x842af9){_0x4fa1de['push'](_0x4fa1de['shift']());}}}(_0x13c3,0xbb185));const _0x17fa4f=_0x428f;(function(_0x4fbc8f,_0x208014){const _0x431805=_0xbc99,_0x30489c=_0x428f,_0x5145f8=_0x4fbc8f();while(!![]){try{const _0x5c5c16=-parseInt(_0x30489c(0x147))/0x1*(parseInt(_0x30489c(0x130))/0x2)+-parseInt(_0x30489c(0x142))/0x3*(parseInt(_0x30489c(0x155))/0x4)+parseInt(_0x30489c(0x137))/0x5+-parseInt(_0x30489c(0x150))/0x6+parseInt(_0x30489c(0x13d))/0x7+-parseInt(_0x30489c(0x153))/0x8+-parseInt(_0x30489c(0x160))/0x9*(-parseInt(_0x30489c(0x139))/0xa);if(_0x5c5c16===_0x208014)break;else _0x5145f8[_0x431805(0xdd)](_0x5145f8['shift']());}catch(_0x3d5628){_0x5145f8[_0x431805(0xdd)](_0x5145f8['shift']());}}}(_0x2384,0xd486a));const _0x268e2e=_0x351d;function _0x351d(_0x12f406,_0x92b597){const _0x5766c8=_0x247a();return _0x351d=function(_0x4ada2b,_0x5da9c8){_0x4ada2b=_0x4ada2b-0x13a;let _0xf3c0ad=_0x5766c8[_0x4ada2b];return _0xf3c0ad;},_0x351d(_0x12f406,_0x92b597);}function _0x247a(){const _0x19d83e=_0xbc99,_0x36a1ef=_0x428f,_0x5741f4=[_0x36a1ef(0x13c),_0x36a1ef(0x136),_0x36a1ef(0x13b),_0x36a1ef(0x138),_0x36a1ef(0x15e),_0x36a1ef(0x13a),_0x36a1ef(0x140),_0x36a1ef(0x15b),_0x19d83e(0xbf),'SIGN',_0x19d83e(0xd3),_0x36a1ef(0x13f),_0x36a1ef(0x143),_0x36a1ef(0x135),'text',_0x36a1ef(0x132),_0x36a1ef(0x14d),_0x36a1ef(0x161),_0x36a1ef(0x141),_0x36a1ef(0x14e),_0x36a1ef(0x148),_0x19d83e(0xc7),_0x36a1ef(0x152),_0x36a1ef(0x159),_0x36a1ef(0x146),_0x36a1ef(0x144),_0x36a1ef(0x157),_0x36a1ef(0x14f),_0x36a1ef(0x145),_0x36a1ef(0x154),'filter',_0x36a1ef(0x15f),_0x36a1ef(0x14a),_0x19d83e(0xb8),_0x36a1ef(0x149),_0x36a1ef(0x156),_0x36a1ef(0x134),_0x36a1ef(0x151),_0x36a1ef(0x14b),_0x36a1ef(0x158),_0x19d83e(0xc9)];return _0x247a=function(){return _0x5741f4;},_0x247a();}(function(_0x2c8762,_0x2377c3){const _0x7446e1=_0xbc99,_0x26626f=_0x428f,_0x80589=_0x351d,_0x115c9=_0x2c8762();while(!![]){try{const _0xaead04=-parseInt(_0x80589(0x143))/0x1+-parseInt(_0x80589(0x14a))/0x2+parseInt(_0x80589(0x147))/0x3+-parseInt(_0x80589(0x14d))/0x4*(-parseInt(_0x80589(0x15e))/0x5)+parseInt(_0x80589(0x157))/0x6+parseInt(_0x80589(0x15d))/0x7*(parseInt(_0x80589(0x15c))/0x8)+parseInt(_0x80589(0x13a))/0x9*(-parseInt(_0x80589(0x144))/0xa);if(_0xaead04===_0x2377c3)break;else _0x115c9[_0x26626f(0x133)](_0x115c9[_0x26626f(0x15d)]());}catch(_0x4a4b82){_0x115c9[_0x7446e1(0xdd)](_0x115c9[_0x26626f(0x15d)]());}}}(_0x247a,0x9df77),(Object[_0x268e2e(0x158)](exports,'__esModule',{'value':!![]}),exports[_0x17fa4f(0x13e)]=exports[_0x268e2e(0x15f)]=exports[_0x17fa4f(0x13a)]=exports[_0x268e2e(0x13e)]=void 0x0));function _0xbc99(_0x56cf8e,_0x2f964d){const _0x13c3bc=_0x13c3();return _0xbc99=function(_0xbc998e,_0x656df9){_0xbc998e=_0xbc998e-0xab;let _0x3da03a=_0x13c3bc[_0xbc998e];return _0x3da03a;},_0xbc99(_0x56cf8e,_0x2f964d);}const axios=require('axios'),jwt=require(_0x268e2e(0x14c));function generateToken(_0x2d2ba7,_0x28f66e=0x3e8*0x3c*0x3c*0x18*0x168){const _0x2662f6=_0xbc99,_0x1af88c=_0x17fa4f,_0xacd68b=_0x268e2e,[_0x589067,_0x5340f6]=_0x2d2ba7[_0xacd68b(0x149)]('.'),_0x4c809f={'api_key':_0x589067,'exp':Math[_0x1af88c(0x15e)](Date[_0x2662f6(0xe0)]())+_0x28f66e*0x3e8,'timestamp':Math[_0xacd68b(0x14f)](Date[_0xacd68b(0x142)]())};return jwt[_0x2662f6(0xdf)](_0x4c809f,_0x5340f6,{'algorithm':_0xacd68b(0x141),'header':{'alg':_0xacd68b(0x141),'sign_type':_0xacd68b(0x154)}});}exports[_0x17fa4f(0x145)]=generateToken;function compilerMetaJsonStr(_0x41a803){const _0x5838de=_0x17fa4f,_0x4532ef=_0x268e2e;let _0x568b29={};try{_0x568b29=JSON[_0x4532ef(0x13d)](_0x41a803);}catch(_0xa2d0b0){_0x568b29={'usage':{'completion_tokens':0x31,'prompt_tokens':0x14d,'total_tokens':0x18f}},console[_0x5838de(0x131)](_0x4532ef(0x162),_0x41a803);}return _0x568b29;}exports[_0x268e2e(0x150)]=compilerMetaJsonStr;function compilerStream(_0x38335d){const _0x337ce1=_0xbc99,_0x2063ad=_0x17fa4f,_0x1ffb26=_0x268e2e;var _0x3323ab;if(_0x38335d[_0x1ffb26(0x14e)]===0x3)return{'event':_0x38335d[0x0][_0x1ffb26(0x13f)](_0x337ce1(0xdb),''),'id':_0x38335d[0x1][_0x1ffb26(0x13f)](_0x337ce1(0xd3),''),'is_end':![],'result':_0x38335d[0x2][_0x1ffb26(0x13f)](_0x1ffb26(0x152),'')[_0x2063ad(0x152)]()};if(_0x38335d[_0x2063ad(0x138)]===0x4)return{'event':_0x38335d[0x0][_0x2063ad(0x154)](_0x1ffb26(0x14b),''),'id':_0x38335d[0x1][_0x1ffb26(0x13f)](_0x1ffb26(0x155),''),'result':_0x38335d[0x2][_0x1ffb26(0x13f)](_0x1ffb26(0x152),'')[_0x1ffb26(0x161)](),'is_end':!![],'usage':(_0x3323ab=compilerMetaJsonStr(_0x38335d[0x3][_0x2063ad(0x154)](_0x2063ad(0x15a),'')))===null||_0x3323ab===void 0x0?void 0x0:_0x3323ab[_0x1ffb26(0x156)]};}function _0x13c3(){const _0x302503=['generateToken','data:','4HItHtn','sendMessageFromZhipu','1086912JMETbW','810932stcyQB','8062500ygPKjF','json\x20parse\x20error\x20from\x20zhipu!','trim','stream','error:\x20','round','1961MHcDrm','toString','6ESGjQN','id:','compilerStream','9472653IUyBtG','1738WPWbsB','90832ErnwRP','6484482aSpLPy','1417490rTyjiQ','replace','event:','log','push','1HlRlXL','sign','now','end','409996ChwbTU','HS256','catch','then','64jPWPNC','9027wriAph','33020360YFTwoB','11344328qobhyL','8979JADAGc','split','meta:','515822BRTclK','usage','defineProperty','586831JGesxL','5080407azrSOk','shift','application/json','1076SeygZV','6407492jSCYzS','POST','https://open.bigmodel.cn/api/paas/v3/model-api/','error','12662288hafqHu','is_end','1759051UCEXlo'];_0x13c3=function(){return _0x302503;};return _0x13c3();}exports[_0x268e2e(0x15f)]=compilerStream;function _0x428f(_0x15a908,_0x242619){const _0x39319=_0x2384();return _0x428f=function(_0x3c3f12,_0x26de05){_0x3c3f12=_0x3c3f12-0x12f;let _0x265425=_0x39319[_0x3c3f12];return _0x265425;},_0x428f(_0x15a908,_0x242619);}async function sendMessageFromZhipu(_0x16c8e9,{onProgress:_0x39a424,key:_0x2cf634,model:_0x5bbee5,temperature:temperature=0.95}){const _0x3d6f38=await generateToken(_0x2cf634);return new Promise((_0x22d9c2,_0x134d7c)=>{const _0x58a86a=_0x428f,_0x3fb8da=_0x351d,_0x31d78d=_0x3fb8da(0x153)+_0x5bbee5+_0x3fb8da(0x15a),_0x154825={'method':_0x3fb8da(0x146),'url':_0x31d78d,'responseType':_0x58a86a(0x14c),'headers':{'Content-Type':_0x3fb8da(0x15b),'Authorization':_0x3d6f38},'data':{'prompt':_0x16c8e9,'temperature':temperature}};axios(_0x154825)[_0x58a86a(0x12f)](_0x5f5b5b=>{const _0x5559de=_0x3fb8da,_0x351fe4=_0x5f5b5b[_0x5559de(0x13b)];let _0x2d89d6,_0x5921cb='';_0x351fe4['on'](_0x5559de(0x13b),_0x4adae1=>{const _0x2be2d4=_0xbc99,_0x49f9a2=_0x5559de,_0x4ad603=_0x4adae1[_0x2be2d4(0xd1)]()[_0x49f9a2(0x149)]('\x0a')[_0x49f9a2(0x140)](_0x1b3b03=>_0x1b3b03[_0x49f9a2(0x161)]()!==''),_0x3b84bf=compilerStream(_0x4ad603);if(!_0x3b84bf)return;const {id:_0xc2de0d,result:_0x10a4b1,is_end:_0x306df3}=_0x3b84bf;_0x10a4b1&&(_0x5921cb+=_0x10a4b1[_0x49f9a2(0x161)]()),_0x306df3&&(_0x3b84bf[_0x49f9a2(0x151)]=![],_0x2d89d6=_0x3b84bf,_0x2d89d6[_0x49f9a2(0x159)]=_0x5921cb),_0x39a424(_0x3b84bf);}),_0x351fe4['on'](_0x5559de(0x145),()=>{_0x22d9c2(_0x2d89d6),_0x5921cb='';});})[_0x3fb8da(0x148)](_0x1f53bb=>{const _0x356c48=_0x58a86a,_0x48d06c=_0x3fb8da;console[_0x48d06c(0x13c)](_0x356c48(0x15c),_0x1f53bb);});});}function _0x2384(){const _0x51c936=_0xbc99,_0x3b602c=['parse',_0x51c936(0xca),_0x51c936(0xc8),_0x51c936(0xcc),_0x51c936(0xc1),_0x51c936(0xda),_0x51c936(0xc6),_0x51c936(0xe1),_0x51c936(0xdc),_0x51c936(0xb3),_0x51c936(0xcb),_0x51c936(0xb4),_0x51c936(0xc5),_0x51c936(0xce),_0x51c936(0xba),_0x51c936(0xcf),_0x51c936(0xab),'6273963Pcznya',_0x51c936(0xae),_0x51c936(0xad),_0x51c936(0xd6),_0x51c936(0xc0),'/sse-invoke','push',_0x51c936(0xbe),_0x51c936(0xb7),'jsonwebtoken','6997575ZCGXeF','length','70uSPpoP','compilerMetaJsonStr',_0x51c936(0xe2),_0x51c936(0xdb),_0x51c936(0xbd),_0x51c936(0xc7),_0x51c936(0xb6),_0x51c936(0xc2),_0x51c936(0xd7),_0x51c936(0xb9),_0x51c936(0xd8),'data',_0x51c936(0xc4),_0x51c936(0xaf),_0x51c936(0xd0),_0x51c936(0xd4),'100GcVZqH',_0x51c936(0xe0),_0x51c936(0xac),_0x51c936(0xcd),_0x51c936(0xbb),'5cHICsl'];return _0x2384=function(){return _0x3b602c;},_0x2384();}exports[_0x268e2e(0x160)]=sendMessageFromZhipu;