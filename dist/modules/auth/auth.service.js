'use strict';const _0x58388d=_0x2d48;(function(_0x3cb951,_0x598617){const _0x1c3fa7=_0x2d48,_0x2d17cf=_0x3cb951();while(!![]){try{const _0x3718de=-parseInt(_0x1c3fa7(0x14c))/0x1*(-parseInt(_0x1c3fa7(0x12c))/0x2)+-parseInt(_0x1c3fa7(0x140))/0x3*(-parseInt(_0x1c3fa7(0x15c))/0x4)+parseInt(_0x1c3fa7(0x189))/0x5*(-parseInt(_0x1c3fa7(0x12a))/0x6)+-parseInt(_0x1c3fa7(0x156))/0x7+-parseInt(_0x1c3fa7(0x199))/0x8*(parseInt(_0x1c3fa7(0x144))/0x9)+parseInt(_0x1c3fa7(0x157))/0xa*(parseInt(_0x1c3fa7(0x122))/0xb)+parseInt(_0x1c3fa7(0x18d))/0xc*(parseInt(_0x1c3fa7(0x17b))/0xd);if(_0x3718de===_0x598617)break;else _0x2d17cf['push'](_0x2d17cf['shift']());}catch(_0x3c9e64){_0x2d17cf['push'](_0x2d17cf['shift']());}}}(_0x4b2f,0x5e1ad));const _0x5e60b1=_0xa523;(function(_0x5d2104,_0x5c5c17){const _0x3ed722=_0x2d48,_0x55eee8=_0xa523,_0x42b8c9=_0x5d2104();while(!![]){try{const _0x53fc4b=-parseInt(_0x55eee8(0x259))/0x1+-parseInt(_0x55eee8(0x1d8))/0x2+-parseInt(_0x55eee8(0x20c))/0x3+-parseInt(_0x55eee8(0x254))/0x4*(-parseInt(_0x55eee8(0x1e5))/0x5)+-parseInt(_0x55eee8(0x20e))/0x6*(parseInt(_0x55eee8(0x250))/0x7)+parseInt(_0x55eee8(0x1ea))/0x8+parseInt(_0x55eee8(0x247))/0x9;if(_0x53fc4b===_0x5c5c17)break;else _0x42b8c9[_0x3ed722(0x152)](_0x42b8c9[_0x3ed722(0x11c)]());}catch(_0x291052){_0x42b8c9[_0x3ed722(0x152)](_0x42b8c9[_0x3ed722(0x11c)]());}}}(_0x3895,0x99667));function _0x3895(){const _0x3e190c=_0x2d48,_0x1a248f=['&registerSuccessEmaileAppend=','JwtService',_0x3e190c(0x121),_0x3e190c(0x1a7),_0x3e190c(0x160),'sendPhoneCode',_0x3e190c(0x181),'userService',_0x3e190c(0x172),'createMathExpr',_0x3e190c(0x19d),'function','2912316kjlgoa',_0x3e190c(0x11a),_0x3e190c(0x168),'response',_0x3e190c(0x128),_0x3e190c(0x176),_0x3e190c(0x118),_0x3e190c(0x142),_0x3e190c(0x186),_0x3e190c(0x174),_0x3e190c(0x1a3),_0x3e190c(0x148),'127.0.0.1','createUserAndVerifycation',_0x3e190c(0x1a1),_0x3e190c(0x125),_0x3e190c(0x124),_0x3e190c(0x1a0),_0x3e190c(0x155),_0x3e190c(0x1a4),'../userBalance/userBalance.service',_0x3e190c(0x12b),_0x3e190c(0x129),_0x3e190c(0x177),'getConfigs',_0x3e190c(0x161),_0x3e190c(0x188),_0x3e190c(0x14f),'ACTIVE',_0x3e190c(0x1a2),_0x3e190c(0x131),_0x3e190c(0x178),'&registerSuccessEmailTeamName=',_0x3e190c(0x17c),_0x3e190c(0x16e),_0x3e190c(0x150),_0x3e190c(0x138),_0x3e190c(0x149),'object',_0x3e190c(0x14d),'createRandomCode',_0x3e190c(0x15b),'HttpException',_0x3e190c(0x18b),_0x3e190c(0x180),_0x3e190c(0x141),_0x3e190c(0x17e),_0x3e190c(0x1a9),_0x3e190c(0x152),_0x3e190c(0x11b),_0x3e190c(0x17f),_0x3e190c(0x16b),'UserStatusErrMsg',_0x3e190c(0x146),_0x3e190c(0x139),_0x3e190c(0x14a),'data',_0x3e190c(0x134),_0x3e190c(0x19a),'reduce',_0x3e190c(0x162),_0x3e190c(0x15f),'__decorate',_0x3e190c(0x196),'VerificationService','@nine.com',_0x3e190c(0x151),_0x3e190c(0x182),'InjectRepository','HttpStatus',_0x3e190c(0x1a5),'padStart',_0x3e190c(0x15e),_0x3e190c(0x18f),_0x3e190c(0x11e),_0x3e190c(0x13d),_0x3e190c(0x154),_0x3e190c(0x137),_0x3e190c(0x163),_0x3e190c(0x12e),_0x3e190c(0x195),_0x3e190c(0x147),_0x3e190c(0x1a6),_0x3e190c(0x120),_0x3e190c(0x130),_0x3e190c(0x15d),_0x3e190c(0x143),_0x3e190c(0x166),'login',_0x3e190c(0x158),_0x3e190c(0x173),_0x3e190c(0x13c),'get',_0x3e190c(0x187),_0x3e190c(0x13b),'updatePassByOther',_0x3e190c(0x190),_0x3e190c(0x17d),_0x3e190c(0x14e),'avatar',_0x3e190c(0x13e),_0x3e190c(0x127),_0x3e190c(0x194),_0x3e190c(0x183),_0x3e190c(0x19e),':CAPTCHA:',_0x3e190c(0x145),'set','getOwnPropertyDescriptor','verificationService',_0x3e190c(0x123),_0x3e190c(0x197),_0x3e190c(0x191),_0x3e190c(0x12d),'Repository',_0x3e190c(0x11c),_0x3e190c(0x13f),_0x3e190c(0x14b),':PHONECODE:',_0x3e190c(0x198),'text',_0x3e190c(0x16c),_0x3e190c(0x16f),_0x3e190c(0x16a),_0x3e190c(0x12f),'IPv4',_0x3e190c(0x1a8)];return _0x3895=function(){return _0x1a248f;},_0x3895();}function _0x2d48(_0x27c137,_0x44ab8d){const _0x4b2f7e=_0x4b2f();return _0x2d48=function(_0x2d483c,_0x28ebc4){_0x2d483c=_0x2d483c-0x118;let _0x42d186=_0x4b2f7e[_0x2d483c];return _0x42d186;},_0x2d48(_0x27c137,_0x44ab8d);}const _0x2be9be=_0x1923;(function(_0x232970,_0x23bd50){const _0x2688eb=_0xa523,_0x461f0=_0x1923,_0x575ce0=_0x232970();while(!![]){try{const _0x293391=parseInt(_0x461f0(0x83))/0x1*(-parseInt(_0x461f0(0xfe))/0x2)+-parseInt(_0x461f0(0xb3))/0x3+parseInt(_0x461f0(0xca))/0x4+-parseInt(_0x461f0(0xd4))/0x5*(parseInt(_0x461f0(0x94))/0x6)+-parseInt(_0x461f0(0x8a))/0x7+parseInt(_0x461f0(0xaa))/0x8+parseInt(_0x461f0(0xe5))/0x9*(parseInt(_0x461f0(0xab))/0xa);if(_0x293391===_0x23bd50)break;else _0x575ce0[_0x2688eb(0x1ee)](_0x575ce0[_0x2688eb(0x231)]());}catch(_0x4bd291){_0x575ce0[_0x2688eb(0x1ee)](_0x575ce0[_0x2688eb(0x231)]());}}}(_0x319b,0xf11e4));var __decorate=this&&this[_0x2be9be(0x92)]||function(_0x2c4884,_0x1642bb,_0x48b796,_0x5a31c7){const _0x304b18=_0xa523,_0x1a712c=_0x2be9be;var _0x23eac4=arguments['length'],_0x404428=_0x23eac4<0x3?_0x1642bb:_0x5a31c7===null?_0x5a31c7=Object[_0x304b18(0x22a)](_0x1642bb,_0x48b796):_0x5a31c7,_0x4cd539;if(typeof Reflect===_0x1a712c(0xf7)&&typeof Reflect[_0x304b18(0x25e)]===_0x1a712c(0xd9))_0x404428=Reflect[_0x1a712c(0xe1)](_0x2c4884,_0x1642bb,_0x48b796,_0x5a31c7);else{for(var _0xf1bff=_0x2c4884[_0x1a712c(0x84)]-0x1;_0xf1bff>=0x0;_0xf1bff--)if(_0x4cd539=_0x2c4884[_0xf1bff])_0x404428=(_0x23eac4<0x3?_0x4cd539(_0x404428):_0x23eac4>0x3?_0x4cd539(_0x1642bb,_0x48b796,_0x404428):_0x4cd539(_0x1642bb,_0x48b796))||_0x404428;}return _0x23eac4>0x3&&_0x404428&&Object[_0x1a712c(0xda)](_0x1642bb,_0x48b796,_0x404428),_0x404428;},__metadata=this&&this[_0x5e60b1(0x21b)]||function(_0x40672d,_0x809021){const _0x2ae4ce=_0x2be9be;if(typeof Reflect===_0x2ae4ce(0xf7)&&typeof Reflect[_0x2ae4ce(0xf4)]===_0x2ae4ce(0xd9))return Reflect[_0x2ae4ce(0xf4)](_0x40672d,_0x809021);},__param=this&&this[_0x2be9be(0xe8)]||function(_0x228611,_0x11d73a){return function(_0x4bf1b0,_0x57ff5c){_0x11d73a(_0x4bf1b0,_0x57ff5c,_0x228611);};};Object[_0x5e60b1(0x240)](exports,'__esModule',{'value':!![]}),exports[_0x2be9be(0xde)]=void 0x0;const globalConfig_service_1=require(_0x58388d(0x175)),verification_constant_1=require(_0x2be9be(0xcc)),verification_service_1=require(_0x2be9be(0xbb)),common_1=require(_0x2be9be(0x9d)),jwt_1=require(_0x2be9be(0xb4)),user_service_1=require(_0x2be9be(0xc3)),mailer_service_1=require(_0x2be9be(0x99)),user_constant_1=require(_0x2be9be(0x87)),userBalance_service_1=require(_0x2be9be(0x82)),config_entity_1=require(_0x2be9be(0xe2)),typeorm_1=require(_0x2be9be(0xdb)),typeorm_2=require(_0x2be9be(0xa4)),utils_1=require(_0x2be9be(0xcd)),os=require('os'),redisCache_service_1=require(_0x2be9be(0x8b)),svgCaptcha=require(_0x2be9be(0xdc)),bcrypt=require(_0x2be9be(0x88));function _0x1923(_0x528d82,_0x2a6e8e){const _0x40f7a0=_0x319b();return _0x1923=function(_0x232446,_0x914cb4){_0x232446=_0x232446-0x7c;let _0x2f7e08=_0x40f7a0[_0x232446];return _0x2f7e08;},_0x1923(_0x528d82,_0x2a6e8e);}function _0x4b2f(){const _0x41f6ea=['4052265SmqTdr','10nPWDpC','3085mEaolq','无权此操作、请联系管理员！','visitor','mailerService','1409972ojzvUB','&registerFailEmailTeamName=','旧密码错误、请检查提交','hashSync','activateAccount','registerFailEmailTitle','13301080rqnARv','2831460XDmOgo','14HGgHQA','验证码填写错误、请重新输入！','internal','loginByPhone','BAD_REQUEST','../globalConfig/config.entity','../user/user.service','getNamespace','qureyUserInfoByInviteCode','294310TndXga','userDefautlAvatar','verifyCode','UserService','toString','queryUserInfoById','forEach','getIp','../globalConfig/globalConfig.service','账户已被激活过','&registerSuccessEmailTitle=','#fff','&username=','HttpStatus','91XhVvEQ','秒内不得重复发送短信！','1963251jIcyjD','&registerFailEmailTitle=','svg-captcha','2072696WWDLuG','RedisCacheService','userBalanceService','ipAddress','906kHfNHe','family','验证码发送成功、请填写验证码完成注册！','__metadata','686712qXFVzH','15VMfnIe','getClientIp','@nestjs/common','length','1316976SnVSAZ','ACTIVE','../../common/utils','无权此操作！','../mailer/mailer.service','savaLoginIp','address','oldPassword','30lNGueF','loginByOpenId','getUserInfo','updatePassword','56WNpBUH','keys','userService','createUser','21635055PLOeZj','ttl','verifyUserCredentials','../redisCache/redisCache.service','@nestjs/typeorm','UserStatusEnum','registerSuccessEmailTeamName','../../common/constants/user.constant','createRandomUid','metadata','defineProperty','bcryptjs','711aojfJM','__param','Registration','user','getInfo','shift','../verification/verification.service','addBalanceToNewUser','updateUserPassword','/api/auth/registerError?message=','createTokenFromFingerprint','990407jeRzjt','onModuleInit','216792gpVrqB','/api/auth/registerSuccess?id=','非法操作、请联系管理员！','verifyCaptcha','networkInterfaces','ConfigEntity','1151022ZfcBgH','decorate','78UVGZax','configKey','registerSuccessEmailTitle','registerByPhone','242486TqQGRZ','design:paramtypes','jwtService','userId','saveToken','configVal','HttpException','redirect','../../common/constants/verification.constant','验证码类型错误','getUserStatus','VerificationEnum','typeorm','globalConfigService','redisCacheService','updateUserStatus','3TGBAec','registerFailEmailTeamName','1321817vGQidA','UserBalanceService','476343vTSOfX','configEntity','MailerService','client','176QoMrCp','log','验证码已过期、请重新发送！','captcha','17938orepJt','46985qfvlFj','verifyUserRegisterByPhone','find','error:\x20','registerSuccessEmaileAppend','push','verificationService','Injectable','AuthService'];_0x4b2f=function(){return _0x41f6ea;};return _0x4b2f();}function _0xa523(_0x4e263b,_0x548255){const _0x578b71=_0x3895();return _0xa523=function(_0xa9c597,_0x3153e2){_0xa9c597=_0xa9c597-0x1d7;let _0x326fb7=_0x578b71[_0xa9c597];return _0x326fb7;},_0xa523(_0x4e263b,_0x548255);}let AuthService=class AuthService{constructor(_0x21b0bd,_0x2a4428,_0x50d433,_0x495e6a,_0x225b45,_0x35632b,_0x4ba94d,_0x3eb8db){const _0x539417=_0x5e60b1,_0x5b38de=_0x2be9be;this[_0x5b38de(0x95)]=_0x21b0bd,this[_0x5b38de(0xdf)]=_0x2a4428,this[_0x5b38de(0x9a)]=_0x50d433,this[_0x5b38de(0xec)]=_0x495e6a,this[_0x5b38de(0xed)]=_0x225b45,this[_0x5b38de(0xb0)]=_0x35632b,this[_0x539417(0x222)]=_0x4ba94d,this[_0x5b38de(0x86)]=_0x3eb8db;}async[_0x5e60b1(0x22c)](){const _0x5f1b01=_0x5e60b1;this[_0x5f1b01(0x252)]();}async[_0x2be9be(0xe9)](_0x274530,_0x5e4c0f){const _0x1dc6e4=_0x5e60b1,_0x43427a=_0x2be9be;await this[_0x43427a(0xed)][_0x43427a(0xc9)](_0x274530);const _0x213296=await this[_0x43427a(0xdf)][_0x43427a(0xa8)](_0x274530,_0x5e4c0f),{username:_0x2053ab,email:_0x29c7ae,client:_0x149224,id:_0x5113d5}=_0x213296,_0x3e29d9={'username':_0x2053ab,'email':_0x29c7ae,'id':_0x5113d5};return _0x149224&&(_0x3e29d9[_0x1dc6e4(0x20f)]=_0x149224),_0x3e29d9;}async[_0x2be9be(0xe7)](_0x1e6f38,_0x39eaaf){const _0x14a934=_0x58388d,_0x9a298e=_0x5e60b1,_0x28e1db=_0x2be9be,{username:_0x4fb1b3,password:_0x566f57,phone:_0x2f3057,phoneCode:_0x1f4d4d,invitedBy:_0x4ec6cc}=_0x1e6f38;await this[_0x28e1db(0xdf)][_0x28e1db(0xa6)](_0x1e6f38);const _0x1ec126=await this[_0x28e1db(0x86)][_0x28e1db(0xef)](),_0x4da66f=_0x1ec126+_0x28e1db(0x85)+_0x2f3057,_0x56388c=await this[_0x28e1db(0xf3)][_0x28e1db(0xbe)]({'key':_0x4da66f});if(!_0x56388c)throw new common_1['HttpException'](_0x9a298e(0x1f5),common_1[_0x28e1db(0xfd)][_0x28e1db(0xe4)]);if(_0x1f4d4d!==_0x56388c)throw new common_1[(_0x28e1db(0x93))](_0x28e1db(0xb8),common_1[_0x9a298e(0x203)][_0x28e1db(0xe4)]);const _0x359ee4=(0x0,utils_1[_0x28e1db(0xc6)])()+_0x9a298e(0x1ff),_0x7f3006={'username':_0x4fb1b3,'password':_0x566f57,'phone':_0x2f3057,'invitedBy':_0x4ec6cc,'email':_0x359ee4,'status':user_constant_1[_0x28e1db(0x96)][_0x9a298e(0x1da)]},_0x449561=await this[_0x28e1db(0x86)][_0x28e1db(0x7e)]([_0x28e1db(0xd1)]);_0x7f3006[_0x28e1db(0xeb)]=_0x449561;const _0x5a127d=bcrypt[_0x28e1db(0x8f)](_0x566f57,0xa);_0x7f3006[_0x28e1db(0xa5)]=_0x5a127d;const _0x2b08a5=await this[_0x28e1db(0xdf)][_0x28e1db(0xe0)](_0x7f3006);let _0x58d153;_0x4ec6cc&&(_0x58d153=await this[_0x28e1db(0xdf)][_0x28e1db(0x98)](_0x4ec6cc)),await this[_0x9a298e(0x201)][_0x14a934(0x11e)](_0x2b08a5['id'],_0x58d153===null||_0x58d153===void 0x0?void 0x0:_0x58d153['id']);return;}async[_0x2be9be(0xe6)](_0x2e70d5,_0xccfb8d){const _0x3a6bf5=_0x58388d,_0xed457f=_0x2be9be,_0x4dbdc0=await this[_0xed457f(0xdf)][_0xed457f(0x8c)](_0x2e70d5),{username:_0x234a2e,id:_0x3b4842,email:_0x190c0e,role:_0x4e6319,openId:_0x3f263f,client:_0x55f27b}=_0x4dbdc0,_0x276a87=(0x0,utils_1[_0xed457f(0xcf)])(_0xccfb8d);await this[_0xed457f(0xdf)][_0xed457f(0x89)](_0x3b4842,_0x276a87);const _0x53513e=await this[_0xed457f(0x9a)][_0xed457f(0xf5)]({'username':_0x234a2e,'id':_0x3b4842,'email':_0x190c0e,'role':_0x4e6319,'openId':_0x3f263f,'client':_0x55f27b});return await this[_0x3a6bf5(0x13e)][_0xed457f(0xad)](_0x3b4842,_0x53513e),_0x53513e;}async[_0x58388d(0x167)](_0x5dbaef,_0x3789b3){const _0x30d828=_0x5e60b1,_0x14311e=_0x2be9be,_0x480efe=await this[_0x14311e(0xdf)][_0x14311e(0x8c)](_0x5dbaef),{username:_0x331820,id:_0x454bca,email:_0x32253b,role:_0x3f7293,openId:_0x329b95,client:_0x3b2d29}=_0x480efe,_0xdb444d=(0x0,utils_1[_0x14311e(0xcf)])(_0x3789b3);await this[_0x30d828(0x244)][_0x14311e(0x89)](_0x454bca,_0xdb444d);const {phone:_0x522f2f}=_0x5dbaef,_0x4f5aed=await this[_0x14311e(0x9a)][_0x14311e(0xf5)]({'username':_0x331820,'id':_0x454bca,'email':_0x32253b,'role':_0x3f7293,'openId':_0x329b95,'client':_0x3b2d29,'phone':_0x522f2f});return await this[_0x14311e(0xf3)][_0x14311e(0xad)](_0x454bca,_0x4f5aed),_0x4f5aed;}async[_0x2be9be(0xfb)](_0xc6a4da,_0x181d9b){const _0x399ef0=_0x58388d,_0x471d07=_0x5e60b1,_0x36c5d5=_0x2be9be,{status:_0x41aa22}=_0xc6a4da;if(_0x41aa22!==user_constant_1[_0x36c5d5(0x96)][_0x399ef0(0x18e)])throw new common_1[(_0x471d07(0x1e8))](user_constant_1[_0x471d07(0x1f2)][_0x41aa22],common_1[_0x36c5d5(0xfd)][_0x471d07(0x24b)]);const {username:_0x31cc4d,id:_0x2f1b6b,email:_0x517aa8,role:_0x472b9b,openId:_0x4bb903,client:_0x3d63d6}=_0xc6a4da,_0x11f81a=(0x0,utils_1[_0x36c5d5(0xcf)])(_0x181d9b);await this[_0x36c5d5(0xdf)][_0x36c5d5(0x89)](_0x2f1b6b,_0x11f81a);const _0x2451a5=await this[_0x36c5d5(0x9a)][_0x36c5d5(0xf5)]({'username':_0x31cc4d,'id':_0x2f1b6b,'email':_0x517aa8,'role':_0x472b9b,'openId':_0x4bb903,'client':_0x3d63d6});return await this[_0x36c5d5(0xf3)][_0x399ef0(0x134)](_0x2f1b6b,_0x2451a5),_0x2451a5;}async[_0x5e60b1(0x1ef)](_0x3f3fa1){const _0x4b6caf=_0x5e60b1,_0x568f07=_0x2be9be,{id:_0x51c8a6}=_0x3f3fa1[_0x4b6caf(0x24a)];return await this['userService'][_0x568f07(0xe3)](_0x51c8a6);}async[_0x5e60b1(0x241)](_0x100b4d,_0x47a7bb){const _0x6ed686=_0x58388d,_0x461cc9=_0x5e60b1,_0x218cdd=_0x2be9be,_0x4e6719=await this[_0x218cdd(0x95)][_0x461cc9(0x1d9)]({'where':{'configKey':(0x0,typeorm_1['In'])([_0x218cdd(0xd3),_0x218cdd(0xba),_0x218cdd(0xd5),_0x461cc9(0x1d7),_0x218cdd(0xf6)])}}),_0x150063=_0x4e6719[_0x461cc9(0x1f9)]((_0xb135d3,_0x252582)=>{const _0x8e0804=_0x2d48,_0x294b86=_0x461cc9;return _0xb135d3[_0x252582[_0x294b86(0x22f)]]=_0x252582[_0x8e0804(0x135)],_0xb135d3;},{});try{const _0x30ce3f=await this[_0x218cdd(0xed)][_0x218cdd(0x7c)](_0x100b4d,verification_constant_1[_0x218cdd(0xb9)][_0x218cdd(0xc4)]),{type:_0x3f4698,userId:_0x5b42dd}=_0x30ce3f;if(_0x3f4698!==verification_constant_1[_0x218cdd(0xb9)][_0x218cdd(0xc4)])throw new common_1[(_0x461cc9(0x1e8))](_0x461cc9(0x1f4),common_1[_0x218cdd(0xfd)][_0x218cdd(0xe4)]);const _0x1f9de4=await this[_0x461cc9(0x244)][_0x218cdd(0xd8)](_0x5b42dd);if(_0x1f9de4===user_constant_1[_0x218cdd(0x96)][_0x218cdd(0x103)])throw new common_1['HttpException'](_0x218cdd(0xae),common_1[_0x6ed686(0x17a)][_0x461cc9(0x24b)]);await this[_0x218cdd(0xdf)][_0x218cdd(0x7d)](_0x30ce3f[_0x218cdd(0xa7)],user_constant_1[_0x218cdd(0x96)][_0x218cdd(0x103)]);const _0x28fe8c=await this[_0x218cdd(0xdf)][_0x218cdd(0xa0)](_0x30ce3f[_0x6ed686(0x133)]),{username:_0xb76db6,email:_0x55144f,id:_0x2af3f5,invitedBy:_0x29a53e}=_0x28fe8c;let _0x501bb2;_0x29a53e&&(_0x501bb2=await this[_0x218cdd(0xdf)][_0x461cc9(0x237)](_0x29a53e)),await this[_0x218cdd(0xb0)][_0x218cdd(0x102)](_0x2af3f5,_0x501bb2===null||_0x501bb2===void 0x0?void 0x0:_0x501bb2['id']),_0x47a7bb[_0x461cc9(0x20b)](_0x218cdd(0xf8)+_0x2af3f5[_0x218cdd(0xd6)]()[_0x218cdd(0x100)](0x4,'0')+_0x218cdd(0x8d)+_0xb76db6+_0x218cdd(0xb1)+_0x55144f+_0x218cdd(0x90)+_0x150063[_0x461cc9(0x20d)]+_0x218cdd(0x104)+_0x150063[_0x218cdd(0xba)]+_0x461cc9(0x23d)+_0x150063[_0x218cdd(0xd5)]);}catch(_0x41cf5e){console[_0x218cdd(0x105)](_0x218cdd(0xdd),_0x41cf5e);const _0xea0a6a=_0x41cf5e[_0x461cc9(0x24c)];_0x47a7bb[_0x461cc9(0x20b)](_0x218cdd(0xb7)+_0xea0a6a+_0x218cdd(0x106)+_0x150063[_0x218cdd(0xa9)]+_0x218cdd(0x8e)+_0x150063[_0x218cdd(0xf6)]);}}async[_0x2be9be(0xc8)](_0x3f4ec4,_0x204ce9){const _0x233f28=_0x58388d,_0x302972=_0x5e60b1,_0x2ac87a=_0x2be9be,{id:_0x37ae0d,client:_0xa7d2eb,role:_0xaf4e7}=_0x3f4ec4[_0x2ac87a(0xbc)];if(_0xa7d2eb&&Number(_0xa7d2eb)>0x0)throw new common_1[(_0x233f28(0x136))](_0x2ac87a(0xbd),common_1[_0x2ac87a(0xfd)][_0x2ac87a(0xe4)]);if(_0xaf4e7===_0x2ac87a(0x9c))throw new common_1[(_0x2ac87a(0x93))](_0x2ac87a(0x91),common_1[_0x302972(0x203)][_0x2ac87a(0xe4)]);const _0x3e23c2=await this[_0x2ac87a(0xdf)][_0x2ac87a(0xa2)](_0x37ae0d,_0x204ce9[_0x2ac87a(0xa1)]);if(!_0x3e23c2)throw new common_1[(_0x2ac87a(0x93))](_0x2ac87a(0xfc),common_1[_0x2ac87a(0xfd)][_0x2ac87a(0xe4)]);return this[_0x2ac87a(0xdf)][_0x2ac87a(0x7f)](_0x37ae0d,_0x204ce9[_0x2ac87a(0xa5)]),_0x2ac87a(0xf2);}async[_0x5e60b1(0x21d)](_0xf5f6a5,_0x5deaa9){const _0x4d9edf=_0x2be9be,{id:_0x5e77db,client:_0xa373a6}=_0xf5f6a5[_0x4d9edf(0xbc)];if(!_0xa373a6)throw new common_1[(_0x4d9edf(0x93))](_0x4d9edf(0xf9),common_1[_0x4d9edf(0xfd)][_0x4d9edf(0xe4)]);return this[_0x4d9edf(0xdf)][_0x4d9edf(0x7f)](_0x5e77db,_0x5deaa9[_0x4d9edf(0xa5)]),_0x4d9edf(0xf2);}[_0x2be9be(0xb6)](){const _0x5475a3=_0x5e60b1,_0x437c1c=_0x2be9be;let _0x33c27f;const _0x18b9a9=os[_0x5475a3(0x24d)]();Object[_0x437c1c(0xc1)](_0x18b9a9)[_0x437c1c(0xc2)](_0x2e15a0=>{const _0x28b8f2=_0x2d48,_0x13f922=_0x5475a3,_0x2e05d7=_0x437c1c,_0x2fec49=_0x18b9a9[_0x2e15a0];for(let _0x1a81c6=0x0;_0x1a81c6<_0x2fec49[_0x28b8f2(0x18c)];_0x1a81c6++){const _0x73b7e7=_0x2fec49[_0x1a81c6];if(_0x73b7e7[_0x2e05d7(0xb2)]===_0x2e05d7(0xce)&&_0x73b7e7[_0x2e05d7(0x9b)]!==_0x13f922(0x255)&&!_0x73b7e7[_0x2e05d7(0xd0)]){_0x33c27f=_0x73b7e7[_0x2e05d7(0x9b)];break;}}}),this[_0x437c1c(0x80)]=_0x33c27f;}async[_0x5e60b1(0x233)](_0xbf00a2){const _0x316048=_0x5e60b1,_0x2e17ff=_0x2be9be,_0x83f832=await this[_0x316048(0x209)][_0x316048(0x1f1)](),{color:color=_0x2e17ff(0x9f)}=_0xbf00a2,_0xedce17=svgCaptcha[_0x2e17ff(0x97)]({'background':color,'height':0x22,'width':0x78,'noise':0x3}),_0x10873e=_0xedce17[_0x2e17ff(0xd7)],_0x155784=(0x0,utils_1[_0x2e17ff(0xc6)])(),_0xcb4a63=_0x83f832+_0x2e17ff(0xf1)+_0x155784;return await this[_0x2e17ff(0xf3)][_0x2e17ff(0xf0)]({'key':_0xcb4a63,'val':_0xedce17[_0x2e17ff(0xd7)]},0x5*0x3c),{'svgCode':_0xedce17[_0x2e17ff(0xcb)],'code':_0x155784};}async[_0x2be9be(0xc0)](_0x4e72e4){const _0x8dfbef=_0x5e60b1,_0x5963f2=_0x2be9be;await this[_0x8dfbef(0x22b)][_0x8dfbef(0x223)](_0x4e72e4);const {phone:_0xd4db87}=_0x4e72e4,_0x32b470=await this[_0x5963f2(0x86)][_0x5963f2(0xef)](),_0x295268=_0x32b470+_0x8dfbef(0x234)+_0xd4db87,_0x2fba54=await this[_0x5963f2(0xf3)][_0x5963f2(0xac)](_0x295268);if(_0x2fba54&&_0x2fba54>0x0)throw new common_1[(_0x5963f2(0x93))](_0x2fba54+_0x5963f2(0xbf),common_1[_0x8dfbef(0x203)][_0x5963f2(0xe4)]);const _0x190a49=(0x0,utils_1[_0x5963f2(0xc7)])(),_0x33fa2b={'phone':_0xd4db87,'code':_0x190a49};return await this[_0x5963f2(0xed)][_0x5963f2(0xc0)](_0x33fa2b),await this[_0x5963f2(0xf3)][_0x5963f2(0xf0)]({'key':_0x295268,'val':_0x190a49},0x1*0x3c),_0x5963f2(0xb5);}[_0x2be9be(0xd2)](_0x19b7ea){const _0x4e97d6=_0x58388d,_0x4d5b06=_0x2be9be,_0x279b5=this[_0x4d5b06(0x9a)][_0x4d5b06(0xf5)]({'username':'游客'+_0x19b7ea,'id':_0x19b7ea,'email':_0x19b7ea+_0x4d5b06(0xa3),'role':_0x4e97d6(0x15a),'openId':null,'client':null});return _0x279b5;}};function _0x319b(){const _0x281f8b=_0x58388d,_0x4c3275=_0x5e60b1,_0x1c9aba=[_0x4c3275(0x25a),_0x281f8b(0x19f),_0x281f8b(0x179),_0x4c3275(0x213),_0x4c3275(0x1fb),_0x4c3275(0x260),_0x281f8b(0x126),_0x4c3275(0x1fc),_0x4c3275(0x1e8),_0x281f8b(0x184),_0x4c3275(0x228),_0x4c3275(0x1db),_0x4c3275(0x246),_0x4c3275(0x237),_0x4c3275(0x22e),_0x281f8b(0x132),_0x281f8b(0x193),'admin',_0x4c3275(0x1e9),_0x281f8b(0x170),_0x4c3275(0x1dd),_0x4c3275(0x245),_0x4c3275(0x224),'verifyUserPassword',_0x4c3275(0x1ff),_0x4c3275(0x257),'password',_0x4c3275(0x220),'userId',_0x4c3275(0x256),'registerFailEmailTitle',_0x4c3275(0x1fa),_0x281f8b(0x16d),_0x4c3275(0x226),_0x4c3275(0x1f7),_0x4c3275(0x24e),_0x4c3275(0x1fe),_0x4c3275(0x201),'&email=',_0x281f8b(0x185),_0x4c3275(0x21f),'@nestjs/jwt',_0x4c3275(0x251),_0x4c3275(0x252),_0x4c3275(0x211),_0x281f8b(0x165),_0x4c3275(0x21c),_0x4c3275(0x253),_0x281f8b(0x11d),_0x4c3275(0x24a),_0x281f8b(0x159),_0x4c3275(0x21a),_0x4c3275(0x1df),_0x4c3275(0x242),_0x4c3275(0x1f8),_0x4c3275(0x218),_0x4c3275(0x239),_0x281f8b(0x119),_0x4c3275(0x23e),_0x4c3275(0x204),_0x4c3275(0x1e6),_0x4c3275(0x235),_0x4c3275(0x223),_0x4c3275(0x249),_0x4c3275(0x1f6),_0x4c3275(0x1e2),_0x4c3275(0x207),_0x4c3275(0x23b),_0x281f8b(0x18a),_0x4c3275(0x215),_0x4c3275(0x1e0),_0x4c3275(0x23f),_0x4c3275(0x20d),_0x4c3275(0x217),_0x4c3275(0x200),_0x281f8b(0x171),_0x4c3275(0x236),_0x281f8b(0x13a),_0x4c3275(0x248),_0x4c3275(0x240),_0x4c3275(0x219),_0x4c3275(0x1f0),_0x4c3275(0x1e1),_0x4c3275(0x25b),_0x281f8b(0x19b),_0x281f8b(0x19c),_0x4c3275(0x25e),_0x281f8b(0x169),_0x4c3275(0x22d),_0x4c3275(0x24b),_0x4c3275(0x1ed),_0x4c3275(0x216),_0x4c3275(0x23a),_0x4c3275(0x24f),'register',_0x4c3275(0x25f),_0x4c3275(0x221),_0x4c3275(0x1e7),_0x281f8b(0x153),_0x4c3275(0x202),_0x281f8b(0x16b),_0x4c3275(0x229),_0x4c3275(0x227),'密码修改成功',_0x4c3275(0x222),_0x4c3275(0x210),'sign',_0x4c3275(0x1eb),_0x4c3275(0x1e4),_0x4c3275(0x258),_0x4c3275(0x21e),'GlobalConfigService',_0x4c3275(0x1fd),_0x4c3275(0x206),_0x281f8b(0x17a),_0x281f8b(0x164),_0x4c3275(0x230),_0x4c3275(0x205),_0x4c3275(0x1dc),_0x4c3275(0x208),_0x4c3275(0x1da),_0x4c3275(0x1de),_0x4c3275(0x1e3),_0x4c3275(0x1ec),_0x4c3275(0x238),_0x4c3275(0x232),_0x4c3275(0x261),_0x281f8b(0x11f),_0x4c3275(0x225),_0x4c3275(0x214),_0x4c3275(0x25d),_0x4c3275(0x212),'length',_0x4c3275(0x234),_0x4c3275(0x209),_0x4c3275(0x25c),_0x4c3275(0x23c),_0x281f8b(0x192),'8982099vnnQRs'];return _0x319b=function(){return _0x1c9aba;},_0x319b();}AuthService=__decorate([(0x0,common_1[_0x5e60b1(0x20a)])(),__param(0x0,(0x0,typeorm_2[_0x2be9be(0xee)])(config_entity_1[_0x2be9be(0xea)])),__metadata(_0x2be9be(0x101),[typeorm_1[_0x2be9be(0xff)],user_service_1[_0x2be9be(0x9e)],jwt_1[_0x2be9be(0xc5)],mailer_service_1[_0x5e60b1(0x1f3)],verification_service_1[_0x2be9be(0xaf)],userBalance_service_1[_0x2be9be(0x81)],redisCache_service_1[_0x5e60b1(0x243)],globalConfig_service_1[_0x2be9be(0xfa)]])],AuthService),exports[_0x5e60b1(0x25b)]=AuthService;