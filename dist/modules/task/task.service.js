'use strict';function _0x3e93(){const _0x593536=['会员已到期、清空所有余额并移除会员身份！','CronExpression','4KzHcYl','design:type','1630578YQPvfe','153410RbXhjR','Automatically\x20refresh\x20WeChat\x20access\x20every\x20hour\x20Token','6958972nXXVRb','187LbPfKE','push','design:paramtypes','checkUserMemerExpire','3647855qPgOXq','__decorate','184530SxgWur','metadata','handleCron','22YKNGNL','108kwphRK','prototype','3236736KKmfVY','getOwnPropertyDescriptor','typeorm','__esModule','shift','decorate','EVERY_HOUR','Cron','46230855kyvGHM','InjectRepository','9QPwkVI','Injectable','TaskService','296eJIKGL','GlobalConfigService','__metadata','Logger','debug','10333053GhQEmt','object','737640mQZHCe','18294aHYJYQ','modelsService','140197QCdrvA','EVERY_5_MINUTES','design:returntype','UserBalanceEntity','find','length','function','getWechatAccessToken','11317929LWJutQ','178801KeIJRx'];_0x3e93=function(){return _0x593536;};return _0x3e93();}const _0x312aa9=_0x33cb;(function(_0x3aaebd,_0x379668){const _0x5a3010=_0x33cb,_0x509161=_0x3aaebd();while(!![]){try{const _0x1bbafd=parseInt(_0x5a3010(0x113))/0x1*(parseInt(_0x5a3010(0xfb))/0x2)+-parseInt(_0x5a3010(0xfe))/0x3+parseInt(_0x5a3010(0xec))/0x4*(parseInt(_0x5a3010(0xf6))/0x5)+parseInt(_0x5a3010(0xee))/0x6+-parseInt(_0x5a3010(0xe9))/0x7*(parseInt(_0x5a3010(0x10b))/0x8)+parseInt(_0x5a3010(0x110))/0x9+-parseInt(_0x5a3010(0xef))/0xa*(-parseInt(_0x5a3010(0xf2))/0xb);if(_0x1bbafd===_0x379668)break;else _0x509161['push'](_0x509161['shift']());}catch(_0x1ce32e){_0x509161['push'](_0x509161['shift']());}}}(_0x3e93,0x8f6d7));function _0x33cb(_0x1a7d51,_0x5a9df3){const _0x3e939f=_0x3e93();return _0x33cb=function(_0x33cb38,_0x427b42){_0x33cb38=_0x33cb38-0xe0;let _0x1c46b5=_0x3e939f[_0x33cb38];return _0x1c46b5;},_0x33cb(_0x1a7d51,_0x5a9df3);}const _0x2fd507=_0x30fd;(function(_0x4af6c0,_0x55b3c1){const _0x1f540f=_0x33cb,_0x547a89=_0x30fd,_0x1e1745=_0x4af6c0();while(!![]){try{const _0x241589=-parseInt(_0x547a89(0xb4))/0x1*(-parseInt(_0x547a89(0xbd))/0x2)+parseInt(_0x547a89(0x94))/0x3*(-parseInt(_0x547a89(0xa0))/0x4)+parseInt(_0x547a89(0xae))/0x5*(-parseInt(_0x547a89(0x96))/0x6)+-parseInt(_0x547a89(0x9e))/0x7+-parseInt(_0x547a89(0x91))/0x8+-parseInt(_0x547a89(0xaa))/0x9*(-parseInt(_0x547a89(0x97))/0xa)+parseInt(_0x547a89(0x9d))/0xb;if(_0x241589===_0x55b3c1)break;else _0x1e1745['push'](_0x1e1745[_0x1f540f(0x102)]());}catch(_0xb9f10f){_0x1e1745[_0x1f540f(0xf3)](_0x1e1745[_0x1f540f(0x102)]());}}}(_0x3e91,0xdf09b));function _0x30fd(_0x1d9082,_0x25c283){const _0x3b248b=_0x3e91();return _0x30fd=function(_0x24df76,_0x4c72ff){_0x24df76=_0x24df76-0x90;let _0x3e4577=_0x3b248b[_0x24df76];return _0x3e4577;},_0x30fd(_0x1d9082,_0x25c283);}function _0x3e91(){const _0x2f4a13=_0x33cb,_0x515c9a=['LessThanOrEqual',_0x2f4a13(0x104),_0x2f4a13(0xe6),'__param',_0x2f4a13(0xe0),_0x2f4a13(0xe4),'then',_0x2f4a13(0xe2),_0x2f4a13(0xfa),'@nestjs/common',_0x2f4a13(0x109),_0x2f4a13(0xed),'userBalanceEntity','2ElpMXo','ModelsService','Repository',_0x2f4a13(0x112),_0x2f4a13(0xf5),_0x2f4a13(0x10a),'3zmglPU',_0x2f4a13(0xe5),_0x2f4a13(0xfc),'6836640BICzbC',_0x2f4a13(0xf7),_0x2f4a13(0xea),_0x2f4a13(0x111),_0x2f4a13(0xf4),_0x2f4a13(0x103),_0x2f4a13(0x106),_0x2f4a13(0xe8),_0x2f4a13(0x105),_0x2f4a13(0xf1),'forEach',_0x2f4a13(0xf9),'@nestjs/typeorm','globalConfigService',_0x2f4a13(0xeb),'@nestjs/schedule',_0x2f4a13(0xe7),_0x2f4a13(0x114),_0x2f4a13(0x10f),_0x2f4a13(0x108),_0x2f4a13(0xfd),'defineProperty',_0x2f4a13(0x10c),_0x2f4a13(0xf8),_0x2f4a13(0x100)];return _0x3e91=function(){return _0x515c9a;},_0x3e91();}var __decorate=this&&this[_0x2fd507(0x98)]||function(_0x4c040a,_0x34459a,_0x4322df,_0x455c6d){const _0x5026cd=_0x33cb,_0x23c4d3=_0x2fd507;var _0xbb4bf8=arguments[_0x23c4d3(0x95)],_0x285e79=_0xbb4bf8<0x3?_0x34459a:_0x455c6d===null?_0x455c6d=Object[_0x5026cd(0xff)](_0x34459a,_0x4322df):_0x455c6d,_0xaeefb9;if(typeof Reflect===_0x23c4d3(0x9a)&&typeof Reflect['decorate']===_0x23c4d3(0xb2))_0x285e79=Reflect[_0x23c4d3(0x9c)](_0x4c040a,_0x34459a,_0x4322df,_0x455c6d);else{for(var _0x4fc186=_0x4c040a[_0x5026cd(0xe5)]-0x1;_0x4fc186>=0x0;_0x4fc186--)if(_0xaeefb9=_0x4c040a[_0x4fc186])_0x285e79=(_0xbb4bf8<0x3?_0xaeefb9(_0x285e79):_0xbb4bf8>0x3?_0xaeefb9(_0x34459a,_0x4322df,_0x285e79):_0xaeefb9(_0x34459a,_0x4322df))||_0x285e79;}return _0xbb4bf8>0x3&&_0x285e79&&Object[_0x23c4d3(0xac)](_0x34459a,_0x4322df,_0x285e79),_0x285e79;},__metadata=this&&this[_0x312aa9(0x10d)]||function(_0x16ae7b,_0x3939e0){const _0x73f3fd=_0x312aa9,_0x4f253c=_0x2fd507;if(typeof Reflect===_0x4f253c(0x9a)&&typeof Reflect[_0x73f3fd(0xf9)]===_0x4f253c(0xb2))return Reflect[_0x4f253c(0xa2)](_0x16ae7b,_0x3939e0);},__param=this&&this[_0x2fd507(0xb3)]||function(_0x396841,_0x390245){return function(_0x2f9803,_0x2a1cc9){_0x390245(_0x2f9803,_0x2a1cc9,_0x396841);};};Object[_0x2fd507(0xac)](exports,_0x312aa9(0x101),{'value':!![]}),exports[_0x2fd507(0x93)]=void 0x0;const globalConfig_service_1=require('./../globalConfig/globalConfig.service'),common_1=require(_0x2fd507(0xb9)),schedule_1=require(_0x2fd507(0xa6)),userBalance_entity_1=require('../userBalance/userBalance.entity'),typeorm_1=require(_0x2fd507(0xa3)),typeorm_2=require(_0x2fd507(0xaf)),models_service_1=require('../models/models.service');let TaskService=class TaskService{constructor(_0x19b058,_0x14826d,_0x5cae31){const _0x2f5093=_0x2fd507;this[_0x2f5093(0xbc)]=_0x19b058,this[_0x2f5093(0xa4)]=_0x14826d,this[_0x2f5093(0xa8)]=_0x5cae31;}[_0x2fd507(0xb8)](){const _0x976804=_0x312aa9,_0x5b9891=_0x2fd507;common_1[_0x976804(0x10e)][_0x5b9891(0xa9)](_0x976804(0xf0),_0x5b9891(0x93)),this[_0x5b9891(0xa4)][_0x5b9891(0xa7)]();}async[_0x2fd507(0x92)](){const _0x46a7bf=_0x2fd507,_0x286daf=await this[_0x46a7bf(0xbc)][_0x46a7bf(0xb5)]({'where':{'expirationTime':(0x0,typeorm_2[_0x46a7bf(0xb0)])(new Date())}});if(!_0x286daf||!_0x286daf[_0x46a7bf(0x95)])return;_0x286daf[_0x46a7bf(0xa1)](_0x36eac7=>{const _0x1dcf86=_0x46a7bf;this[_0x1dcf86(0xbc)]['update']({'id':_0x36eac7['id']},{'expirationTime':null,'packageId':0x0,'memberModel3Count':0x0,'memberModel4Count':0x0,'memberDrawMjCount':0x0})[_0x1dcf86(0xb6)](_0x3b07c5=>{const _0x544d42=_0x33cb,_0x6b2365=_0x1dcf86;common_1[_0x544d42(0x10e)][_0x6b2365(0xa9)](_0x36eac7['id']+_0x6b2365(0x99),_0x6b2365(0x93));});});}};__decorate([(0x0,schedule_1[_0x2fd507(0x9f)])(schedule_1[_0x2fd507(0xa5)][_0x2fd507(0xb1)]),__metadata(_0x2fd507(0xbb),Function),__metadata(_0x2fd507(0x9b),[]),__metadata(_0x2fd507(0xb7),void 0x0)],TaskService[_0x2fd507(0xab)],_0x2fd507(0xb8),null),__decorate([(0x0,schedule_1[_0x312aa9(0x105)])(schedule_1[_0x2fd507(0xa5)][_0x312aa9(0xe1)]),__metadata(_0x2fd507(0xbb),Function),__metadata(_0x2fd507(0x9b),[]),__metadata(_0x2fd507(0xb7),Promise)],TaskService[_0x312aa9(0xfd)],_0x2fd507(0x92),null),TaskService=__decorate([(0x0,common_1[_0x2fd507(0xba)])(),__param(0x0,(0x0,typeorm_1[_0x312aa9(0x107)])(userBalance_entity_1[_0x312aa9(0xe3)])),__metadata(_0x2fd507(0x9b),[typeorm_2[_0x2fd507(0x90)],globalConfig_service_1[_0x2fd507(0xad)],models_service_1[_0x2fd507(0xbe)]])],TaskService),exports[_0x2fd507(0x93)]=TaskService;