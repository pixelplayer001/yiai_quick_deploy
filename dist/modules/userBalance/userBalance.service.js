'use strict';const _0x410a14=_0x3d8a;(function(_0x3b33f8,_0x4217b6){const _0x1b83af=_0x3d8a,_0x2265e5=_0x3b33f8();while(!![]){try{const _0x2265c8=-parseInt(_0x1b83af(0x1dc))/0x1+-parseInt(_0x1b83af(0x1a2))/0x2+-parseInt(_0x1b83af(0x175))/0x3*(-parseInt(_0x1b83af(0x1c3))/0x4)+-parseInt(_0x1b83af(0x13a))/0x5+parseInt(_0x1b83af(0x14c))/0x6+parseInt(_0x1b83af(0x162))/0x7*(parseInt(_0x1b83af(0x1d8))/0x8)+-parseInt(_0x1b83af(0x142))/0x9*(-parseInt(_0x1b83af(0x18f))/0xa);if(_0x2265c8===_0x4217b6)break;else _0x2265e5['push'](_0x2265e5['shift']());}catch(_0x23ca9e){_0x2265e5['push'](_0x2265e5['shift']());}}}(_0x3304,0xe2822));const _0x456bd4=_0x19fc;(function(_0xaba93e,_0x3bcf0d){const _0x3abc72=_0x3d8a,_0x3542de=_0x19fc,_0x1371fd=_0xaba93e();while(!![]){try{const _0x3e3629=-parseInt(_0x3542de(0x199))/0x1*(parseInt(_0x3542de(0x194))/0x2)+-parseInt(_0x3542de(0x1b9))/0x3*(parseInt(_0x3542de(0x14f))/0x4)+parseInt(_0x3542de(0x1be))/0x5*(-parseInt(_0x3542de(0x1a7))/0x6)+-parseInt(_0x3542de(0x195))/0x7*(-parseInt(_0x3542de(0x1ad))/0x8)+parseInt(_0x3542de(0x165))/0x9+parseInt(_0x3542de(0x122))/0xa+-parseInt(_0x3542de(0x171))/0xb*(-parseInt(_0x3542de(0x17d))/0xc);if(_0x3e3629===_0x3bcf0d)break;else _0x1371fd[_0x3abc72(0x19b)](_0x1371fd[_0x3abc72(0x165)]());}catch(_0x10dc63){_0x1371fd['push'](_0x1371fd[_0x3abc72(0x165)]());}}}(_0x2f8d,0xc6b66));var __decorate=this&&this[_0x456bd4(0x1b0)]||function(_0x489fca,_0x1af099,_0x57af9d,_0x37cd2e){const _0x5b186e=_0x456bd4;var _0x4edf53=arguments['length'],_0x4eafcb=_0x4edf53<0x3?_0x1af099:_0x37cd2e===null?_0x37cd2e=Object[_0x5b186e(0x1d9)](_0x1af099,_0x57af9d):_0x37cd2e,_0x560341;if(typeof Reflect==='object'&&typeof Reflect[_0x5b186e(0x172)]===_0x5b186e(0x15b))_0x4eafcb=Reflect[_0x5b186e(0x172)](_0x489fca,_0x1af099,_0x57af9d,_0x37cd2e);else{for(var _0x1db790=_0x489fca[_0x5b186e(0x18b)]-0x1;_0x1db790>=0x0;_0x1db790--)if(_0x560341=_0x489fca[_0x1db790])_0x4eafcb=(_0x4edf53<0x3?_0x560341(_0x4eafcb):_0x4edf53>0x3?_0x560341(_0x1af099,_0x57af9d,_0x4eafcb):_0x560341(_0x1af099,_0x57af9d))||_0x4eafcb;}return _0x4edf53>0x3&&_0x4eafcb&&Object[_0x5b186e(0x1aa)](_0x1af099,_0x57af9d,_0x4eafcb),_0x4eafcb;},__metadata=this&&this['__metadata']||function(_0x499fd8,_0x14be25){const _0x38581e=_0x3d8a,_0x2de583=_0x456bd4;if(typeof Reflect===_0x38581e(0x159)&&typeof Reflect[_0x2de583(0x1a0)]===_0x2de583(0x15b))return Reflect[_0x2de583(0x1a0)](_0x499fd8,_0x14be25);},__param=this&&this[_0x456bd4(0x1cd)]||function(_0x2e59c3,_0x1da415){return function(_0x3d889b,_0x151fe3){_0x1da415(_0x3d889b,_0x151fe3,_0x2e59c3);};};function _0x19fc(_0x1e6323,_0x26f5ca){const _0x4dcb03=_0x2f8d();return _0x19fc=function(_0x400432,_0x2299e9){_0x400432=_0x400432-0x11e;let _0x273a6b=_0x4dcb03[_0x400432];return _0x273a6b;},_0x19fc(_0x1e6323,_0x26f5ca);}function _0x3d8a(_0x76caa7,_0xf4bf37){const _0x330493=_0x3304();return _0x3d8a=function(_0x3d8a9a,_0x58ad83){_0x3d8a9a=_0x3d8a9a-0x138;let _0x12409c=_0x330493[_0x3d8a9a];return _0x12409c;},_0x3d8a(_0x76caa7,_0xf4bf37);}Object[_0x456bd4(0x1aa)](exports,_0x456bd4(0x12d),{'value':!![]}),exports[_0x410a14(0x1ad)]=void 0x0;const globalConfig_service_1=require(_0x410a14(0x146)),typeorm_1=require(_0x456bd4(0x152)),balance_entity_1=require(_0x456bd4(0x141)),common_1=require(_0x456bd4(0x1b3)),typeorm_2=require(_0x456bd4(0x1db)),balance_constant_1=require(_0x456bd4(0x191)),accountLog_entity_1=require(_0x456bd4(0x154)),utils_1=require(_0x456bd4(0x157)),config_entity_1=require(_0x410a14(0x14d)),cramiPackage_entity_1=require(_0x410a14(0x1c9)),userBalance_entity_1=require(_0x456bd4(0x184)),date_1=require(_0x410a14(0x197)),user_entity_1=require(_0x456bd4(0x14a)),salesUsers_entity_1=require(_0x456bd4(0x1e0)),sales_service_1=require(_0x456bd4(0x1ae)),whiteList_entity_1=require(_0x456bd4(0x138)),fingerprint_entity_1=require(_0x456bd4(0x135)),chatLog_entity_1=require(_0x410a14(0x1f4)),chatGroup_entity_1=require(_0x456bd4(0x15e)),midjourney_entity_1=require(_0x456bd4(0x11f));function _0x3304(){const _0xc0a90d=['debug','27990dtzxjJ','invitedGuestSendDrawMjCount','cramiPackageEntity','catch','findAndCount','HttpStatus','旧账户信息迁移失败','reduce','../../common/utils/date','design:paramtypes','isUpdatedToday','upgradeStatus','push','useModel3Count','../user/user.entity','充值失败！','ChatLogEntity','update','total','860938XHTsbC','useDrawMjToken','save','__esModule','REG_GIFT','>\x20或购买专属套餐\x20！','../chatgpt/whiteList.entity','userBalanceEntity','configVal','HttpException','../../common/utils','UserBalanceService','salesUsersEntity','weight','DESC','queryUserBalanceByIds','WhiteListEntity','chatGroupEntity','day','user','1413qpNiJK','registerSendDrawMjCount','addBalanceToUser','Logger','midjourneyEntity','visitorModel4Num','drawMjCount','./accountLog.entity','formatCreateOrUpdateDate','typeorm','当前套餐不存在！','length','useModel4Count','52ublsdC','36gtvRBh','./balance.entity','GlobalConfigService','queryUserBalance','visitor','../crami/cramiPackage.entity','writeOldBalanceToNewTable','缺失当前用户账户记录！','error:\x20','PAYMENT_REQUIRED','ChatGroupEntity','LessThan','memberModel3Count','非法操作、当前充值套餐暂不存在！','充值的工单信息:','@nestjs/typeorm','SalesService','getConfigs','3148OxPvMR','./fingerprint.entity','100376rklTtn','useModel4Token','13202550NWejbl','globalConfigService','495355pXolnK','sumModel3Count','headers','MidjourneyEntity','inviteGiveSendDrawMjCount','registerSendModel3Count','phone','firstRregisterSendModel3Count','email','useCount','MjCount','InjectRepository','registerSendModel4Count','createBaseUserBalance','visitorModel3Num','chatLogEntity','validateBalance','model3','inviteGiveSendModel4Count','defineProperty','SalesUsersEntity','days','userId','1165594xVhbVv','../chatLog/chatLog.entity','toFixed','function','includes','odel4','16lXdfEd','memberDrawMjCount','hideString','memberModel4Count','旧账户信息迁移成功','model4','6jqtVsb','configKey','format','BalanceService','createRandomUid','then','add','3854580PKhlQj','ConfigEntity','setConfig','super','invitedGuestSendModel3Count','packageId','RechargeType','getOwnPropertyDescriptor','1017oORhyf','expirationTime','firstRegisterSendRank','inviteGiveSendModel3Count','../globalConfig/globalConfig.service','salesService','firstRregisterSendDrawMjCount','查询当前用户余额失败！','BAD_REQUEST','updatedAt','2716998nEdxOn','../globalConfig/config.entity','model4Count','forEach','findOne','addBalanceToOrder','2kPsHsh','refundMjBalance','model3Count','commissionAmount','accountLogEntity','firstRegisterSendStatus','用户充值失败！','object','whiteListEntity','expireDateCn','充值失败','您的账户余额不足,如果想继续体验服务,请联系管理员\x20<VX:\x20','balanceEntity','Injectable','find','registerSendStatus','679jWzdvj','消费余额失败！','BalanceEntity','shift','./userBalance.entity','validateVisitorBalance','您已经升级过了、请勿重复操作！','../sales/salesUsers.entity','getFullYear','count','inviteSendStatus','saveRecordRechargeLog','UserEntity','mjDraw','INVITE_GIFT','userEntity','UserBalanceEntity','__param','__decorate','147309sYWRYl','log','vxNumber','SCAN_PAY','username','../../common/constants/balance.constant','fingerprintLogEntity','avatar','affected','getVisitorCount','odel3','useModel3Token','deductFromBalance','getRechargeLog','YYYY-MM-DD','upgradeBalance','getAccountLog','visitorMJNum','当前用户不存在,记录充值日志异常','configEntity','decorate','Repository','status','YYYY-MM-DD\x20HH:mm:ss','isInteger'];_0x3304=function(){return _0xc0a90d;};return _0x3304();}function _0x2f8d(){const _0x5b6d29=_0x410a14,_0x2999c7=[_0x5b6d29(0x15c),_0x5b6d29(0x1f3),'644035XhPNEo','invitedGuestSendModel4Count',_0x5b6d29(0x176),'inviteGiveSendModel3Count',_0x5b6d29(0x152),_0x5b6d29(0x1e8),_0x5b6d29(0x161),_0x5b6d29(0x1e3),_0x5b6d29(0x194),_0x5b6d29(0x1fe),_0x5b6d29(0x181),'metadata',_0x5b6d29(0x1a0),_0x5b6d29(0x13f),_0x5b6d29(0x200),'createSalesRecords',_0x5b6d29(0x1c8),_0x5b6d29(0x1ee),_0x5b6d29(0x1ff),_0x5b6d29(0x1ad),_0x5b6d29(0x14a),_0x5b6d29(0x1ef),_0x5b6d29(0x157),_0x5b6d29(0x1ca),_0x5b6d29(0x1f9),'../sales/sales.service',_0x5b6d29(0x1eb),_0x5b6d29(0x174),_0x5b6d29(0x151),_0x5b6d29(0x16d),'@nestjs/common',_0x5b6d29(0x138),'addBalanceToNewUser',_0x5b6d29(0x149),_0x5b6d29(0x1b2),_0x5b6d29(0x16c),_0x5b6d29(0x1b6),_0x5b6d29(0x19a),'formatDate',_0x5b6d29(0x199),_0x5b6d29(0x18b),'3298915oVeDxM',_0x5b6d29(0x140),_0x5b6d29(0x1bc),'model4Count','HttpException',_0x5b6d29(0x1e5),_0x5b6d29(0x1e7),_0x5b6d29(0x158),_0x5b6d29(0x1d0),'>\x20或购买专属套餐\x20！',_0x5b6d29(0x183),_0x5b6d29(0x187),_0x5b6d29(0x1ba),'Repository',_0x5b6d29(0x155),_0x5b6d29(0x173),_0x5b6d29(0x16b),_0x5b6d29(0x203),_0x5b6d29(0x172),'getMonth',_0x5b6d29(0x19c),_0x5b6d29(0x1de),_0x5b6d29(0x1f1),_0x5b6d29(0x1fc),_0x5b6d29(0x168),_0x5b6d29(0x195),_0x5b6d29(0x17f),_0x5b6d29(0x141),'查询用户账户失败！',_0x5b6d29(0x1bf),_0x5b6d29(0x156),_0x5b6d29(0x1e9),_0x5b6d29(0x185),_0x5b6d29(0x1ea),_0x5b6d29(0x169),_0x5b6d29(0x1cf),'inheritVisitorData','../midjourney/midjourney.entity',_0x5b6d29(0x1b8),_0x5b6d29(0x15f),_0x5b6d29(0x1da),_0x5b6d29(0x1c6),_0x5b6d29(0x1ec),_0x5b6d29(0x163),_0x5b6d29(0x191),_0x5b6d29(0x1d5),_0x5b6d29(0x171),'getDate',_0x5b6d29(0x198),_0x5b6d29(0x154),_0x5b6d29(0x1c7),_0x5b6d29(0x1a5),'registerSendDrawMjCount',_0x5b6d29(0x1b4),_0x5b6d29(0x18c),_0x5b6d29(0x170),_0x5b6d29(0x13b),'注册赠送失败,请联系管理员！',_0x5b6d29(0x1a9),_0x5b6d29(0x1d7),_0x5b6d29(0x1a6),_0x5b6d29(0x1db),_0x5b6d29(0x1a8),_0x5b6d29(0x18d),_0x5b6d29(0x201),'firstRregisterSendModel4Count',_0x5b6d29(0x1b1),_0x5b6d29(0x1a3),_0x5b6d29(0x144),_0x5b6d29(0x193),_0x5b6d29(0x1d9),_0x5b6d29(0x1c5),_0x5b6d29(0x1dd),_0x5b6d29(0x184),_0x5b6d29(0x1a4),_0x5b6d29(0x1d2),_0x5b6d29(0x1a1),_0x5b6d29(0x1b9),_0x5b6d29(0x1e0),_0x5b6d29(0x15a),_0x5b6d29(0x19d),_0x5b6d29(0x1cb),_0x5b6d29(0x1f7),'rechargeType',_0x5b6d29(0x1c0),_0x5b6d29(0x1d6),_0x5b6d29(0x1ed),_0x5b6d29(0x19e),_0x5b6d29(0x1d3),_0x5b6d29(0x16f),_0x5b6d29(0x1bd),_0x5b6d29(0x177),_0x5b6d29(0x1f5),_0x5b6d29(0x1ac),_0x5b6d29(0x179),_0x5b6d29(0x13d),_0x5b6d29(0x1ce),_0x5b6d29(0x1f6),_0x5b6d29(0x1b3),_0x5b6d29(0x17b),'../chatGroup/chatGroup.entity',_0x5b6d29(0x1d4),'salesService',_0x5b6d29(0x1aa),_0x5b6d29(0x153),_0x5b6d29(0x1c2),_0x5b6d29(0x180),'11405070Cepzgc',_0x5b6d29(0x1e1),_0x5b6d29(0x1fb),_0x5b6d29(0x188),_0x5b6d29(0x17d),'saveCommissionAmount',_0x5b6d29(0x16e),_0x5b6d29(0x14f),'PAYMENT_REQUIRED',_0x5b6d29(0x1be),_0x5b6d29(0x15d),_0x5b6d29(0x167),'874445RmHKtN',_0x5b6d29(0x189),'FingerprintLogEntity',_0x5b6d29(0x16a),'memberDrawMjCount','查询用户账户信息失败！',_0x5b6d29(0x1e4),_0x5b6d29(0x1f2),_0x5b6d29(0x196),_0x5b6d29(0x1af),_0x5b6d29(0x1b0),'goodsId',_0x5b6d29(0x1c4),'REFER_GIFT',_0x5b6d29(0x15e),'findOne',_0x5b6d29(0x1cc),_0x5b6d29(0x139),_0x5b6d29(0x18e),_0x5b6d29(0x166),'---','user',_0x5b6d29(0x202),'default',_0x5b6d29(0x160),_0x5b6d29(0x1e2),_0x5b6d29(0x1c1),_0x5b6d29(0x1df),'缺失当前套餐ID、充值失败！',_0x5b6d29(0x1ae),_0x5b6d29(0x15b),_0x5b6d29(0x13e),_0x5b6d29(0x17a),'expirationTime'];return _0x2f8d=function(){return _0x2999c7;},_0x2f8d();}let UserBalanceService=class UserBalanceService{constructor(_0x28c683,_0x1f61a5,_0x48cb16,_0x18d9f2,_0x2bd8ac,_0x202cde,_0xa90169,_0x260926,_0x32fffe,_0x53a527,_0x21bc50,_0x57f106,_0x43f869,_0x88a3ea){const _0x48137f=_0x410a14,_0x192362=_0x456bd4;this[_0x192362(0x17f)]=_0x28c683,this[_0x48137f(0x1a9)]=_0x1f61a5,this[_0x192362(0x1dc)]=_0x48cb16,this[_0x192362(0x126)]=_0x18d9f2,this[_0x192362(0x168)]=_0x2bd8ac,this[_0x192362(0x128)]=_0x202cde,this[_0x192362(0x18e)]=_0xa90169,this[_0x192362(0x149)]=_0x260926,this[_0x192362(0x15d)]=_0x32fffe,this[_0x192362(0x15c)]=_0x53a527,this[_0x192362(0x1af)]=_0x21bc50,this[_0x48137f(0x1ba)]=_0x57f106,this[_0x192362(0x160)]=_0x43f869,this[_0x192362(0x137)]=_0x88a3ea;}async[_0x456bd4(0x1b5)](_0x12f7d3,_0xa2b56d){const _0x3b4e27=_0x410a14,_0x467176=_0x456bd4;try{const _0x4c7dce=await this[_0x3b4e27(0x188)][_0x3b4e27(0x160)]({'where':{'configKey':(0x0,typeorm_2['In'])([_0x467176(0x19b),_0x467176(0x166),_0x467176(0x19a),_0x3b4e27(0x1b7),_0x467176(0x1ab),_0x3b4e27(0x144),_0x467176(0x19c),_0x467176(0x13b),'firstRregisterSendDrawMjCount',_0x467176(0x1b8),_0x3b4e27(0x145),_0x467176(0x1a6),_0x467176(0x148),_0x467176(0x190),_0x3b4e27(0x190),_0x467176(0x196)])}}),_0x2ea40e=_0x4c7dce[_0x467176(0x179)]((_0x388fa8,_0x39e2e7)=>{const _0x36f241=_0x467176,_0x396d71=Number(_0x39e2e7[_0x36f241(0x161)]),_0x3a1095=Number[_0x36f241(0x139)](_0x396d71)&&_0x396d71>0x0?_0x396d71:0x0;return _0x388fa8[_0x39e2e7[_0x36f241(0x1a3)]]=_0x3a1095,_0x388fa8;},{});let _0x12de6d=0x0,_0x31b1d9=0x0,_0x3b5750=0x0;_0x2ea40e[_0x467176(0x19b)]===0x1&&(_0x12de6d=_0x12de6d+_0x2ea40e['registerSendModel3Count'],_0x31b1d9=_0x31b1d9+_0x2ea40e[_0x467176(0x19a)],_0x3b5750=_0x3b5750+_0x2ea40e[_0x467176(0x12e)]),_0x2ea40e[_0x467176(0x19b)]===0x1&&_0x2ea40e[_0x3b4e27(0x157)]===0x1&&_0x12f7d3<=_0x2ea40e[_0x467176(0x13e)]&&(_0x12de6d=_0x12de6d+_0x2ea40e[_0x467176(0x19c)],_0x31b1d9=_0x31b1d9+_0x2ea40e[_0x467176(0x13b)],_0x3b5750=_0x3b5750+_0x2ea40e[_0x3b4e27(0x148)]),await this[_0x3b4e27(0x16d)]({'userId':_0x12f7d3,'rechargeType':balance_constant_1[_0x467176(0x1bf)][_0x467176(0x136)],'model3Count':_0x12de6d,'drawMjCount':_0x3b5750,'model4Count':_0x31b1d9}),_0xa2b56d&&(Number(_0x2ea40e[_0x467176(0x1b8)])===0x1&&(_0x12de6d=_0x12de6d+Number(_0x2ea40e[_0x467176(0x190)]),_0x31b1d9=_0x31b1d9+Number(_0x2ea40e[_0x467176(0x196)]),_0x3b5750=_0x3b5750+Number(_0x2ea40e[_0x3b4e27(0x190)]),await this[_0x467176(0x1b2)]({'userId':_0x12f7d3,'rechargeType':balance_constant_1[_0x467176(0x1bf)][_0x467176(0x131)],'model3Count':_0x2ea40e[_0x467176(0x190)],'model4Count':_0x2ea40e[_0x467176(0x196)],'drawMjCount':_0x2ea40e['invitedGuestSendDrawMjCount']}),await this[_0x467176(0x120)](_0xa2b56d,{'model3Count':_0x2ea40e[_0x467176(0x198)],'model4Count':_0x2ea40e['inviteGiveSendModel4Count'],'drawMjCount':_0x2ea40e[_0x467176(0x148)]}),await this[_0x3b4e27(0x16d)]({'userId':_0xa2b56d,'rechargeType':balance_constant_1[_0x467176(0x1bf)][_0x467176(0x17e)],'model3Count':_0x2ea40e[_0x3b4e27(0x145)],'model4Count':_0x2ea40e[_0x467176(0x1a6)],'drawMjCount':_0x2ea40e[_0x467176(0x148)]}))),await this[_0x467176(0x134)][_0x3b4e27(0x1a4)]({'userId':_0x12f7d3,'model3Count':_0x12de6d,'model4Count':_0x31b1d9,'drawMjCount':_0x3b5750,'useTokens':0x0});}catch(_0xee5910){console[_0x3b4e27(0x176)](_0x3b4e27(0x1cc),_0xee5910);throw new common_1[(_0x467176(0x1c2))](_0x467176(0x133),common_1['HttpStatus'][_0x467176(0x1a9)]);}}async[_0x456bd4(0x124)](_0x42422a,_0x2a2944,_0x33326b){const _0x17ca4d=_0x410a14,_0x35c403=_0x456bd4,{id:_0x4d2a8f,role:_0x84ca12}=_0x42422a[_0x35c403(0x186)];let _0x3717f4=await this['userBalanceEntity'][_0x35c403(0x180)]({'where':{'userId':_0x4d2a8f}});!_0x3717f4&&(_0x3717f4=await this[_0x35c403(0x1dd)](_0x4d2a8f));if(_0x84ca12===_0x35c403(0x1a5))return this[_0x35c403(0x170)](_0x42422a,_0x2a2944,_0x33326b);const _0x139aae=await this[_0x35c403(0x168)][_0x35c403(0x180)]({'where':{'configKey':_0x35c403(0x155)}}),_0x550e6f=_0x139aae?_0x139aae[_0x35c403(0x161)]:_0x35c403(0x185),_0x1c43a3=_0x2a2944===_0x35c403(0x150)?_0x35c403(0x1c6):_0x2a2944===_0x35c403(0x19e)?_0x35c403(0x1d5):_0x2a2944===_0x35c403(0x153)?_0x35c403(0x175):null,_0x4f03ba=_0x2a2944===_0x17ca4d(0x1ed)?_0x35c403(0x12b):_0x2a2944===_0x35c403(0x19e)?'model4Count':_0x2a2944===_0x35c403(0x153)?_0x17ca4d(0x1bc):null;if(_0x3717f4[_0x35c403(0x1a2)]&&_0x3717f4[_0x1c43a3]<_0x33326b){if(_0x3717f4[_0x4f03ba]<_0x33326b)throw new common_1[(_0x35c403(0x1c2))](_0x35c403(0x16f)+_0x550e6f+_0x35c403(0x1c7),common_1[_0x35c403(0x19d)][_0x35c403(0x16d)]);}if(!_0x3717f4[_0x17ca4d(0x13f)]&&_0x3717f4[_0x4f03ba]<_0x33326b)throw new common_1[(_0x35c403(0x1c2))](_0x17ca4d(0x15d)+_0x550e6f+_0x17ca4d(0x1a7),common_1[_0x35c403(0x19d)][_0x35c403(0x16d)]);return _0x3717f4;}async[_0x456bd4(0x170)](_0xcbf21c,_0x4c457e,_0x2df4fd){const _0x1cea61=_0x410a14,_0x3765af=_0x456bd4,{id:_0x20f451}=_0xcbf21c[_0x3765af(0x186)],_0x2bf82c=_0x4c457e===_0x3765af(0x150)?_0x3765af(0x12b):_0x4c457e===_0x1cea61(0x1fe)?_0x1cea61(0x14e):_0x4c457e===_0x3765af(0x153)?_0x3765af(0x1c0):null,_0x2803e6=new Date(),_0x41cb79=await this[_0x3765af(0x15d)][_0x3765af(0x180)]({'where':{'fingerprint':_0x20f451}}),{visitorModel3Num:_0x51c650,visitorModel4Num:_0xbc3388,visitorMJNum:_0x3fab99}=await this[_0x3765af(0x137)][_0x3765af(0x127)]([_0x3765af(0x1df),_0x1cea61(0x1bb),_0x1cea61(0x186)]),_0x54e4d6={'model3Count':_0x51c650?Number(_0x51c650):0x0,'model4Count':_0xbc3388?Number(_0xbc3388):0x0,'drawMjCount':_0x3fab99?Number(_0x3fab99):0x0};if(!_0x41cb79){const _0x38fa41={'fingerprint':_0x20f451,'model3Count':0x0,'model4Count':0x0,'drawMjCount':0x0};_0x38fa41[_0x2bf82c]=_0x38fa41[_0x2bf82c]+_0x2df4fd;if(_0x38fa41[_0x2bf82c]>_0x54e4d6[_0x2bf82c])throw new common_1[(_0x1cea61(0x1ab))]('今日当前类型免费额度已经使用完毕、建议您注册账户体验更加完整的服务内容！',common_1[_0x3765af(0x19d)][_0x1cea61(0x1cd)]);else return await this[_0x3765af(0x15d)][_0x1cea61(0x1a4)](_0x38fa41),!![];}else{const {model3Count:_0x3aff36,model4Count:_0x4505a9,drawMjCount:_0x1a1973}=_0x41cb79;let _0x1cba28={'model3Count':_0x3aff36,'model4Count':_0x4505a9,'drawMjCount':_0x1a1973};const _0x1cceb8=Number(new Date(_0x41cb79[_0x1cea61(0x14b)])),_0x5afddb=this[_0x3765af(0x1bc)](_0x1cceb8);_0x5afddb?_0x1cba28[_0x2bf82c]=_0x1cba28[_0x2bf82c]+_0x2df4fd:(_0x1cba28={'model3Count':0x0,'model4Count':0x0,'drawMjCount':0x0},_0x1cba28[_0x2bf82c]=_0x1cba28[_0x2bf82c]+_0x2df4fd);if(_0x1cba28[_0x2bf82c]>_0x54e4d6[_0x2bf82c])throw new common_1[(_0x3765af(0x1c2))]('今日当前类型免费额度已经使用完毕、建议您注册账户体验更加完整的服务内容！',common_1[_0x3765af(0x19d)][_0x3765af(0x16d)]);else return await this[_0x3765af(0x15d)][_0x3765af(0x1a1)]({'fingerprint':_0x20f451},_0x1cba28),!![];}}['isUpdatedToday'](_0x1b46d1){const _0x54ad24=_0x456bd4,_0x5a545f=new Date(),_0x4d3ba6=new Date(_0x5a545f[_0x54ad24(0x174)](),_0x5a545f[_0x54ad24(0x1d1)](),_0x5a545f[_0x54ad24(0x129)]());return _0x1b46d1>=_0x4d3ba6;}async[_0x410a14(0x181)](_0x45507e,_0x342d5e,_0x12c66d,_0x348fdc=0x0){const _0x28870a=_0x410a14,_0x13757a=_0x456bd4,_0x1a4012=await this[_0x13757a(0x134)][_0x13757a(0x180)]({'where':{'userId':_0x45507e}});if(!_0x1a4012)throw new common_1[(_0x13757a(0x1c2))](_0x13757a(0x14b),common_1[_0x13757a(0x19d)][_0x13757a(0x1a9)]);const _0x1fa0db=_0x342d5e===_0x13757a(0x150)?_0x13757a(0x1c6):_0x342d5e===_0x13757a(0x19e)?_0x13757a(0x1d5):_0x342d5e===_0x28870a(0x16f)?_0x13757a(0x175):null,_0x11cd5e=_0x342d5e===_0x13757a(0x150)?'model3Count':_0x342d5e===_0x13757a(0x19e)?_0x13757a(0x1c1):_0x342d5e===_0x28870a(0x16f)?_0x13757a(0x1c0):null,_0x1b0ddf=_0x1a4012[_0x13757a(0x1a2)]&&_0x1a4012[_0x1fa0db]<_0x12c66d?_0x11cd5e:_0x1a4012[_0x13757a(0x1a2)]?_0x1fa0db:_0x11cd5e;let _0x592b38=null;_0x1b0ddf[_0x13757a(0x14c)](_0x13757a(0x1d8))&&(_0x592b38=_0x13757a(0x164)),_0x1b0ddf[_0x13757a(0x14c)](_0x28870a(0x1f8))&&(_0x592b38=_0x13757a(0x140)),_0x1b0ddf[_0x13757a(0x14c)](_0x28870a(0x1e6))&&(_0x592b38=_0x13757a(0x13d));const _0x5cd5a4={[_0x1b0ddf]:_0x1a4012[_0x1b0ddf]-_0x12c66d<0x0?0x0:_0x1a4012[_0x1b0ddf]-_0x12c66d,[_0x592b38]:_0x1a4012[_0x592b38]+_0x348fdc};_0x592b38===_0x13757a(0x164)&&(_0x5cd5a4[_0x13757a(0x1d2)]=_0x1a4012[_0x28870a(0x19c)]+_0x12c66d),_0x592b38===_0x28870a(0x1d9)&&(_0x5cd5a4[_0x13757a(0x163)]=_0x1a4012[_0x13757a(0x163)]+_0x12c66d);const _0x366143=await this[_0x13757a(0x134)][_0x13757a(0x1a1)]({'userId':_0x45507e},_0x5cd5a4);if(_0x366143[_0x13757a(0x169)]===0x0)throw new common_1[(_0x13757a(0x1c2))](_0x13757a(0x125),common_1[_0x28870a(0x194)][_0x13757a(0x1a9)]);}async[_0x456bd4(0x12c)](_0x226da5){const _0x261e66=_0x410a14,_0x587238=_0x456bd4;try{const _0x51ad44=await this[_0x587238(0x134)][_0x587238(0x180)]({'where':{'userId':_0x226da5},'select':['packageId',_0x587238(0x12b),_0x587238(0x1c1),_0x587238(0x1c0),_0x587238(0x1c6),_0x587238(0x1d5),_0x587238(0x175),_0x587238(0x1d2),_0x587238(0x163),_0x587238(0x164),_0x587238(0x140),_0x587238(0x13d),_0x587238(0x192)]});if(!_0x51ad44){const _0x5077df=await this[_0x261e66(0x1e9)](_0x226da5);if(_0x5077df)return await this[_0x587238(0x12c)](_0x226da5);else throw new common_1[(_0x261e66(0x1ab))](_0x587238(0x1b6),common_1[_0x261e66(0x194)][_0x587238(0x1a9)]);}return _0x51ad44[_0x587238(0x142)]=_0x51ad44[_0x587238(0x1a2)]?_0x51ad44[_0x587238(0x12b)]+_0x51ad44[_0x587238(0x1c6)]:_0x51ad44[_0x587238(0x12b)],_0x51ad44['sumModel4Count']=_0x51ad44[_0x587238(0x1a2)]?_0x51ad44[_0x587238(0x1c1)]+_0x51ad44[_0x587238(0x1d5)]:_0x51ad44[_0x261e66(0x14e)],_0x51ad44['sumDrawMjCount']=_0x51ad44['packageId']?_0x51ad44[_0x587238(0x1c0)]+_0x51ad44[_0x261e66(0x1fa)]:_0x51ad44[_0x587238(0x1c0)],_0x51ad44[_0x587238(0x192)]=_0x51ad44['expirationTime']?(0x0,date_1[_0x587238(0x1bb)])(_0x51ad44[_0x261e66(0x143)],_0x587238(0x1c8)):null,_0x51ad44;}catch(_0x1cee3b){console['log']('error:\x20',_0x1cee3b);}}async[_0x456bd4(0x1b2)](_0x529b18){const _0x31f6ce=_0x410a14,_0x25d25d=_0x456bd4,{userId:_0x2635ae,rechargeType:_0xdd750c,model3Count:_0x1e7f59,model4Count:_0x572fcd,drawMjCount:_0x5577e3,days:days=-0x1,pkgName:pkgName='',extent:extent=''}=_0x529b18;if(!_0x2635ae)throw new common_1[(_0x25d25d(0x1c2))](_0x25d25d(0x1c9),common_1[_0x25d25d(0x19d)][_0x25d25d(0x1a9)]);const _0x11189a=(0x0,utils_1[_0x25d25d(0x1cf)])();return await this[_0x31f6ce(0x156)][_0x25d25d(0x144)]({'userId':_0x2635ae,'rechargeType':_0xdd750c,'model3Count':_0x1e7f59,'model4Count':_0x572fcd,'drawMjCount':_0x5577e3,'days':days,'extent':extent,'uid':_0x11189a,'pkgName':pkgName});}async[_0x456bd4(0x1dd)](_0x9ca93b,_0x5481cf={}){const _0x2f1865=_0x456bd4,{model3Count:model3Count=0x0,model4Count:model4Count=0x0,drawMjCount:drawMjCount=0x0}=_0x5481cf,_0x388892=await this[_0x2f1865(0x134)][_0x2f1865(0x180)]({'where':{'userId':_0x9ca93b}});if(_0x388892)throw new common_1[(_0x2f1865(0x1c2))]('当前用户无需创建账户信息！',common_1[_0x2f1865(0x19d)][_0x2f1865(0x1a9)]);return await this[_0x2f1865(0x134)]['save']({'userId':_0x9ca93b,'model3Count':model3Count,'model4Count':model4Count,'drawMjCount':drawMjCount});}async[_0x456bd4(0x120)](_0x200ade,_0x34b4a5,_0x302f0e=-0x1){const _0x528ec8=_0x410a14,_0xef599f=_0x456bd4;try{const _0x4e055d=await this[_0xef599f(0x134)][_0xef599f(0x180)]({'where':{'userId':_0x200ade}})||await this[_0xef599f(0x1dd)](_0x200ade);if(!_0x4e055d)throw new common_1[(_0xef599f(0x1c2))](_0xef599f(0x176),common_1[_0xef599f(0x19d)][_0x528ec8(0x14a)]);const {model3Count:_0x2feb37,model4Count:_0x38296b,drawMjCount:_0x3954fb,memberModel3Count:_0x46f6a7,memberModel4Count:_0x50c6f1,memberDrawMjCount:_0x3a37de}=_0x4e055d;let _0x33a5de={};if(_0x302f0e>0x0){const {packageId:_0x2f1209}=_0x34b4a5;if(!_0x2f1209)throw new common_1[(_0x528ec8(0x1ab))](_0xef599f(0x18d),common_1[_0xef599f(0x19d)][_0x528ec8(0x14a)]);const _0xb5adb4=await this[_0xef599f(0x126)][_0xef599f(0x180)]({'where':{'id':_0x2f1209}});if(!_0xb5adb4)throw new common_1[(_0xef599f(0x1c2))](_0xef599f(0x14e),common_1['HttpStatus'][_0xef599f(0x1a9)]);const {weight:_0x4fbea2}=_0xb5adb4;if(!_0x4e055d[_0xef599f(0x1a2)])_0x33a5de={'memberModel3Count':_0x2feb37+_0x34b4a5[_0xef599f(0x12b)],'memberModel4Count':_0x38296b+_0x34b4a5[_0xef599f(0x1c1)],'memberDrawMjCount':_0x3954fb+_0x34b4a5[_0xef599f(0x1c0)],'expirationTime':(0x0,date_1[_0xef599f(0x188)])()[_0x528ec8(0x139)](_0x302f0e>0x0?_0x302f0e:0x0,_0xef599f(0x12f))[_0xef599f(0x13a)](_0x528ec8(0x18c)),'packageId':_0x2f1209};else{const _0x44ebf7=await this[_0xef599f(0x126)][_0xef599f(0x180)]({'where':{'id':_0x4e055d[_0xef599f(0x1a2)]}});_0x4fbea2>=_0x44ebf7['weight']&&(_0x33a5de={'memberModel3Count':_0x46f6a7+_0x34b4a5[_0xef599f(0x12b)],'memberModel4Count':_0x50c6f1+_0x34b4a5[_0xef599f(0x1c1)],'memberDrawMjCount':_0x3a37de+_0x34b4a5[_0xef599f(0x1c0)],'expirationTime':(0x0,date_1[_0xef599f(0x188)])(_0x4e055d[_0xef599f(0x192)])[_0xef599f(0x182)](_0x302f0e>0x0?_0x302f0e:0x0,_0xef599f(0x12f))[_0xef599f(0x13a)](_0xef599f(0x130)),'packageId':_0x2f1209}),_0x4fbea2<_0x44ebf7[_0xef599f(0x17a)]&&(_0x33a5de={'memberModel3Count':_0x46f6a7+_0x34b4a5[_0xef599f(0x12b)],'memberModel4Count':_0x50c6f1+_0x34b4a5[_0xef599f(0x1c1)],'memberDrawMjCount':_0x3a37de+_0x34b4a5[_0x528ec8(0x1bc)]});}}_0x302f0e<=0x0&&(_0x33a5de={'model3Count':_0x2feb37+_0x34b4a5[_0x528ec8(0x154)],'model4Count':_0x38296b+_0x34b4a5[_0xef599f(0x1c1)],'drawMjCount':_0x3954fb+_0x34b4a5[_0xef599f(0x1c0)]});const _0x1f645c=await this['userBalanceEntity'][_0xef599f(0x1a1)]({'userId':_0x200ade},_0x33a5de);if(_0x1f645c[_0xef599f(0x169)]===0x0)throw new common_1[(_0xef599f(0x1c2))](_0x200ade+_0xef599f(0x193),common_1[_0xef599f(0x19d)][_0xef599f(0x1a9)]);}catch(_0x3be511){console[_0x528ec8(0x176)](_0xef599f(0x181),_0x3be511);throw new common_1[(_0xef599f(0x1c2))](_0xef599f(0x1c5),common_1[_0xef599f(0x19d)][_0xef599f(0x1a9)]);}}async[_0x456bd4(0x1b1)](_0x2e1d1d){const _0x551d36=_0x410a14,_0x2d662f=_0x456bd4;console[_0x2d662f(0x197)](_0x2d662f(0x145),_0x2e1d1d);try{const {userId:_0x5bfefb,goodsId:_0x2c11c9}=_0x2e1d1d,_0x5679ce=await this[_0x2d662f(0x126)][_0x2d662f(0x180)]({'where':{'id':_0x2e1d1d[_0x2d662f(0x17c)],'status':0x1}});if(!_0x5679ce)throw new common_1[(_0x2d662f(0x1c2))](_0x551d36(0x1d1),common_1[_0x551d36(0x194)][_0x2d662f(0x1a9)]);const {model3Count:_0x290c16,model4Count:_0x31f0c7,drawMjCount:_0x481972,days:_0x4b6c1b,name:_0x1f20db}=_0x5679ce,_0x398ee7={'model3Count':_0x290c16,'model4Count':_0x31f0c7,'drawMjCount':_0x481972,'days':_0x4b6c1b,'packageId':_0x2e1d1d[_0x2d662f(0x17c)]};await this[_0x2d662f(0x120)](_0x5bfefb,_0x398ee7,_0x4b6c1b),await this[_0x2d662f(0x1b2)]({'userId':_0x5bfefb,'rechargeType':balance_constant_1[_0x2d662f(0x1bf)][_0x551d36(0x178)],'model3Count':_0x290c16,'model4Count':_0x31f0c7,'drawMjCount':_0x481972,'pkgName':_0x1f20db,'days':_0x4b6c1b});const _0x43bd5c=await this[_0x2d662f(0x128)][_0x551d36(0x150)]({'where':{'id':_0x5bfefb}}),{invitedBy:_0x1ccd46}=_0x43bd5c;if(_0x1ccd46){const _0x3f8a36=await this[_0x2d662f(0x128)][_0x551d36(0x150)]({'where':{'inviteCode':_0x1ccd46}}),_0x4d8d7d=await this[_0x2d662f(0x18e)][_0x2d662f(0x180)]({'where':{'userId':_0x3f8a36['id']}});if(!_0x3f8a36)return;const {id:_0x131311}=_0x3f8a36,{performanceRatio:_0x2c31a8}=_0x4d8d7d,_0x251f3d={'inviterUserId':_0x131311,'inviteeUserId':_0x5bfefb,'orderId':_0x2e1d1d['id'],'orderPrice':_0x2e1d1d[_0x2d662f(0x146)],'commissionPercentage':_0x2c31a8,'commissionAmount':(_0x2e1d1d[_0x2d662f(0x146)]*_0x2c31a8/0x64)[_0x2d662f(0x156)](0x2)};await this[_0x551d36(0x147)][_0x2d662f(0x1a4)](_0x251f3d),await this[_0x551d36(0x147)][_0x2d662f(0x16a)](_0x131311,_0x251f3d[_0x2d662f(0x1cc)]);}}catch(_0x4605e4){console[_0x2d662f(0x197)](_0x551d36(0x1cc),_0x4605e4);throw new common_1[(_0x551d36(0x1ab))](_0x2d662f(0x151),common_1[_0x2d662f(0x19d)][_0x2d662f(0x1a9)]);}}async[_0x410a14(0x182)](_0x10e5ec,_0x19db4b){const _0x26424=_0x410a14,_0x25a5ad=_0x456bd4,{page:page=0x1,size:size=0x14}=_0x19db4b,{id:_0x17bca4}=_0x10e5ec[_0x26424(0x1b5)],[_0x47f9b3,_0x1153ca]=await this[_0x25a5ad(0x1dc)][_0x25a5ad(0x13f)]({'where':{'userId':_0x17bca4},'order':{'id':_0x25a5ad(0x17b)},'skip':(page-0x1)*size,'take':size});return _0x47f9b3[_0x26424(0x14f)](_0x3800ee=>{const _0x330c69=_0x25a5ad;_0x3800ee[_0x330c69(0x18f)]=_0x3800ee[_0x330c69(0x1d4)]>0x0?_0x3800ee[_0x330c69(0x1d4)]+'天':'永久';}),{'rows':(0x0,date_1[_0x25a5ad(0x16e)])(_0x47f9b3),'count':_0x1153ca};}async[_0x456bd4(0x1de)](_0x5c3400,_0x3eba12){const _0x497f9c=_0x410a14,_0x400322=_0x456bd4;try{const {page:page=0x1,size:size=0xa,userId:_0x2b87b9,rechargeType:_0x10a537,packageId:_0x1e9028}=_0x3eba12,{role:_0x5f40cf}=_0x5c3400[_0x400322(0x186)],_0x4f6716={};_0x10a537&&(_0x4f6716[_0x400322(0x14d)]=_0x10a537),_0x4f6716[_0x400322(0x178)]=_0x2b87b9||(0x0,typeorm_2[_0x400322(0x1e1)])(0x186a0),_0x1e9028&&(_0x4f6716[_0x400322(0x1a2)]={'$like':'%'+_0x1e9028+'%'});const [_0x598d35,_0x354489]=await this[_0x400322(0x1dc)][_0x400322(0x13f)]({'where':_0x4f6716,'order':{'id':_0x400322(0x17b)},'skip':(page-0x1)*size,'take':size}),_0x1780e5=_0x598d35['map'](_0xdf573e=>_0xdf573e[_0x400322(0x178)]),_0x16f879=await this[_0x400322(0x128)][_0x400322(0x189)]({'where':{'id':(0x0,typeorm_2['In'])(_0x1780e5)}});return _0x598d35[_0x497f9c(0x14f)](_0x2029f6=>{const _0x5d0900=_0x497f9c,_0x2645e4=_0x400322,_0x3b8210=_0x16f879[_0x2645e4(0x189)](_0x37c08c=>_0x37c08c['id']===_0x2029f6[_0x2645e4(0x178)]);_0x2029f6[_0x2645e4(0x158)]=_0x3b8210===null||_0x3b8210===void 0x0?void 0x0:_0x3b8210[_0x2645e4(0x158)],_0x2029f6[_0x2645e4(0x177)]=_0x3b8210===null||_0x3b8210===void 0x0?void 0x0:_0x3b8210[_0x5d0900(0x1e4)],_0x2029f6[_0x2645e4(0x18a)]=_0x3b8210===null||_0x3b8210===void 0x0?void 0x0:_0x3b8210[_0x2645e4(0x18a)],_0x2029f6[_0x2645e4(0x1bd)]=_0x3b8210===null||_0x3b8210===void 0x0?void 0x0:_0x3b8210[_0x5d0900(0x18b)],_0x2029f6[_0x5d0900(0x17c)]=_0x3b8210===null||_0x3b8210===void 0x0?void 0x0:_0x3b8210['avatar'];}),_0x5f40cf!==_0x400322(0x159)&&_0x598d35[_0x400322(0x16c)](_0x5f1e30=>{const _0x581d62=_0x400322;_0x5f1e30[_0x581d62(0x177)]=_0x5f1e30['email']?(0x0,utils_1[_0x581d62(0x167)])(_0x5f1e30[_0x581d62(0x177)]):'',_0x5f1e30[_0x581d62(0x18a)]=_0x5f1e30[_0x581d62(0x18a)]?(0x0,utils_1[_0x581d62(0x167)])(_0x5f1e30['phone']):'';}),{'rows':_0x598d35,'count':_0x354489};}catch(_0x487484){console[_0x400322(0x197)](_0x400322(0x181),_0x487484);throw new common_1['HttpException'](_0x400322(0x1da),common_1['HttpStatus'][_0x400322(0x1a9)]);}}async[_0x456bd4(0x13c)](_0x45a337){const _0x2ab4fc=_0x456bd4;return await this[_0x2ab4fc(0x134)][_0x2ab4fc(0x189)]({'where':{'userId':(0x0,typeorm_2['In'])(_0x45a337)}});}async[_0x456bd4(0x162)](_0x290c59,_0x39ffc4){const _0x1c9b08=_0x456bd4;return await this[_0x1c9b08(0x19f)](_0x290c59,_0x1c9b08(0x153),-_0x39ffc4);}async[_0x456bd4(0x143)](){const _0x5b0082=_0x410a14,_0x210b87=_0x456bd4,_0x5c04be=await this[_0x210b87(0x128)][_0x210b87(0x189)]();if(!_0x5c04be[_0x210b87(0x18b)])return;const _0x43d685=await this[_0x210b87(0x137)][_0x210b87(0x127)]([_0x210b87(0x1ba)]);if(!_0x43d685)await this[_0x210b87(0x137)][_0x5b0082(0x13c)]({'settings':[{'configKey':_0x210b87(0x1ba),'configVal':'1'}]});else throw new common_1[(_0x210b87(0x1c2))](_0x210b87(0x1d6),common_1[_0x210b87(0x19d)][_0x210b87(0x1a9)]);_0x5c04be[_0x210b87(0x16c)](_0x743cf8=>{const _0xf3641b=_0x210b87,{id:_0x30b1c2}=_0x743cf8;this[_0xf3641b(0x17f)][_0xf3641b(0x180)]({'where':{'userId':_0x30b1c2}})[_0xf3641b(0x1b4)](_0x379e06=>{const _0x5d7c78=_0x3d8a;if(!_0x379e06)return;this[_0x5d7c78(0x1ca)](_0x30b1c2,_0x379e06);});});}async[_0x456bd4(0x1ac)](_0x1d9428,_0x572362){const _0x5edb7d=_0x410a14,_0x4c4a2a=_0x456bd4,{balance:balance=0x0,usesLeft:usesLeft=0x0,paintCount:paintCount=0x0,useTokens:useTokens=0x0,useChats:useChats=0x0,usePaints:usePaints=0x0}=_0x572362,_0x274bda=await this[_0x4c4a2a(0x149)][_0x4c4a2a(0x180)]({'where':{'userId':_0x1d9428}}),_0x2abe24={'userId':_0x1d9428,'model3Count':Number(usesLeft),'model4Count':(_0x274bda===null||_0x274bda===void 0x0?void 0x0:_0x274bda[_0x4c4a2a(0x1ce)])||0x0,'drawMjCount':Number(balance),'useModel3Count':Number(useChats),'useModel4Count':(_0x274bda===null||_0x274bda===void 0x0?void 0x0:_0x274bda[_0x4c4a2a(0x1c3)])||0x0,'useDrawMjCount':Number(usePaints),'useModel3Token':Number(useTokens),'useModel4Token':0x0,'useDrawMjToken':0x0},_0x26ddd3=await this[_0x4c4a2a(0x134)][_0x4c4a2a(0x180)]({'where':{'userId':_0x1d9428}});_0x26ddd3?common_1[_0x4c4a2a(0x147)][_0x4c4a2a(0x183)]('用户'+_0x1d9428+'账户信息已经存在、迁移无效',_0x4c4a2a(0x187)):this[_0x4c4a2a(0x134)][_0x5edb7d(0x1a4)](_0x2abe24)[_0x4c4a2a(0x1b4)](_0x502293=>{const _0x44de8b=_0x5edb7d,_0x318fff=_0x4c4a2a;common_1[_0x318fff(0x147)][_0x318fff(0x183)]('用户'+_0x1d9428+_0x44de8b(0x1fd),_0x44de8b(0x202));})[_0x5edb7d(0x192)](_0x253eab=>{const _0xef9d55=_0x5edb7d,_0xd44907=_0x4c4a2a;console[_0xef9d55(0x176)](_0xef9d55(0x1cc),_0x253eab),common_1[_0xd44907(0x147)][_0xd44907(0x183)]('用户'+_0x1d9428+_0xd44907(0x1d7),_0xd44907(0x187));});}async[_0x456bd4(0x11e)](_0x2d5140){const _0x163327=_0x410a14,_0x3440cb=_0x456bd4,{fingerprint:_0x14b7e1}=_0x2d5140[_0x3440cb(0x1d3)],{id:_0x532080}=_0x2d5140[_0x163327(0x1b5)];return await this[_0x3440cb(0x1af)][_0x3440cb(0x1a1)]({'userId':Number(_0x14b7e1)},{'userId':_0x532080}),await this[_0x3440cb(0x15c)]['update']({'userId':Number(_0x14b7e1)},{'userId':_0x532080}),await this[_0x3440cb(0x1ca)][_0x163327(0x1a0)]({'userId':Number(_0x14b7e1)},{'userId':_0x532080}),0x1;}async[_0x410a14(0x17e)](_0x2961e6){const _0x44f07e=_0x456bd4,{fingerprint:_0x2d8b62}=_0x2961e6['headers'],_0x2bc375=await this[_0x44f07e(0x1af)][_0x44f07e(0x1ce)]({'where':{'userId':_0x2d8b62}}),_0x3713e6=await this[_0x44f07e(0x15c)][_0x44f07e(0x1ce)]({'where':{'userId':_0x2d8b62}}),_0x40c4a2=await this[_0x44f07e(0x1ca)][_0x44f07e(0x1ce)]({'where':{'userId':_0x2d8b62}});return _0x2bc375||_0x3713e6||_0x40c4a2||0x0;}};UserBalanceService=__decorate([(0x0,common_1[_0x456bd4(0x121)])(),__param(0x0,(0x0,typeorm_1['InjectRepository'])(balance_entity_1[_0x410a14(0x164)])),__param(0x1,(0x0,typeorm_1[_0x410a14(0x1e7)])(userBalance_entity_1[_0x456bd4(0x1d0)])),__param(0x2,(0x0,typeorm_1[_0x410a14(0x1e7)])(accountLog_entity_1['AccountLogEntity'])),__param(0x3,(0x0,typeorm_1[_0x456bd4(0x1c4)])(cramiPackage_entity_1['CramiPackageEntity'])),__param(0x4,(0x0,typeorm_1[_0x456bd4(0x1c4)])(config_entity_1[_0x456bd4(0x132)])),__param(0x5,(0x0,typeorm_1[_0x456bd4(0x1c4)])(user_entity_1[_0x456bd4(0x16b)])),__param(0x6,(0x0,typeorm_1[_0x456bd4(0x1c4)])(salesUsers_entity_1[_0x410a14(0x1f0)])),__param(0x7,(0x0,typeorm_1[_0x410a14(0x1e7)])(whiteList_entity_1[_0x456bd4(0x1b7)])),__param(0x8,(0x0,typeorm_1[_0x456bd4(0x1c4)])(fingerprint_entity_1[_0x456bd4(0x173)])),__param(0x9,(0x0,typeorm_1[_0x456bd4(0x1c4)])(chatGroup_entity_1[_0x456bd4(0x15a)])),__param(0xa,(0x0,typeorm_1[_0x410a14(0x1e7)])(chatLog_entity_1[_0x410a14(0x19f)])),__param(0xb,(0x0,typeorm_1[_0x410a14(0x1e7)])(midjourney_entity_1[_0x456bd4(0x18c)])),__metadata(_0x456bd4(0x12a),[typeorm_2['Repository'],typeorm_2[_0x456bd4(0x1cb)],typeorm_2[_0x456bd4(0x1cb)],typeorm_2[_0x456bd4(0x1cb)],typeorm_2['Repository'],typeorm_2[_0x410a14(0x18a)],typeorm_2[_0x456bd4(0x1cb)],typeorm_2[_0x456bd4(0x1cb)],typeorm_2[_0x456bd4(0x1cb)],typeorm_2[_0x456bd4(0x1cb)],typeorm_2[_0x456bd4(0x1cb)],typeorm_2[_0x456bd4(0x1cb)],sales_service_1[_0x456bd4(0x15f)],globalConfig_service_1[_0x456bd4(0x123)]])],UserBalanceService),exports[_0x456bd4(0x1a8)]=UserBalanceService;